"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7672],{89090:function(e,t,n){n.d(t,{u:function(){return i}});var i="/v2/user/getotpinfo"},40153:function(e,t,n){n.d(t,{N:function(){return i}});var i="/v2/user/sendotp"},28521:function(e,t,n){n.d(t,{n:function(){return i}});var i="/v2/user/verifymfa"},84818:function(e,t,n){n.d(t,{ZP:function(){return S},v$:function(){return C},EX:function(){return x}});var i=n(72664),r=n(89594),o=n(67009),s=n(67945),a=n.n(s),c=n(32735),u=n(61501),l=n(58928),p=n(87904),d=n(44070),f=n(28521),h=n(40153),g=n(89090),m=n(75752),y=n(13972),b=n(16648),O=n(74512);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Z=c.createContext(null);Z.displayName="StandardizedOTPState";var T=c.createContext(null);T.displayName="StandardizedOTPAction";var P={page:"OTP_DESTINATION_OPTION_MODAL",recipients:[],title:"",description:"",verificationTitle:"",selectedRecipientKey:"",selectedRecipientName:"",selectedRecipientMethod:"OTP",isLoadingVerifyCode:!1,isLoadingSendCode:!1,isLoadingResendCode:!1,showOTPModal:!1,hasChangedDestination:!1,error:{isShow:!1,message:""},sendCodeStatus:"SUCCESS"};function S(e){var t,n,i,s,v=(0,u.ec)(),w=(0,u.O_)(),S=v.otpSessionId,C=v.mfaMethod,x=(0,l.yG)(),I=(0,d.Z)({domain:"user",method:"post",path:g.u}),R=(0,d.Z)({domain:"user",method:"post",path:h.N}),j=(0,d.Z)({domain:"user",method:"post",path:f.n}),D=c.useReducer(k,P),M=(0,o.Z)(D,2),L=M[0],V=M[1],E=(0,c.useState)(!1),N=E[0],A=E[1],_=(0,c.useState)("error"),B=_[0],H=_[1],F=(0,c.useState)(""),U=F[0],W=F[1],z=(0,y.Z)(),K=(t=(0,r.Z)(a().mark(function e(){var t,n,i,r,o,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I({otpSessionId:S});case 2:(t=e.sent).success&&(i=(n=t.result.data).userVerificationDataList,r=n.title,o=n.verificationTitle,V({type:"initializeOTPFlow",recipients:i,title:r,description:n.description,verificationTitle:o}),1===i.length&&(V({type:"setPage",page:"VERIFICATION_INPUT_MODAL"}),G((s=n.userVerificationDataList[0]).key,s.maskedTarget,s.verificationMethod)),z({pageModalName:1===i.length?"VERIFICATION_INPUT_MODAL":"OTP_DESTINATION_OPTION_MODAL",eventName:"INITIAL_LOAD",listOtpDestination:(0,m.vz)(i)}));case 4:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),G=(n=(0,r.Z)(a().mark(function e(t,n,i){var r,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return V({type:"setRecipient",selectedRecipientKey:t,selectedRecipientName:n,selectedRecipientMethod:i}),V({type:"setLoadingSendCode",isLoading:!0}),e.next=4,R({otpSessionId:S,key:t});case 4:(r=e.sent).success&&(V({type:"setSendCodeStatus",status:(o=r.result.data).status}),"SUCCESS"!==o.status?(W(o.message),H("error"),A(!0)):o.status&&V({type:"setPage",page:"VERIFICATION_INPUT_MODAL"})),V({type:"setLoadingSendCode",isLoading:!1});case 7:case"end":return e.stop()}},e)})),function(e,t,i){return n.apply(this,arguments)}),X=(i=(0,r.Z)(a().mark(function e(){var t,n,i,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return V({type:"setLoadingResendCode",isLoading:!0}),e.next=3,R({otpSessionId:S,key:L.selectedRecipientKey});case 3:(t=e.sent).success&&(n=t.result.data).status&&(i=n.message,r="SUCCESS"===n.status?"success":"error",W(i),H(r),A(!0),V({type:"setSendCodeStatus",status:n.status})),V({type:"setLoadingResendCode",isLoading:!1});case 6:case"end":return e.stop()}},e)})),function(){return i.apply(this,arguments)}),Y=(s=(0,r.Z)(a().mark(function e(t){var n,i,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return V({type:"setLoadingVerifyCode",isLoading:!0}),n={userAuthSessionId:S,authenticationToken:t,verificationType:L.selectedRecipientMethod,mfaMethod:C||"OTP"},e.next=4,j(n);case 4:(i=e.sent).success&&("SUCCESS"===(r=i.result.data).status?V({type:"setPage",page:"FINISH_MODAL"}):"INVALID_TOKEN"===r.status?V({type:"setError",error:{isShow:!0,message:r.message}}):(W(r.message),H("error"),A(!0))),V({type:"setLoadingVerifyCode",isLoading:!1});case 7:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)});return(0,c.useEffect)(function(){S&&K()},[S]),(0,O.jsxs)(p.Z,{testID:"StandarizedOTPFlow",children:[(0,O.jsx)(T.Provider,{value:{getOTPInfo:K,sendOTP:G,resendOTP:X,verifyMFA:Y,closeOTPModal:function(){V({type:"closeOTPModal"}),w({type:"setMFARequired",otpSessionId:"",mfaMethod:null}),w({type:"setMFACallback",mfaVerifiedCallback:void 0})},finishOTPFlow:function(){V({type:"finishOTPFlow"}),w({type:"setMFARequired",otpSessionId:"",mfaMethod:null}),v.mfaVerifiedCallback?(v.mfaVerifiedCallback(),w({type:"setMFACallback",mfaVerifiedCallback:void 0})):e.onOTPSuccess&&e.onOTPSuccess()},resetError:function(){V({type:"setError",error:{isShow:!1,message:""}})},setPage:function(e){V({type:"setPage",page:e})},setHasChangedDestination:function(e){V({type:"setHasChangedDestination",data:e})},updateRecipientList:function(e){V({type:"updateRecipientList",recipients:e})}},children:(0,O.jsx)(Z.Provider,{value:L,children:e.children})}),(0,O.jsx)(b.Z,{onHide:function(){A(!1)},isVisible:N,text:U,variant:"error"===B?"alert":"positive",offset:"desktop"===x?50:0,style:{zIndex:1e4,width:"desktop"===x?"50%":"100%",left:"desktop"===x?"25%":0,position:"fixed"}})]})}function k(e,t){switch(t.type){case"initializeOTPFlow":return w(w({},e),{},{recipients:t.recipients,title:t.title,description:t.description,verificationTitle:t.verificationTitle,showOTPModal:!0});case"setLoadingVerifyCode":return w(w({},e),{},{isLoadingVerifyCode:t.isLoading});case"setLoadingSendCode":return w(w({},e),{},{isLoadingSendCode:t.isLoading});case"setLoadingResendCode":return w(w({},e),{},{isLoadingResendCode:t.isLoading});case"setRecipient":return w(w({},e),{},{selectedRecipientKey:t.selectedRecipientKey,selectedRecipientName:t.selectedRecipientName,selectedRecipientMethod:t.selectedRecipientMethod});case"setPage":return w(w({},e),{},{page:t.page});case"closeOTPModal":case"finishOTPFlow":return P;case"updateRecipientList":return w(w({},e),{},{recipients:t.recipients});case"setError":return w(w({},e),{},{error:t.error});case"setSendCodeStatus":return w(w({},e),{},{sendCodeStatus:t.status});case"setHasChangedDestination":return w(w({},e),{},{hasChangedDestination:t.data});default:return e}}function C(){return(0,c.useContext)(T)}function x(){return[(0,c.useContext)(Z),C()]}},97672:function(e,t,n){n.d(t,{Z:function(){return P}});var i=n(67009),r=n(32735),o=n(6907),s=n(2231),a=n(87904),c=n(82070),u=n.n(c),l=n(25773),p=n(22356),d=n(98178),f=n(46122),h=n(84818),g=n(1529),m=n(13972),y=n(75752),b=n(74512),O=u()(function(){return n.e(8770).then(n.bind(n,98165))},{ssr:!1,loadableGenerated:{webpack:function(){return[98165]}}}),v=u()(function(){return Promise.all([n.e(6250),n.e(6337)]).then(n.bind(n,23584))},{ssr:!1,loadableGenerated:{webpack:function(){return[23584]}}}),w=u()(function(){return Promise.all([n.e(9485),n.e(4599)]).then(n.bind(n,95624))},{ssr:!1,loadableGenerated:{webpack:function(){return[95624]}}}),Z=o.Z.create({modalContent:{marginHorizontal:l.Z.spacing.xs,marginVertical:l.Z.spacing.s},container:{alignItems:"center"}});function T(){var e=(0,h.EX)(),t=(0,i.Z)(e,2),n=t[0],o=t[1],c=(0,s.Z)().width,u=(0,m.Z)();(0,f.hw)(g.G.contentResource);var l=function(){u({pageModalName:n.page,eventName:"CLICK_CLOSE",listOtpDestination:null}),(0,y.k9)(),o.closeOTPModal()},T=(0,r.useRef)(null);return(0,r.useEffect)(function(){var e,t=T.current,n=null==t||null===(e=t.parentElement)||void 0===e||null===(e=e.parentElement)||void 0===e||null===(e=e.parentElement)||void 0===e||null===(e=e.parentElement)||void 0===e?void 0:e.parentElement;n&&(n.style.zIndex="99999999")},[T,n.showOTPModal]),(0,b.jsx)(d.default,{onBackdropPress:l,isVisible:n.showOTPModal,style:Z.container,children:(0,b.jsx)(a.Z,{ref:T,children:(0,b.jsx)(p.default,{showCloseButton:!0,onCloseButtonPress:l,contentStyle:Z.modalContent,width:c<550?.9*c:432,children:(0,b.jsx)(r.Suspense,{fallback:null,children:(function(){switch(n.page){case"VERIFICATION_INPUT_MODAL":return function(){return(0,b.jsx)(v,{})};case"FINISH_MODAL":return function(){return(0,b.jsx)(w,{})};default:return function(){return(0,b.jsx)(O,{})}}})()()})})})})}function P(e){var t=e.onOTPSuccess;return(0,m.V)(),(0,b.jsx)(h.ZP,{onOTPSuccess:t,children:(0,b.jsx)(T,{})})}},13972:function(e,t,n){n.d(t,{V:function(){return d},Z:function(){return p}});var i=n(72664),r=n(32735),o=n(72894),s=n(14618),a=n(75752);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l="web.otpModal";function p(){var e=(0,o.Z)(),t=(0,s.Wn)(),n=(0,a.cU)();return function(i){var r={url:window.location.href,visitId:n};t("GTM","TRACK",u(u({event_name:l},r),i)),e(l,u(u({},i),r)).send()}}function d(){(0,r.useEffect)(function(){return function(){return(0,a.k9)()}},[])}},75752:function(e,t,n){n.d(t,{vz:function(){return c},cU:function(){return s},k9:function(){return a}});var i=n(33685),r="$otp_modal$",o=n(83635);function s(){var e=o.Z.getItem(r);if(e)return e;var t=(0,i.v4)();return o.Z.setItem(r,t),t}function a(){o.Z.getItem(r)&&o.Z.removeItem(r)}var c=function(e){return e.reduce(function(e,t){return e.push(t.verificationSender||t.verificationTargetType||""),e},[])}},83635:function(e,t){t.Z={getItem:function(e){try{return window.sessionStorage.getItem(e)}catch(e){return null}},setItem:function(e,t){try{return window.sessionStorage.setItem(e,t)}catch(e){return}},removeItem:function(e){try{return window.sessionStorage.removeItem(e)}catch(e){return}},clear:function(){try{return window.sessionStorage.clear()}catch(e){return}},key:function(e){try{return window.sessionStorage.key(e)}catch(e){return null}},get length(){try{return window.sessionStorage.length}catch(e){return 0}}}},16648:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(47556),r=n(99708),o=n(74512);function s(e){if("undefined"==typeof document)return null;var t=e.text,n=e.isVisible,s=e.onHide,a=e.variant,c=e.closeText,u=e.position,l=e.style,p=e.offset;return(0,i.createPortal)((0,o.jsx)(r.Z,{durationMs:3e3,closeText:c,style:[{zIndex:1},l],offset:p,position:void 0===u?"top":u,variant:a,text:t,isVisible:n,onHide:s}),document.body)}},98178:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var i=n(72664),r=n(37051),o=n(77698),s=n(25773),a=n(74512),c=["style"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e){var t=e.style,n=(0,r.Z)(e,c),i=l({style:[{alignSelf:"center"},t],backdropColor:s.Z.color.uiDarkPrimary,backdropOpacity:s.Z.opacity.translucent(),animationIn:"slideInUp",animationInTiming:s.Z.animation.timing.normal,animationOut:"slideOutDown",animationOutTiming:s.Z.animation.timing.normal,avoidKeyboard:!1,backdropTransitionInTiming:s.Z.animation.timing.normal,backdropTransitionOutTiming:s.Z.animation.timing.normal,onModalShow:function(){return null},onModalHide:function(){return null},isVisible:!1,hideModalContentWhileAnimating:!1,onBackdropPress:function(){return null},onBackButtonPress:function(){return null},onRequestClose:function(){return null},swipeThreshold:100,useNativeDriver:!1,scrollTo:null,scrollOffset:0,scrollOffsetMax:0},n);return(0,a.jsx)(o.Z,l({},i))}},68863:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(32735),r=n(34274),o=n(71471);function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n.onFinishTransitioning,a=n.easing,c=void 0===a?r.Z.inOut(r.Z.linear):a,u=(0,i.useState)(e),l=u[0],p=u[1],d=(0,i.useRef)(new o.Z.Value(0)),f=(0,i.useRef)(0),h=(0,i.useRef)(e);return(0,i.useEffect)(function(){var e=o.Z.timing(d.current,{toValue:0===f.current?1:0,duration:t,easing:c}),n=requestAnimationFrame(function(){return e.start(function(){"function"==typeof s&&s()})});return h.current=l,f.current=0===f.current?1:0,function(){return cancelAnimationFrame(n)}},[l]),{currentBehavior:l,setCurrentBehavior:p,interpolate:function(e){var t,n,i;return t=d.current,n=h.current,i=0===f.current,t.interpolate({inputRange:[0,1],outputRange:[e[i?n:l],e[i?l:n]]})}}}},22356:function(e,t,n){n.r(t);var i=n(87181),r=n(90392),o=n(72484),s=n(5006),a=n(27871),c=n(87904),u=n(6907),l=n(33910),p=n(74512),d=i.Z.color.uiDarkPrimary+"00";function f(e){var t=e.image,n=e.width,o=e.imageStyle;return(0,p.jsxs)(c.Z,{style:[g.imageWrapper,o],children:[(0,p.jsx)(r.Z,{source:{uri:t},style:[g.imageStyle,{width:n}]}),(0,p.jsx)(l.Z,{colors:[i.Z.opacity.translucent(i.Z.color.uiDarkPrimary),d],style:{width:n,height:i.Z.spacing.xxxxl,position:"absolute",top:0,left:0}})]})}function h(e){var t=e.showCloseButton,n=e.width,r=e.height,u=e.children,l=e.image,d=e.title,h=e.maxWidth,m=e.minHeight,y=e.onCloseButtonPress,b=e.contentStyle,O=e.containerStyle,v=e.imageStyle,w=e.testID,Z=l?i.Z.color.uiLightPrimary:i.Z.color.uiDarkSecondary,T=i.Z.color.lightPrimary;return(0,p.jsxs)(c.Z,{style:[g.container,{width:n,height:r,maxWidth:h,minHeight:m,backgroundColor:T},O],testID:w,children:[l?(0,p.jsx)(f,{image:l,width:n,imageStyle:v}):null,t?(0,p.jsx)(c.Z,{style:[g.close,{width:i.Z.spacing.l,height:i.Z.spacing.l}],children:(0,p.jsx)(o.Z,{onPress:function(){return y()},children:(0,p.jsx)(c.Z,{children:(0,p.jsx)(a.Z,{color:Z})})})}):null,d?(0,p.jsx)(s.Z,{style:[g.title,t&&!l&&{marginRight:i.Z.spacing.m+i.Z.spacing.l}],variant:"title-1",children:d}):null,(0,p.jsx)(c.Z,{style:[g.content,b],children:u})]})}h.defaultProps={width:320,maxWidth:600,minHeight:200,showClose:!1,onCloseButtonPress:function(){return null}};var g=u.Z.create({container:{paddingBottom:i.Z.spacing.m,borderRadius:i.Z.border.radius.default},title:{paddingVertical:i.Z.spacing.ml,paddingHorizontal:i.Z.spacing.m},close:{position:"absolute",right:i.Z.spacing.m,top:i.Z.spacing.m,width:i.Z.spacing.l,height:i.Z.spacing.l,zIndex:1,borderRadius:i.Z.border.radius.default,overflow:"hidden"},content:{paddingHorizontal:i.Z.spacing.m,paddingTop:i.Z.spacing.xs},imageWrapper:{overflow:"hidden",borderTopLeftRadius:i.Z.border.radius.default,borderTopRightRadius:i.Z.border.radius.default},imageStyle:{minHeight:180}});t.default=h},99708:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(32735),r=n(27792),o=n(34274),s=n(71471),a=n(25773),c=n(68863),u=n(74512);function l(e){var t=(0,i.useRef)(null),n=(0,c.Z)("hide",a.Z.animation.timing.instant,{easing:o.Z.inOut(o.Z.ease)}),l=n.setCurrentBehavior,p=n.interpolate,d=e.text,f=e.variant,h=e.isVisible,g=e.position,m=e.offset,y=e.onHide,b=e.durationMs,O=e.closeText,v=e.title,w=f.replace("-","_").toUpperCase();i.useEffect(function(){l(h?"show":"hide")},[h]),i.useEffect(function(){if(h&&"number"==typeof b&&b>0)return t.current=window.setTimeout(function(){return y()},b),function(){return t.current&&clearTimeout(t.current)}},[b,h]);var Z=p({show:void 0===m?0:m,hide:-100}),T=p({show:1,hide:0});return(0,u.jsx)(s.Z.View,{style:[{position:"absolute",width:"100%",opacity:T},e.style,"top"===(void 0===g?"bottom":g)?{top:Z}:{bottom:Z}],pointerEvents:h?"auto":"none",children:(0,u.jsx)(r.Z,{title:v,message:d,actionType:"text",actionText:void 0===O?"Close":O,actionOnPress:function(){return y()},variant:w})})}},77698:function(e,t,n){n.d(t,{Z:function(){return H}});var i={};n.r(i),n.d(i,{slideInDown:function(){return S},slideInLeft:function(){return C},slideInRight:function(){return x},slideInUp:function(){return k},slideOutDown:function(){return I},slideOutLeft:function(){return j},slideOutRight:function(){return D},slideOutUp:function(){return R}});var r=n(37051),o=n(89676),s=n(58506),a=n(9856),c=n(41108),u=n(98192),l=n(97831),p=n(72664),d=n(32735),f=n(91425),h=n(71471),g=n(9686),m=n(17071),y=n(18662),b=n(76962),O=n(11995),v=n(14648),w=f.Z.get("window"),Z=w.height,T=w.width,P=function(e,t,n){return{from:(0,p.Z)({},e,t),to:(0,p.Z)({},e,n)}},S=P("translateY",-Z,0),k=P("translateY",Z,0),C=P("translateX",-T,0),x=P("translateX",T,0),I=P("translateY",0,Z),R=P("translateY",0,-Z),j=P("translateX",0,-T),D=P("translateX",0,T),M=n(6907).Z.create({backdrop:{position:"fixed",top:0,bottom:0,left:0,right:0,opacity:0,width:"100%",height:"100%",backgroundColor:"#000000"},content:{flex:1,justifyContent:"center"}}),L=n(74512),V=["animationIn","animationInTiming","animationOut","animationOutTiming","avoidKeyboard","backdropColor","backdropOpacity","backdropTransitionInTiming","backdropTransitionOutTiming","children","isVisible","onModalShow","onBackdropPress","onBackButtonPress","useNativeDriver","style"];function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){(0,p.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}(0,v.C3)(i);var A=function(e,t){(0,v.ph)(e,(0,v.ih)(t))},_=function(e){return null!==e&&"object"==typeof e},B=function(e){(0,c.Z)(i,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(i);return e=t?Reflect.construct(n,arguments,(0,l.Z)(this).constructor):n.apply(this,arguments),(0,u.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),t=n.call(this,e),(0,p.Z)((0,a.Z)(t),"state",{showContent:!0,isVisible:!1,deviceWidth:f.Z.get("window").width,deviceHeight:f.Z.get("window").height,isSwipeable:!!t.props.swipeDirection,pan:null}),(0,p.Z)((0,a.Z)(t),"transitionLock",null),(0,p.Z)((0,a.Z)(t),"inSwipeClosingState",!1),(0,p.Z)((0,a.Z)(t),"buildPanResponder",function(){var e=null;e="right"===t.props.swipeDirection||"left"===t.props.swipeDirection?h.Z.event([null,{dx:t.state.pan.x}]):h.Z.event([null,{dy:t.state.pan.y}]),t.panResponder=g.Z.create({onStartShouldSetPanResponder:function(){return!t.props.scrollTo||!(t.props.scrollOffset>0)},onPanResponderMove:function(n,i){var r=1-t.getAccDistancePerDirection(i)/t.state.deviceWidth;if(t.isSwipeDirectionAllowed(i))t.backdropRef&&t.backdropRef.transitionTo({opacity:t.props.backdropOpacity*r}),e(n,i);else if(t.props.scrollTo){var o=-i.dy;o>t.props.scrollOffsetMax&&(o-=(o-t.props.scrollOffsetMax)/2),t.props.scrollTo({y:o,animated:!1})}},onPanResponderRelease:function(e,n){if(t.getAccDistancePerDirection(n)>t.props.swipeThreshold&&t.props.onSwipe){t.inSwipeClosingState=!0,t.props.onSwipe();return}t.backdropRef&&t.backdropRef.transitionTo({opacity:t.props.backdropOpacity},t.props.backdropTransitionInTiming),h.Z.spring(t.state.pan,{toValue:{x:0,y:0},bounciness:0}).start(),t.props.scrollOffset>t.props.scrollOffsetMax&&t.props.scrollTo({y:t.props.scrollOffsetMax,animated:!0})}})}),(0,p.Z)((0,a.Z)(t),"getAccDistancePerDirection",function(e){switch(t.props.swipeDirection){case"up":return-e.dy;case"down":return e.dy;case"right":return e.dx;case"left":return-e.dx;default:return 0}}),(0,p.Z)((0,a.Z)(t),"isSwipeDirectionAllowed",function(e){var n=e.dy,i=e.dx;return"up"===t.props.swipeDirection&&n<0||"down"===t.props.swipeDirection&&n>0||"right"===t.props.swipeDirection&&i>0||"left"===t.props.swipeDirection&&i<0}),(0,p.Z)((0,a.Z)(t),"buildAnimations",function(e){var n=e.animationIn,i=e.animationOut;if(_(n)){var r=JSON.stringify(n);A(r,n),n=r}if(_(i)){var o=JSON.stringify(i);A(o,i),i=o}t.animationIn=n,t.animationOut=i}),(0,p.Z)((0,a.Z)(t),"handleDimensionsUpdate",function(){var e=f.Z.get("window").width,n=f.Z.get("window").height;(e!==t.state.deviceWidth||n!==t.state.deviceHeight)&&t.setState({deviceWidth:e,deviceHeight:n})}),(0,p.Z)((0,a.Z)(t),"handleBackdropRef",function(e){t.backdropRef=e,t.state.isVisible&&t.open()}),(0,p.Z)((0,a.Z)(t),"handleContentRef",function(e){t.contentRef=e,t.state.isVisible&&t.open()}),(0,p.Z)((0,a.Z)(t),"open",function(){!t.transitionLock&&t.backdropRef&&t.contentRef&&(t.transitionLock=!0,t.backdropRef.transitionTo({opacity:t.props.backdropOpacity},t.props.backdropTransitionInTiming),t.state.isSwipeable&&t.state.pan.setValue({x:0,y:0}),t.contentRef[t.animationIn](t.props.animationInTiming).then(function(){t.transitionLock=!1,t.props.isVisible?t.props.onModalShow():t._close()}))}),(0,p.Z)((0,a.Z)(t),"_close",function(){if(!t.transitionLock){t.transitionLock=!0,t.backdropRef&&t.backdropRef.transitionTo({opacity:0},t.props.backdropTransitionOutTiming);var e=t.animationOut;t.inSwipeClosingState&&(t.inSwipeClosingState=!1,"up"===t.props.swipeDirection?e="slideOutUp":"down"===t.props.swipeDirection?e="slideOutDown":"right"===t.props.swipeDirection?e="slideOutRight":"left"===t.props.swipeDirection&&(e="slideOutLeft")),t.contentRef&&t.contentRef[e](t.props.animationOutTiming).then(function(){t.transitionLock=!1,t.props.isVisible?t.open():(t.setState({showContent:!1},function(){t.setState({isVisible:!1})}),t.props.onModalHide())})}}),t.buildAnimations(e),t.state.isSwipeable&&(t.state=N(N({},t.state),{},{pan:new h.Z.ValueXY}),t.buildPanResponder()),t.props.isVisible&&(t.state=N(N({},t.state),{},{isVisible:!0,showContent:!0})),t}return(0,s.Z)(i,[{key:"componentWillReceiveProps",value:function(e){!this.state.isVisible&&e.isVisible&&this.setState({isVisible:!0,showContent:!0}),(this.props.animationIn!==e.animationIn||this.props.animationOut!==e.animationOut)&&this.buildAnimations(e),this.props.backdropOpacity!==e.backdropOpacity&&this.backdropRef&&this.backdropRef.transitionTo({opacity:e.backdropOpacity},this.props.backdropTransitionInTiming)}},{key:"componentDidMount",value:function(){this.state.isVisible&&this.open()}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(e){this.props.isVisible&&!e.isVisible?this.open():!this.props.isVisible&&e.isVisible&&this._close()}},{key:"render",value:function(){var e=this.props,t=(e.animationIn,e.animationInTiming,e.animationOut,e.animationOutTiming,e.avoidKeyboard),n=e.backdropColor,i=(e.backdropOpacity,e.backdropTransitionInTiming,e.backdropTransitionOutTiming,e.children),o=(e.isVisible,e.onModalShow,e.onBackdropPress),s=e.onBackButtonPress,a=e.useNativeDriver,c=e.style,u=(0,r.Z)(e,V),l=[{margin:.05*this.state.deviceWidth,transform:[{translateY:0}]},M.content,c],p={},d={};this.state.isSwipeable&&(p=N({},this.panResponder.panHandlers),d=this.state.pan.getLayout());var f=this.props.hideModalContentWhileAnimating&&this.props.useNativeDriver&&!this.state.showContent?(0,L.jsx)(v.G7,{}):i,h=(0,L.jsx)(v.G7,N(N(N({},p),{},{ref:this.handleContentRef,style:[d,l],pointerEvents:"box-none",useNativeDriver:a},u),{},{children:f}));return(0,L.jsxs)(m.Z,N(N({transparent:!0,animationType:"none",visible:this.state.isVisible,onRequestClose:s},u),{},{children:[(0,L.jsx)(y.Z,{onPress:o,children:(0,L.jsx)(v.G7,{ref:this.handleBackdropRef,useNativeDriver:a,style:[M.backdrop,{backgroundColor:this.state.showContent?n:"transparent"}]})}),t&&(0,L.jsx)(b.Z,{behavior:"ios"===O.Z.OS?"padding":null,pointerEvents:"box-none",style:l.concat([{margin:0}]),children:h}),!t&&h]}))}}]),i}(d.Component);(0,p.Z)(B,"setAppElement",m.Z.setAppElement),(0,p.Z)(B,"defaultProps",{animationIn:"slideInUp",animationInTiming:300,animationOut:"slideOutDown",animationOutTiming:300,avoidKeyboard:!1,backdropColor:"black",backdropOpacity:.7,backdropTransitionInTiming:300,backdropTransitionOutTiming:300,onModalShow:function(){return null},onModalHide:function(){return null},isVisible:!1,hideModalContentWhileAnimating:!1,onBackdropPress:function(){return null},onBackButtonPress:function(){return null},swipeThreshold:100,useNativeDriver:!1,scrollTo:null,scrollOffset:0,scrollOffsetMax:0});var H=B}}]);