(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8631],{82026:function(e,t,n){e.exports=n.p+"static/v4.5.8/8/8c163aea0d70a7f11c9b2963b3fd0534.svg"},81891:function(e,t,n){e.exports=n.p+"static/v4.5.8/f/f883d30731f5559aadffe0c6060fdded.svg"},27012:function(e,t,n){e.exports=n.p+"static/v4.5.8/2/2d3631eea81b504e3ca2e46131a4de33.svg"},18532:function(e,t,n){e.exports=n.p+"static/v4.5.8/8/825f4dbdd091e72c803ff3a24ca58c26.svg"},36059:function(e,t,n){e.exports=n.p+"static/v4.5.8/3/3dc326b9951c0e3485bffd9c9e9f5ff4.svg"},67833:function(e,t,n){e.exports=n.p+"static/v4.5.8/7/7b88c8548030ad777e7124d7314343be.svg"},39780:function(e,t,n){e.exports=n.p+"static/v4.5.8/e/e018f881345b8043e52ad61597ff9831.svg"},7380:function(e,t,n){e.exports=n.p+"static/v4.5.8/f/f79c5e7078377f5455743e7586f4d130.svg"},90858:function(e,t,n){e.exports=n.p+"static/v4.5.8/7/746c91f8bf5496f5fb01ad104a2c313d.svg"},5082:function(e,t,n){e.exports=n.p+"static/v4.5.8/8/8c9954122d8006592fbcbd4a82ac994c.svg"},3816:function(e,t,n){e.exports=n.p+"static/v4.5.8/5/5beb0e2625ca3a1a7c57befd5359c68d.svg"},48310:function(e,t,n){e.exports=n.p+"static/v4.5.8/f/fc823715dd8dd7b269a5526f8651d058.svg"},44714:function(e,t,n){e.exports=n.p+"static/v4.5.8/3/3c095ddaf674a5a6f52c2cb06f7c505e.svg"},43022:function(e,t,n){e.exports=n.p+"static/v4.5.8/0/0637686059963759d9edbc7ae67b5ec3.svg"},63154:function(e,t,n){e.exports=n.p+"static/v4.5.8/6/64bed5f5f2672a8665a13ee7218011a9.svg"},1753:function(e,t,n){e.exports=n.p+"static/v4.5.8/3/350daed5305a7d6c7ffa9c66f20ea2b5.svg"},8499:function(e,t,n){e.exports=n.p+"static/v4.5.8/4/43217640a8928e7daebe11d305c2494a.svg"},61649:function(e,t,n){e.exports=n.p+"static/v4.5.8/e/e676ec2c54d3d081691ff29b7fb9a97e.svg"},83753:function(e,t,n){e.exports=n.p+"static/v4.5.8/7/7a4f3d4c2b05a367743ebe8bcfc062d0.svg"},38361:function(e,t,n){e.exports=n.p+"static/v4.5.8/b/b5ba7b36551c2499565d55c265f5f9e7.svg"},19204:function(e,t,n){e.exports=n.p+"static/v4.5.8/e/e807cdb83ebd6fe9329c0e3ad4764265.svg"},4895:function(e,t,n){e.exports=n.p+"static/v4.5.8/6/65e5f4ece2f7d0caaa4d5b07e5537879.svg"},62020:function(e,t,n){e.exports=n.p+"static/v4.5.8/a/a0f42a41827286fe72829d3bf246e016.svg"},53990:function(e,t,n){e.exports=n.p+"static/v4.5.8/a/ab24015021953d26fba1b97a32464c8e.svg"},45957:function(e,t,n){e.exports=n.p+"static/v4.5.8/1/1098e66ac2e18f11aeaa97fd574e0bb7.svg"},14355:function(e,t,n){e.exports=n.p+"static/v4.5.8/6/6011bd830e65c8afc843fb4d4883b8e8.svg"},65750:function(e,t,n){e.exports=n.p+"static/v4.5.8/a/a9abbf24fe14b8bfe82843def6a38d4b.svg"},58185:function(e,t,n){e.exports=n.p+"static/v4.5.8/d/d72faf61f6e354339d9f497d0bdd59fb.svg"},80851:function(e,t,n){e.exports=n.p+"static/v4.5.8/e/ede399895b33680b26ab7f59fccc721f.svg"},91973:function(e,t,n){e.exports=n.p+"static/v4.5.8/c/c00ab1f427ddf2519a3e080d9d9c1436.svg"},3611:function(e,t,n){e.exports=n.p+"static/v4.5.8/a/aa070231d1755863e9ed00c3437325ba.svg"},43269:function(e,t,n){e.exports=n.p+"static/v4.5.8/0/018fbd32b69a44c859fdd23472e94700.svg"},63924:function(e,t,n){e.exports=n.p+"static/v4.5.8/8/8dd693f393de9e4d0dd580fcef6804d4.svg"},32553:function(e,t,n){e.exports=n.p+"static/v4.5.8/1/1ebb1019a7bb6c0c828ab9f9c5ecdef8.svg"},78425:function(e,t,n){e.exports=n.p+"static/v4.5.8/8/83d8a121ba3a559d4d4db8247221e7e8.svg"},25189:function(e,t,n){e.exports=n.p+"static/v4.5.8/9/980d3e585f45b396cae1ff47b9980340.svg"},74453:function(e,t,n){e.exports=n.p+"static/v4.5.8/0/0fca77ea1b1bb0651726d0fc5fd4a1fa.svg"},20706:function(e,t,n){e.exports=n.p+"static/v4.5.8/a/a0ea1f3ddc5a4aa6684537cf16ca83cc.svg"},77034:function(e,t,n){e.exports=n.p+"static/v4.5.8/8/8c4f804d7aa8570718a2307739656da1.svg"},70541:function(e,t,n){e.exports=n.p+"static/v4.5.8/6/6aa2fd01a9460e1a71bb0efb713f0212.svg"},34343:function(e,t,n){e.exports=n.p+"static/v4.5.8/6/6ebb37966d6e00251e5d63bedffb231f.svg"},4486:function(e,t,n){e.exports=n.p+"static/v4.5.8/2/2bc01b084afec43c093794a293b146d3.svg"},9797:function(e,t,n){e.exports=n.p+"static/v4.5.8/a/a1499965ef30506d8df751cd6e62b0ff.svg"},40215:function(e,t,n){e.exports=n.p+"static/v4.5.8/3/3de2bccd750fe7e9a102505064b03a37.svg"},27532:function(e,t,n){e.exports=n.p+"static/v4.5.8/c/c9ebc4ee89c711ae4f797e39e0c13e81.svg"},34082:function(e,t,n){e.exports=n.p+"static/v4.5.8/8/8cec58721410d02b594f877b8abe9503.svg"},1281:function(e,t){"use strict";t.getDates=function(e,t,n){void 0===n&&(n="sun");var r="sun"===n?0:1,i=new Date(Number(e),t,1),s=new Date(Number(e),t+1,0),o=Array((i.getDay()-r+7)%7).fill(null),a=Array(s.getDate()).fill(null).map(function(n,r){return new Date(Number(e),t,r+1)});return o.concat(a)},t.getDays=function(e,t,n){void 0===e&&(e="en-US"),void 0===t&&(t="short"),void 0===n&&(n="sun");var r=[new Date(1995,2,26),new Date(1995,2,27),new Date(1995,2,28),new Date(1995,2,29),new Date(1995,2,30),new Date(1995,2,31),new Date(1995,3,1),new Date(1995,3,2)];return(r="mon"===n?r.slice(1,8):r.slice(0,7)).map(function(n){return n.toLocaleString(e,{weekday:t})})},t.getMonths=function(e,t){return void 0===e&&(e="en-US"),void 0===t&&(t="long"),Array(12).fill(null).map(function(n,r){return new Date(1995,r,1).toLocaleString(e,{month:t})})}},97593:function(e,t,n){"use strict";e.exports=n(1281)},27792:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r,i=n(72664),s=n(32735),o=n(87904),a=n(6907),u=n(87181),c=n(2403),l=n(5006),d=n(90392),h=n(45332),f=n(26742),p=n(74512);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e){var t,n,r=e.title,i=void 0===r?"":r,a=e.message,_=e.actionType,m=void 0===_?"text":_,b=e.actionText,E=e.actionIconUrl,I=void 0===E?"":E,T=e.variant,S=void 0===T?h.c.POSITIVE:T,w=e.type,C=e.style,N=e.actionOnPress;(0,s.useEffect)(function(){w&&console.warn('Using "type" props at Snackbar V2 will be deprecated. Please use "variant" props instead')},[]);var k=y[h.w[w]||h.c[S]],A=null!==(n=null===(t=k.actionText)||void 0===t?void 0:t.color)&&void 0!==n?n:g.actionText.color,O="text"===m?c.Z:c.Z.Icon;return(0,p.jsxs)(o.Z,{style:[g.container,k.container,void 0===C?{}:C],children:[!!i&&(0,p.jsx)(l.Z,{style:[g.title,k.title],numberOfLines:2,children:i}),(0,p.jsx)(l.Z,{style:[g.message,k.message],children:void 0===a?"":a}),(0,p.jsx)(o.Z,{style:g.actionContainer,children:(0,p.jsx)(O,{onPress:N,buttonStyle:v(v({},u.Z.style.buttonText),{},{textColors:{disabled:A,pressed:A,active:A}}),text:"text"===m?void 0===b?"Close":b:null,Icon:"icon"===m?function(){return I?(0,p.jsx)(d.Z,{source:{uri:I},style:{width:24,height:24,tintColor:A}}):(0,p.jsx)(f.Z,{width:24,height:24,accentColor:A})}:void 0})})]})}var g=a.Z.create({container:v(v({margin:u.Z.spacing.xxs,borderRadius:u.Z.border.radius.default},u.Z.elevation.hover),{},{paddingHorizontal:u.Z.spacing.s,paddingTop:u.Z.spacing.s,paddingBottom:u.Z.spacing.xxs}),title:v(v({color:u.Z.color.uiLightSecondary,paddingBottom:u.Z.spacing.xxs},u.Z.typography.uiTiny),u.Z.typography.weightBold),message:v({color:u.Z.color.uiLightPrimary},u.Z.typography.uiSmall),actionText:{color:u.Z.color.uiLightPrimary},actionIconUrl:{width:24,height:24,marginLeft:u.Z.spacing.l},actionContainer:{alignItems:"flex-end",justifyContent:"flex-end"}}),y=(r={},(0,i.Z)(r,h.c.POSITIVE,{container:{backgroundColor:u.Z.color.uiGreenSecondary},title:{opacity:.75,color:u.Z.color.uiLightPrimary},actionText:{color:u.Z.color.uiLightNeutral}}),(0,i.Z)(r,h.c.SUBTLE_POSITIVE,{container:{backgroundColor:u.Z.color.uiGreenLight},title:{color:u.Z.color.uiGreenDark},message:{color:u.Z.color.uiGreenDark},actionText:{color:u.Z.color.uiDarkNeutral}}),(0,i.Z)(r,h.c.ALERT,{container:{backgroundColor:u.Z.color.uiRedSecondary},title:{color:u.Z.color.uiLightPrimary,opacity:.75},actionText:{color:u.Z.color.uiLightNeutral}}),(0,i.Z)(r,h.c.SUBTLE_ALERT,{container:{backgroundColor:u.Z.color.uiRedLight},title:{color:u.Z.color.uiRedDark},message:{color:u.Z.color.uiRedDark},actionText:{color:u.Z.color.uiDarkNeutral}}),(0,i.Z)(r,h.c.WARNING,{container:{backgroundColor:u.Z.color.uiYellowPrimary},title:{color:u.Z.opacity.obscure(u.Z.color.uiDarkPrimary)},message:{color:u.Z.color.textPrimary},actionText:{color:u.Z.color.uiDarkNeutral}}),(0,i.Z)(r,h.c.SUBTLE_WARNING,{container:{backgroundColor:u.Z.color.uiYellowLight},title:{color:u.Z.color.uiYellowDark},message:{color:u.Z.color.uiYellowDark},actionText:{color:u.Z.color.uiDarkNeutral}}),(0,i.Z)(r,h.c.NEUTRAL_LIGHT,{container:{backgroundColor:u.Z.color.uiLightStain},title:{color:u.Z.color.uiDarkSecondary},message:{color:u.Z.color.uiDarkPrimary},actionText:{color:u.Z.color.uiBluePrimary}}),(0,i.Z)(r,h.w.SUCCESS,{container:{backgroundColor:u.Z.color.uiGreenSecondary,borderColor:u.Z.color.uiGreenDark},actionText:{color:u.Z.color.uiLightPrimary}}),(0,i.Z)(r,h.w.SUBTLE_SUCCESS,{container:{backgroundColor:u.Z.color.uiGreenLight,borderColor:u.Z.color.uiGreenPrimary},message:{color:u.Z.color.uiGreenDark},actionText:{color:u.Z.color.uiDarkNeutral}}),(0,i.Z)(r,h.w.ERROR,{container:{backgroundColor:u.Z.color.uiRedSecondary,borderColor:u.Z.color.uiRedDark},actionText:{color:u.Z.color.uiLightPrimary}}),(0,i.Z)(r,h.w.SUBTLE_ERROR,{container:{backgroundColor:u.Z.color.uiRedLight,borderColor:u.Z.color.uiRedPrimary},message:{color:u.Z.color.uiRedDark},actionText:{color:u.Z.color.uiDarkNeutral}}),r)},45332:function(e,t,n){"use strict";var r,i,s,o;n.d(t,{c:function(){return r},w:function(){return i}}),(s=r||(r={})).POSITIVE="POSITIVE",s.SUBTLE_POSITIVE="SUBTLE_POSITIVE",s.ALERT="ALERT",s.SUBTLE_ALERT="SUBTLE_ALERT",s.WARNING="WARNING",s.SUBTLE_WARNING="SUBTLE_WARNING",s.NEUTRAL_LIGHT="NEUTRAL_LIGHT",(o=i||(i={})).SUCCESS="SUCCESS",o.SUBTLE_SUCCESS="SUBTLE_SUCCESS",o.ERROR="ERROR",o.SUBTLE_ERROR="SUBTLE_ERROR"},94614:function(e,t,n){"use strict";n(32735);var r=n(74512);t.Z=function(e){var t=e.accentColor,n=void 0===t?"#0194F3":t,i=e.color,s=e.width,o=e.height,a=e.title,u=e.titleId;return(0,r.jsxs)("svg",{width:void 0===s?24:s,height:void 0===o?24:o,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-id":"IcContactMessageCs","aria-labelledby":u,children:[a?(0,r.jsx)("title",{id:u,children:a}):null,(0,r.jsx)("path",{d:"M6 16.5V16.5C4.34315 16.5 3 15.1569 3 13.5V7.5C3 5.567 4.567 4 6.5 4H17.5C19.433 4 21 5.567 21 7.5V12.5C21 14.433 19.433 16 17.5 16H16V21L13.5 19.5M6 16.5V16.5C6 15.6716 6.67157 15 7.5 15H9.5C10.3284 15 11 15.6716 11 16.5V16.5C11 17.3284 10.3284 18 9.5 18H7.5C6.67157 18 6 17.3284 6 16.5V16.5Z",stroke:void 0===i?"#687176":i,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M11.8901 10.8335C11.8696 11.2788 11.7495 11.6729 11.5298 12.0156C11.3101 12.3555 11.001 12.6191 10.6025 12.8066C10.207 12.9941 9.75439 13.0879 9.24463 13.0879C8.40381 13.0879 7.7417 12.814 7.2583 12.2661C6.7749 11.7183 6.5332 10.9448 6.5332 9.9458V9.62939C6.5332 9.00244 6.6416 8.45459 6.8584 7.98584C7.07812 7.51416 7.39307 7.15088 7.80322 6.896C8.21338 6.63818 8.68799 6.50928 9.22705 6.50928C10.0034 6.50928 10.6274 6.71436 11.0991 7.12451C11.5708 7.53174 11.8389 8.09424 11.9033 8.81201H10.3652C10.3535 8.42236 10.2554 8.14258 10.0708 7.97266C9.88623 7.80273 9.60498 7.71777 9.22705 7.71777C8.84326 7.71777 8.56201 7.86133 8.3833 8.14844C8.20459 8.43555 8.11084 8.89404 8.10205 9.52393V9.97656C8.10205 10.6592 8.18701 11.147 8.35693 11.4399C8.52979 11.7329 8.82568 11.8794 9.24463 11.8794C9.59912 11.8794 9.87012 11.7959 10.0576 11.6289C10.2451 11.4619 10.3447 11.1968 10.3564 10.8335H11.8901Z",fill:n}),(0,r.jsx)("path",{d:"M15.9199 11.2993C15.9199 11.0737 15.8394 10.8979 15.6782 10.772C15.52 10.646 15.2402 10.5156 14.8389 10.3809C14.4375 10.2461 14.1094 10.1157 13.8545 9.98975C13.0254 9.58252 12.6108 9.02295 12.6108 8.31104C12.6108 7.95654 12.7134 7.64453 12.9185 7.375C13.1265 7.10254 13.4194 6.8916 13.7974 6.74219C14.1753 6.58984 14.6001 6.51367 15.0718 6.51367C15.5317 6.51367 15.9434 6.5957 16.3066 6.75977C16.6729 6.92383 16.957 7.1582 17.1592 7.46289C17.3613 7.76465 17.4624 8.11035 17.4624 8.5H15.9243C15.9243 8.23926 15.8438 8.03711 15.6826 7.89355C15.5244 7.75 15.3091 7.67822 15.0366 7.67822C14.7612 7.67822 14.543 7.73975 14.3818 7.86279C14.2236 7.98291 14.1445 8.13672 14.1445 8.32422C14.1445 8.48828 14.2324 8.6377 14.4082 8.77246C14.584 8.9043 14.8931 9.04199 15.3354 9.18555C15.7778 9.32617 16.1411 9.47852 16.4253 9.64258C17.1167 10.041 17.4624 10.5903 17.4624 11.2905C17.4624 11.8501 17.2515 12.2896 16.8296 12.6089C16.4077 12.9282 15.8291 13.0879 15.0938 13.0879C14.5752 13.0879 14.105 12.9956 13.6831 12.811C13.2642 12.6235 12.9478 12.3687 12.7339 12.0464C12.5229 11.7212 12.4175 11.3477 12.4175 10.9258H13.9644C13.9644 11.2686 14.0522 11.522 14.228 11.686C14.4067 11.8472 14.6953 11.9277 15.0938 11.9277C15.3486 11.9277 15.5493 11.8735 15.6958 11.7651C15.8452 11.6538 15.9199 11.4985 15.9199 11.2993Z",fill:n})]})}},53891:function(e,t,n){"use strict";n(32735);var r=n(74512);t.Z=function(e){e.accentColor,e.color;var t=e.width,n=e.height,i=e.title,s=e.titleId;return(0,r.jsxs)("svg",{width:void 0===t?24:t,height:void 0===n?24:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-id":"IcFlagRectangleEu","aria-labelledby":s,children:[i?(0,r.jsx)("title",{id:s,children:i}):null,(0,r.jsx)("rect",{x:.75,y:3.75,width:22.5,height:16.5,rx:1.25,fill:"#003399",stroke:"#C1C4C6",strokeWidth:.5}),(0,r.jsx)("path",{d:"M12 6.5L12.2826 7.15758L12.9899 7.22557L12.4573 7.69996L12.6118 8.39956L12 8.03517L11.3882 8.39956L11.5427 7.69996L11.0101 7.22557L11.7174 7.15758L12 6.5Z",fill:"#FFDC00"}),(0,r.jsx)("path",{d:"M12 15.6004L12.2826 16.258L12.9899 16.326L12.4573 16.8004L12.6118 17.5L12 17.1356L11.3882 17.5L11.5427 16.8004L11.0101 16.326L11.7174 16.258L12 15.6004Z",fill:"#FFDC00"}),(0,r.jsx)("path",{d:"M7.48986 11.0502L7.7725 11.7078L8.47972 11.7758L7.94718 12.2502L8.10163 12.9498L7.48986 12.5854L6.87809 12.9498L7.03255 12.2502L6.5 11.7758L7.20722 11.7078L7.48986 11.0502Z",fill:"#FFDC00"}),(0,r.jsx)("path",{d:"M16.5101 11.0502L16.7928 11.7078L17.5 11.7758L16.9675 12.2502L17.1219 12.9498L16.5101 12.5854L15.8984 12.9498L16.0528 12.2502L15.5203 11.7758L16.2275 11.7078L16.5101 11.0502Z",fill:"#FFDC00"}),(0,r.jsx)("path",{d:"M8.18373 13.3253L8.46637 13.9829L9.17359 14.0509L8.64104 14.5253L8.7955 15.2249L8.18373 14.8605L7.57196 15.2249L7.72641 14.5253L7.19387 14.0509L7.90109 13.9829L8.18373 13.3253Z",fill:"#FFDC00"}),(0,r.jsx)("path",{d:"M9.74493 14.9004L10.0276 15.558L10.7348 15.626L10.2022 16.1004L10.3567 16.8L9.74493 16.4356L9.13316 16.8L9.28761 16.1004L8.75507 15.626L9.46229 15.558L9.74493 14.9004Z",fill:"#FFDC00"}),(0,r.jsx)("path",{d:"M8.18373 8.77511L8.46637 9.43269L9.17359 9.50068L8.64104 9.97507L8.7955 10.6747L8.18373 10.3103L7.57196 10.6747L7.72641 9.97507L7.19387 9.50068L7.90109 9.43269L8.18373 8.77511Z",fill:"#FFDC00"}),(0,r.jsx)("path",{d:"M9.74493 7.20003L10.0276 7.85761L10.7348 7.9256L10.2022 8.4L10.3567 9.09959L9.74493 8.73521L9.13316 9.09959L9.28761 8.4L8.75507 7.9256L9.46229 7.85761L9.74493 7.20003Z",fill:"#FFDC00"}),(0,r.jsx)("path",{d:"M15.8163 8.77511L16.0989 9.43269L16.8061 9.50068L16.2736 9.97507L16.428 10.6747L15.8163 10.3103L15.2045 10.6747L15.359 9.97507L14.8264 9.50068L15.5336 9.43269L15.8163 8.77511Z",fill:"#FFDC00"}),(0,r.jsx)("path",{d:"M14.2551 7.20003L14.5377 7.85761L15.2449 7.9256L14.7124 8.4L14.8668 9.09959L14.2551 8.73521L13.6433 9.09959L13.7978 8.4L13.2652 7.9256L13.9724 7.85761L14.2551 7.20003Z",fill:"#FFDC00"}),(0,r.jsx)("path",{d:"M15.8163 13.3253L16.0989 13.9829L16.8061 14.0509L16.2736 14.5253L16.428 15.2249L15.8163 14.8605L15.2045 15.2249L15.359 14.5253L14.8264 14.0509L15.5336 13.9829L15.8163 13.3253Z",fill:"#FFDC00"}),(0,r.jsx)("path",{d:"M14.2551 14.9004L14.5377 15.558L15.2449 15.626L14.7124 16.1004L14.8668 16.8L14.2551 16.4356L13.6433 16.8L13.7978 16.1004L13.2652 15.626L13.9724 15.558L14.2551 14.9004Z",fill:"#FFDC00"})]})}},52004:function(e,t,n){"use strict";n(32735);var r=n(74512);t.Z=function(e){e.accentColor,e.color;var t=e.width,n=e.height,i=e.title,s=e.titleId;return(0,r.jsxs)("svg",{width:void 0===t?24:t,height:void 0===n?24:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-id":"IcFlagRectangleGlobal","aria-labelledby":s,children:[i?(0,r.jsx)("title",{id:s,children:i}):null,(0,r.jsx)("rect",{x:1,y:4,width:22,height:16,rx:1,fill:"#0A9AF2"}),(0,r.jsx)("path",{d:"M17.7193 12.2517C17.7022 15.2885 15.2266 17.7364 12.1898 17.7193M17.7193 12.2517C17.7364 9.215 15.2885 6.73937 12.2517 6.72228M17.7193 12.2517L6.72228 12.1899M12.1898 17.7193C9.1531 17.7022 6.70519 15.2266 6.72228 12.1899M12.1898 17.7193L12.2517 6.72228M12.1898 17.7193C16.1282 15.1256 16.1606 9.36011 12.2517 6.72228M12.1898 17.7193C8.28094 15.0815 8.31339 9.31595 12.2517 6.72228M6.72228 12.1899C6.73937 9.15311 9.21499 6.70519 12.2517 6.72228",stroke:"white",strokeWidth:1.1,strokeLinecap:"round",strokeLinejoin:"round"})]})}},97369:function(e,t,n){"use strict";n.r(t),n(32735);var r=n(74512);t.default=function(e){e.accentColor;var t=e.color,n=e.width,i=e.height,s=e.title,o=e.titleId;return(0,r.jsxs)("svg",{width:void 0===n?24:n,height:void 0===i?24:i,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-id":"IcSystemChevronDown","aria-labelledby":o,children:[s?(0,r.jsx)("title",{id:o,children:s}):null,(0,r.jsx)("path",{d:"M6 9L12 15L18 9",stroke:void 0===t?"#687176":t,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})]})}},65352:function(e,t,n){"use strict";n(32735);var r=n(74512);t.Z=function(e){var t=e.accentColor,n=e.color,i=e.width,s=e.height,o=e.title,a=e.titleId;return(0,r.jsxs)("svg",{width:void 0===i?24:i,height:void 0===s?24:s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-id":"IcSystemHelp","aria-labelledby":a,children:[o?(0,r.jsx)("title",{id:a,children:o}):null,(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:void 0===n?"#687176":n,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M10 7.5L10.9411 7.02945C11.6077 6.69616 12.3923 6.69616 13.0589 7.02945L13.367 7.18348C14.3311 7.66556 14.8533 8.7333 14.6419 9.79033V9.79033C14.5494 10.2531 14.3219 10.6781 13.9882 11.0118L12.8442 12.1558C12.6162 12.3838 12.4265 12.6471 12.2823 12.9355L12.2111 13.0777C12.0723 13.3555 12 13.6617 12 13.9722V14M11.75 16.75H12.25V17.25H11.75V16.75Z",stroke:void 0===t?"#0194F3":t,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})]})}},82729:function(e,t,n){"use strict";n(32735);var r=n(74512);t.Z=function(e){e.accentColor;var t=e.color,n=void 0===t?"#687176":t,i=e.width,s=e.height,o=e.title,a=e.titleId;return(0,r.jsxs)("svg",{width:void 0===i?24:i,height:void 0===s?24:s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-id":"IcSystemUserAccountFill","aria-labelledby":a,children:[o?(0,r.jsx)("title",{id:a,children:o}):null,(0,r.jsx)("path",{d:"M3.44954 20.6443C3.3058 21.3665 3.88623 22 4.62267 22H19.3773C20.1138 22 20.6942 21.3665 20.5505 20.6443C19.9516 17.635 17.9884 13 12 13C6.01165 13 4.04844 17.635 3.44954 20.6443Z",fill:n}),(0,r.jsx)("path",{d:"M7 7.5C7 10.2614 9.23858 12.5 12 12.5C14.7614 12.5 17 10.2614 17 7.5V6.5C17 3.73858 14.7614 1.5 12 1.5C9.23858 1.5 7 3.73858 7 6.5V7.5Z",fill:n})]})}},1879:function(e,t,n){"use strict";n(32735);var r=n(74512);t.Z=function(e){var t=e.accentColor,n=e.color,i=e.width,s=e.height,o=e.title,a=e.titleId;return(0,r.jsxs)("svg",{width:void 0===i?24:i,height:void 0===s?24:s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-id":"IcUserMailbox","aria-labelledby":a,children:[o?(0,r.jsx)("title",{id:a,children:o}):null,(0,r.jsx)("path",{d:"M14 16V21H17V16M14 16H17M14 16H11M17 16H21V7C21 4.79086 19.2091 3 17 3H7M11 16H3V13M11 16V13M7 3V3C4.79086 3 3 4.79086 3 7V13M7 3C7 3 11 3 11 7V13M3 13H11",stroke:void 0===n?"#687176":n,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M14 8H18V9",stroke:void 0===t?"#0194F3":t,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})]})}},18998:function(e,t,n){"use strict";n.d(t,{$:function(){return L},A:function(){return v},B:function(){return q},C:function(){return ed},D:function(){return ey},E:function(){return x},F:function(){return nc},G:function(){return C},H:function(){return eb},I:function(){return e1},J:function(){return es},K:function(){return h},L:function(){return nS},M:function(){return n_},N:function(){return eI},O:function(){return eO},P:function(){return ns},Q:function(){return eA},R:function(){return em},S:function(){return g},T:function(){return w},U:function(){return tE},V:function(){return tP},W:function(){return $},X:function(){return nB},Y:function(){return l},Z:function(){return d},_:function(){return s},a:function(){return eL},a$:function(){return tq},a0:function(){return O},a1:function(){return f},a2:function(){return e$},a3:function(){return Z},a4:function(){return nz},a5:function(){return tm},a6:function(){return eG},a7:function(){return ea},a8:function(){return tI},a9:function(){return tT},aA:function(){return e6},aB:function(){return nm},aC:function(){return ng},aD:function(){return ny},aE:function(){return nb},aF:function(){return eu},aG:function(){return t0},aH:function(){return k},aI:function(){return tG},aJ:function(){return eB},aK:function(){return nA},aL:function(){return nk},aM:function(){return nC},aN:function(){return nw},aO:function(){return ew},aP:function(){return eS},aQ:function(){return eR},aR:function(){return tB},aS:function(){return nt},aT:function(){return tv},aU:function(){return nh},aV:function(){return ne},aW:function(){return X},aX:function(){return nu},aY:function(){return nT},aZ:function(){return eV},a_:function(){return na},aa:function(){return A},ab:function(){return D},ac:function(){return nY},af:function(){return eh},ah:function(){return ev},ai:function(){return tz},aj:function(){return eg},ak:function(){return tZ},al:function(){return e3},am:function(){return ek},an:function(){return ee},ao:function(){return e5},ap:function(){return e7},aq:function(){return tQ},ar:function(){return e_},as:function(){return t4},at:function(){return E},au:function(){return nW},av:function(){return t1},aw:function(){return eq},ax:function(){return m},ay:function(){return nF},az:function(){return e8},b:function(){return B},b0:function(){return tj},b1:function(){return t7},b2:function(){return nV},c:function(){return Q},d:function(){return ni},e:function(){return F},f:function(){return nn},g:function(){return e4},h:function(){return T},i:function(){return I},j:function(){return a},k:function(){return u},l:function(){return o},m:function(){return nN},n:function(){return nK},o:function(){return tx},q:function(){return N},r:function(){return er},s:function(){return ep},t:function(){return ef},u:function(){return tg},v:function(){return nr},w:function(){return t2},x:function(){return no},y:function(){return nq},z:function(){return c}});var r,i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}function u(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function d(e,t,n){if(n||2==arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var h,f="4.1.5",p=function(){function e(){}return Object.defineProperty(e,"OS_VERSION",{get:function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_VERSION",{get:function(){return"4.1.5"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_MAJOR_VERSION",{get:function(){return e.SDK_VERSION.split(".")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",{get:function(){return 100},enumerable:!1,configurable:!0}),Object.defineProperty(e,"INTERNAL_CALL",{get:function(){return"ic"},enumerable:!1,configurable:!0}),e}();(_=h||(h={}))[_.INVALID_TOKEN=400111]="INVALID_TOKEN",_[_.SESSION_TOKEN_EXPIRED=400302]="SESSION_TOKEN_EXPIRED",_[_.SESSION_KEY_EXPIRED=400309]="SESSION_KEY_EXPIRED",_[_.INTERNAL_SERVER_ERROR=500901]="INTERNAL_SERVER_ERROR",_[_.RATE_LIMIT_EXCEEDED=500910]="RATE_LIMIT_EXCEEDED",_[_.UNKNOWN_SERVER_ERROR=900200]="UNKNOWN_SERVER_ERROR",_[_.DEBUG_MODE_REQUIRED=7e5]="DEBUG_MODE_REQUIRED",_[_.LOST_INSTANCE=700100]="LOST_INSTANCE",_[_.CONNECTION_RENEW=700102]="CONNECTION_RENEW",_[_.INVALID_CONNECTION_STATE_TRANSITION=700200]="INVALID_CONNECTION_STATE_TRANSITION",_[_.INVALID_INITIALIZATION=800100]="INVALID_INITIALIZATION",_[_.CONNECTION_REQUIRED=800101]="CONNECTION_REQUIRED",_[_.CONNECTION_CANCELED=800102]="CONNECTION_CANCELED",_[_.INVALID_PARAMETER=800110]="INVALID_PARAMETER",_[_.NOT_SUPPORTED_ERROR=800111]="NOT_SUPPORTED_ERROR",_[_.NETWORK_ERROR=800120]="NETWORK_ERROR",_[_.NETWORK_ROUTING_ERROR=800121]="NETWORK_ROUTING_ERROR",_[_.MALFORMED_DATA=800130]="MALFORMED_DATA",_[_.MALFORMED_ERROR_DATA=800140]="MALFORMED_ERROR_DATA",_[_.WRONG_CHANNEL_TYPE=800150]="WRONG_CHANNEL_TYPE",_[_.MARK_AS_READ_RATE_LIMIT_EXCEEDED=800160]="MARK_AS_READ_RATE_LIMIT_EXCEEDED",_[_.QUERY_IN_PROGRESS=800170]="QUERY_IN_PROGRESS",_[_.ACK_TIMEOUT=800180]="ACK_TIMEOUT",_[_.LOGIN_TIMEOUT=800190]="LOGIN_TIMEOUT",_[_.WEBSOCKET_CONNECTION_CLOSED=800200]="WEBSOCKET_CONNECTION_CLOSED",_[_.WEBSOCKET_CONNECTION_FAILED=800210]="WEBSOCKET_CONNECTION_FAILED",_[_.REQUEST_FAILED=800220]="REQUEST_FAILED",_[_.FILE_UPLOAD_CANCEL_FAILED=800230]="FILE_UPLOAD_CANCEL_FAILED",_[_.REQUEST_CANCELED=800240]="REQUEST_CANCELED",_[_.REQUEST_DUPLICATED=800250]="REQUEST_DUPLICATED",_[_.FILE_SIZE_LIMIT_EXCEEDED=800260]="FILE_SIZE_LIMIT_EXCEEDED",_[_.SESSION_TOKEN_REQUEST_FAILED=800500]="SESSION_TOKEN_REQUEST_FAILED",_[_.SESSION_TOKEN_REFRESHED=800501]="SESSION_TOKEN_REFRESHED",_[_.SESSION_TOKEN_REFRESH_FAILED=800502]="SESSION_TOKEN_REFRESH_FAILED";var _,v,m=function(e){return!(e instanceof g&&!e.shouldThrowOutside)},g=function(e){function t(n){var r=n.code,i=n.message,s=e.call(this,i)||this;return s.shouldThrowOutside=!1,s.name="SendbirdError",s.code=void 0===r?0:r,Object.setPrototypeOf(s,t.prototype),s}return s(t,e),Object.defineProperty(t.prototype,"isInvalidTokenError",{get:function(){return this.code===h.INVALID_TOKEN},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionTokenExpiredError",{get:function(){return this.code===h.SESSION_TOKEN_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionKeyExpiredError",{get:function(){return this.code===h.SESSION_KEY_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(t,"debugModeRequired",{get:function(){return new t({code:h.DEBUG_MODE_REQUIRED,message:"Cannot run this operation in production mode."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"lostInstance",{get:function(){return new t({code:h.LOST_INSTANCE,message:"Instance ID is missing. It should belong to an instance."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"connectionRenew",{get:function(){return new t({code:h.CONNECTION_RENEW,message:"Connection restarts."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"invalidConnectionStateTransition",{get:function(){return new t({code:h.INVALID_CONNECTION_STATE_TRANSITION,message:"Invalid connection state transition."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"connectionRequired",{get:function(){return new t({code:h.CONNECTION_REQUIRED,message:"Connection is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"connectionCanceled",{get:function(){return new t({code:h.CONNECTION_CANCELED,message:"Connection is canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"invalidParameters",{get:function(){return new t({code:h.INVALID_PARAMETER,message:"Invalid parameters."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"notSupportedError",{get:function(){return new t({code:h.NOT_SUPPORTED_ERROR,message:"Given parameters are not supported."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"networkError",{get:function(){return new t({code:h.NETWORK_ERROR,message:"There was a network error."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"markAsReadAllRateLimitExceeded",{get:function(){return new t({code:h.MARK_AS_READ_RATE_LIMIT_EXCEEDED,message:"markAsRead rate limit exceeded."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"queryInProgress",{get:function(){return new t({code:h.QUERY_IN_PROGRESS,message:"Query in progress."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"noAckTimeout",{get:function(){return new t({code:h.ACK_TIMEOUT,message:"Command received no ack."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"loginTimeout",{get:function(){return new t({code:h.LOGIN_TIMEOUT,message:"Connection timeout."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"connectionClosed",{get:function(){return new t({code:h.WEBSOCKET_CONNECTION_CLOSED,message:"Connection is closed. Please reconnect."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"requestFailed",{get:function(){return new t({code:h.REQUEST_FAILED,message:"Request failed."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"fileUploadCanceled",{get:function(){return new t({code:h.FILE_UPLOAD_CANCEL_FAILED,message:"File upload has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"requestCanceled",{get:function(){return new t({code:h.REQUEST_CANCELED,message:"Request has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"sessionTokenRefreshFailed",{get:function(){return new t({code:h.SESSION_TOKEN_REFRESH_FAILED,message:"Failed to refresh the session key."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"sessionTokenRequestFailed",{get:function(){return new t({code:h.SESSION_TOKEN_REQUEST_FAILED,message:"Failed to get the session token."})},enumerable:!1,configurable:!0}),t.prototype.throwOutside=function(){throw this.shouldThrowOutside=!0,this},t}(Error),y=[h.CONNECTION_REQUIRED,h.NETWORK_ERROR,h.ACK_TIMEOUT,h.WEBSOCKET_CONNECTION_CLOSED,h.WEBSOCKET_CONNECTION_FAILED,h.FILE_UPLOAD_CANCEL_FAILED,h.REQUEST_CANCELED,h.INTERNAL_SERVER_ERROR,h.RATE_LIMIT_EXCEEDED,h.UNKNOWN_SERVER_ERROR],b=[h.WEBSOCKET_CONNECTION_CLOSED,h.WEBSOCKET_CONNECTION_FAILED,h.CONNECTION_REQUIRED],E=function(e,t){if(e!==t){var n=o({},e),r=o({},t);return(!n.hasOwnProperty("messageId")||!r.hasOwnProperty("messageId")||n.messageId===r.messageId)&&(!n.hasOwnProperty("reqId")||!r.hasOwnProperty("reqId")||n.reqId===r.reqId)&&(n.hasOwnProperty("messageId")&&delete n.messageId,n.hasOwnProperty("reqId")&&delete n.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(n)===JSON.stringify(r))}return!0},I=function(e,t,n){return void 0===n&&(n=!1),!(!n||null!=t)||("string"!=typeof e?"object"==typeof e?T(e,t):S(e,t):typeof t===e)},T=function(e,t,n){return void 0===n&&(n=!1),!(!n||null!=t)||Object.values(e).includes(t)},S=function(e,t){return t instanceof e},w=function(e,t,n){return void 0===n&&(n=!1),!(!n||null!=t)||Array.isArray(t)&&t.every(function(t){return I(e,t)})},C=function(e){return e>0&&b.indexOf(e)>=0},N=function(e,t){if(void 0===t&&(t=!1),t&&null===e)return!0;var n=I("object",e)&&null!==e&&e.hasOwnProperty("name")&&"string"==typeof e.name&&e.hasOwnProperty("uri")&&"string"==typeof e.uri&&e.hasOwnProperty("type")&&"string"==typeof e.type;if(!n){if("undefined"!=typeof Blob)return e instanceof Blob;if("undefined"!=typeof File)return e instanceof File}return n},k=function(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(var n=d([],l(e),!1).sort(),r=d([],l(t),!1).sort(),i=0;i<n.length;++i)if(n[i]!==r[i])return!1;return!0},A=function(){function e(e){var t=void 0===e?{}:e,n=t.useMemberInfoInMessage,r=t.typingIndicatorInvalidateTime,i=t.typingIndicatorThrottle,s=t.websocketResponseTimeout;this._useMemberInfoInMessage=!0,this._typingIndicatorInvalidateTime=1e4,this._typingIndicatorThrottle=1e3,this._websocketResponseTimeout=1e4,this._useMemberInfoInMessage=void 0===n||n,this._typingIndicatorInvalidateTime=void 0===r?1e4:r,this._typingIndicatorThrottle=void 0===i?1e3:i,this._websocketResponseTimeout=void 0===s?1e4:s}return Object.defineProperty(e.prototype,"useMemberInfoInMessage",{get:function(){return this._useMemberInfoInMessage},set:function(e){I("boolean",e)&&(this._useMemberInfoInMessage=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorInvalidateTime",{get:function(){return this._typingIndicatorInvalidateTime},set:function(e){I("number",e)&&(this._typingIndicatorInvalidateTime=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorThrottle",{get:function(){return this._typingIndicatorThrottle},set:function(e){I("number",e)&&e>=1e3&&e<=9e3&&(this._typingIndicatorThrottle=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocketResponseTimeout",{get:function(){return this._websocketResponseTimeout},set:function(e){I("number",e)&&e>=5e3&&e<=3e4&&(this._websocketResponseTimeout=e)},enumerable:!1,configurable:!0}),e}(),O={key:"__ev",value:{k:"__ev",v:"scs"},generation:1},L={encrypt:function(e){return e},decrypt:function(e){return e}},R=function(){function e(e){var t=e.store;this._preference=new Map,this._store=t}return e.prototype._savePreferenceKeys=function(){return a(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,this._store.set({key:this._keysAddress,value:d([],l(this._preference.keys()),!1),generation:1})];case 1:return e.sent(),[2]}})})},e.prototype.init=function(e){var t;return a(this,void 0,void 0,function(){var n,r,i,s,o,a,l;return u(this,function(u){switch(u.label){case 0:return this._keysAddress=e,[4,this._store.get(e)];case 1:n=null!==(t=u.sent())&&void 0!==t?t:[],u.label=2;case 2:u.trys.push([2,7,8,9]),i=(r=c(n)).next(),u.label=3;case 3:return i.done?[3,6]:(s=i.value,[4,this._store.get(s)]);case 4:(o=u.sent())&&this._preference.set(s,o),u.label=5;case 5:return i=r.next(),[3,3];case 6:return[3,9];case 7:return a={error:u.sent()},[3,9];case 8:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(a)throw a.error}return[7];case 9:return[2]}})})},e.prototype.get=function(e){var t;return a(this,void 0,void 0,function(){return u(this,function(n){return[2,null!==(t=this._preference.get(e))&&void 0!==t?t:null]})})},e.prototype.set=function(e,t){return a(this,void 0,void 0,function(){var n;return u(this,function(r){switch(r.label){case 0:return n=!this._preference.has(e),[4,this._store.set({key:e,value:t,generation:1})];case 1:return r.sent(),this._preference.set(e,t),n?[4,this._savePreferenceKeys()]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.remove=function(e){return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,this._store.remove(e)];case 1:return t.sent(),this._preference.delete(e),[4,this._savePreferenceKeys()];case 2:return t.sent(),[2]}})})},e.prototype.clear=function(){return a(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,this._store.removeMany(d([],l(this._preference.keys()),!1))];case 1:return e.sent(),this._preference.clear(),[4,this._savePreferenceKeys()];case 2:return e.sent(),[2]}})})},e}(),M=function(e){var t=e.encryption,n=void 0===t?null:t,r=e.store,i=void 0===r?null:r,s=e.localCacheEnabled;this.nestdb=null,this.store=i,this.preference=new R({store:i}),this.encryption=null!=n?n:L,this.localCacheEnabled=void 0===s||s},U=function(){function e(){this.sessionKey=null,this.authToken=null}return Object.defineProperty(e.prototype,"hasSession",{get:function(){return!!this.sessionKey},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this.authToken=null,this.sessionKey=null},e}(),D=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})},P=function(){function e(e){var t=e.container;this._container={},this._container=t,this.key=D()}return e.prototype._register=function(e,t,n){return e in this._container||(this._container[e]=new Map),this._container[e].set(this.key,{occurence:t,handler:n}),this},e.prototype.on=function(e,t){return this._register(e,-1,t)},e.prototype.once=function(e,t){return this._register(e,1,t)},e.prototype.close=function(){for(var e in this._container)this._container[e].delete(this.key)},e}(),x=function(){function e(){this._container={}}return e.prototype.on=function(e,t){return new P({container:this._container}).on(e,t)},e.prototype.once=function(e,t){return new P({container:this._container}).once(e,t)},e.prototype.dispatch=function(e,t){var n,r,i=this._container[e];if(i){var s=[];try{for(var o=c(i.keys()),a=o.next();!a.done;a=o.next()){var u=a.value,l=i.get(u);l.handler(t),l.occurence>0&&(l.occurence--,0===l.occurence&&s.push(u))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}s.forEach(function(e){return i.delete(e)})}},e}(),j=function(){function e(){this._dispatcher=new x}return e.prototype.on=function(e){return this._dispatcher.on("event",e)},e.prototype.once=function(e){return this._dispatcher.once("event",e)},e.prototype.dispatch=function(e){this._dispatcher.dispatch("event",e)},e}(),q=function(){},F=function(e){var t={};return e&&Object.keys(e).forEach(function(n){void 0===e[n]||(e[n],0)||null===e[n]||(t[n]=e[n])}),t};(V=v||(v={})).GET="GET",V.POST="POST",V.PUT="PUT",V.DELETE="DELETE";var V,G,B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params={},t.requireAuth=!0,t.headers={},t.requestId=D(),t}return s(t,e),t.prototype.stringifyParams=function(e){return"object"!=typeof e||Array.isArray(e)?String(e):e?JSON.stringify(e):""},t.prototype.encodeParams=function(e){var t=this;return null==e||""===e?encodeURIComponent(""):Array.isArray(e)?e.map(function(e){return t.encodeParams(e)}).join(","):"object"==typeof e?encodeURIComponent(JSON.stringify(e)):encodeURIComponent(String(e))},Object.defineProperty(t.prototype,"query",{get:function(){var e=this,t=F(this.params);return"?".concat(Object.keys(t).map(function(n){return"".concat(encodeURIComponent(n),"=").concat(e.encodeParams(t[n]))}).join("&"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"payload",{get:function(){var e=this,t=F(this.params);if(Object.keys(t).some(function(e){return N(t[e])})){var n=new FormData;return Object.keys(t).forEach(function(r){var i,s=t[r];N(s)?n.append(r,s,null!==(i=s.name)&&void 0!==i?i:"filename"):n.append(r,e.stringifyParams(s))}),n}return JSON.stringify(t)},enumerable:!1,configurable:!0}),t}(q),Q=function(e){function t(t,n){var r=e.call(this)||this;return r._iid=t,r._payload=n,r}return s(t,e),Object.defineProperty(t.prototype,"payload",{get:function(){return o({},this._payload)},enumerable:!1,configurable:!0}),t.prototype.as=function(e){return new e(this._iid,this.payload)},t}(q),H=function(e){function t(t){var n=e.call(this)||this;return n.requestId=t,n}return s(t,e),t}(q),z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(q),K=function(e){function t(t){var n=e.call(this)||this;return n.statLog=t,n}return s(t,e),t}(q);(W=G||(G={})).WEBSOCKET_CONNECT="ws:connect",W.API_RESULT="api:result";var W,Z,Y=function(){function e(e){var t=e.type,n=e.data,r=e.ts,i=void 0===r?Date.now():r;this.type=t,this.createdAt=i,this.data=n}return e.payloadify=function(e){return F({stat_type:e.type,ts:e.createdAt,data:F(e.data)})},e}(),X=function(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"==navigator.product},J=function(){function e(e,t){var n=t.auth,r=t.sdkState,i=t.dispatcher,s=t.logger,o=this;this._abortControl=new Map,this._iid=e,this._auth=n,this._sdkState=r,this._dispatcher=i,this._dispatcher.on(function(e){e instanceof H&&o.cancel(e.requestId)}),this._logger=s}return Object.defineProperty(e.prototype,"_userAgentWithExtension",{get:function(){var e=this._sdkState.extensions,t=X()?"reactnative":"JS",n=e.sb_syncmanager?"s".concat(e.sb_syncmanager):"",r=e.sb_uikit?"u".concat(e.sb_uikit):"",i=e["device-os-platform"]?"o".concat(e["device-os-platform"]):"";return"".concat(t,"/c").concat(p.SDK_VERSION,"/").concat(n,"/").concat(r,"/").concat(i)},enumerable:!1,configurable:!0}),e.prototype._createHeader=function(e,t){void 0===t&&(t=null);var n=this._sdkState,r=n.appId,i=n.appVersion,s=o(o({},e.headers),{SendBird:"JS,".concat(p.OS_VERSION,",").concat(p.SDK_VERSION,",").concat(r).concat(i?",".concat(i):""),"SB-User-Agent":encodeURIComponent(this._userAgentWithExtension),"Request-Sent-Timestamp":Date.now().toString()});return t||(s["Content-Type"]="application/json; charset=utf-8"),e.requireAuth&&this._auth.hasSession&&(s["Session-Key"]=this._auth.sessionKey),this._auth&&this._auth.authToken&&(s["App-Id"]=r,s["Access-Token"]=this._auth.authToken),s},e.prototype._statLogApiResult=function(e,t,n){this._dispatcher.dispatch(new K(new Y({type:G.API_RESULT,data:{endpoint:e.path,method:e.method,success:!n,latency:Date.now()-t,error_code:null==n?void 0:n.code,error_description:null==n?void 0:n.message}})))},e.prototype.send=function(e){return a(this,void 0,void 0,function(){var t,n,r,i,s,o,a,c,l,d,h,f,p,_,m;return u(this,function(u){switch(u.label){case 0:t=e.path,n=e.method,r=![v.GET,v.DELETE].includes(n),i=this._sdkState.api,s="".concat(i.host).concat(t).concat(r?"":e.query),o=r?e.payload:null,a=this._createHeader(e,o instanceof FormData?o:null),l=(c=new AbortController).signal,this._abortControl.set(e.requestId,c),d=Date.now(),u.label=1;case 1:return u.trys.push([1,4,,5]),[4,fetch(s,{method:n,body:o,headers:a,signal:l})];case 2:return[4,(h=u.sent()).json()];case 3:if(f=u.sent(),h.ok||h.redirected)return this._logger.debug("receive api response",e.requestId),this._statLogApiResult(e,d,null),[2,new Q(this._iid,f)];throw f?(p=new g(f),!e.requireAuth&&p.isSessionKeyExpiredError&&this._dispatcher.dispatch(new z)):p=g.requestFailed,this._statLogApiResult(e,d,p),p;case 4:throw _=u.sent(),this._statLogApiResult(e,d,_),_ instanceof g?(this._logger.debug("fail api request",_),_):"AbortError"===_.name?g.requestCanceled:(m=g.networkError,this._logger.debug("fail api request",m),m);case 5:return[2]}})})},e.prototype.cancel=function(e){this._abortControl.has(e)&&(this._abortControl.get(e).abort(),this._abortControl.delete(e))},e.prototype.cancelAll=function(){var e,t;try{for(var n=c(this._abortControl.values()),r=n.next();!r.done;r=n.next())r.value.abort()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this._abortControl.clear()},e}(),$=function(e){function t(t,n,r,i){void 0===i&&(i="");var s,o=this;return(o=e.call(this)||this)._iid=t,o.code=n,o.payload=r,o.requestId=r?null!==(s=r.req_id)&&void 0!==s?s:i:"",o}return s(t,e),t.createFromRawMessage=function(e,n){var r=n.substring(0,4),i=null;try{i=JSON.parse(n.substring(4))}catch(e){r="NOOP"}finally{return new t(e,r,i)}},t.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),"\n")},t.prototype.as=function(e){return new e(this._iid,this.code,this.payload)},t}(q),ee=function(e){function t(t){var n,r=t.code,i=t.ackRequired,s=t.payload,o=this;return(o=e.call(this)||this).code=r,o.payload=void 0===s?null:s,o.requestId=null!==(n=o.payload.req_id)&&void 0!==n?n:D(),o.ackRequired=i,o.payload.req_id=o.requestId,o}return s(t,e),t.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),"\n")},t}(q),et=function(e){function t(){return e.call(this,{code:"PING",payload:{id:Date.now(),active:1},ackRequired:!1})||this}return s(t,e),t}(ee),en=function(){function e(e){var t=e.pingDelegate,n=e.sdkState,r=e.logger;this._pingTimer=null,this._pingTimeoutTimer=null,this.pingDelegate=t,this.sdkState=n,this._logger=r}return Object.defineProperty(e.prototype,"isWaiting",{get:function(){return!!this._pingTimeoutTimer},enumerable:!1,configurable:!0}),e.prototype.ping=function(){var e,t=this,n=new et;try{var r=null!==(e=this.sdkState.websocket.pongTimeout)&&void 0!==e?e:5e3;this._pingTimeoutTimer=setTimeout(function(){t._logger.debug("pinger.ping() timeout"),t.pingDelegate.error(null)},r),this.pingDelegate.send(n),this._logger.debug("pinger.ping()")}catch(e){this._logger.debug("pinger.ping() error",e),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=null),this.pingDelegate.error(null)}return n},e.prototype.pong=function(){this._logger.debug("pinger.pong()"),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=null)},e.prototype.refreshTimer=function(){var e,t=this;this._logger.debug("pinger.refreshTimer()");var n=null!==(e=this.sdkState.websocket.pingInterval)&&void 0!==e?e:15e3;this.stop(),this._pingTimer=setInterval(function(){t.ping()},n)},e.prototype.start=function(){this._logger.debug("pinger.start()"),this.refreshTimer(),this.ping()},e.prototype.stop=function(){this._logger.debug("pinger.stop()"),this._pingTimer&&(clearInterval(this._pingTimer),this._pingTimer=null),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=null)},e}(),er=function(){};(ei=Z||(Z={})).CONNECTING="CONNECTING",ei.OPEN="OPEN",ei.CLOSED="CLOSED";var ei,es,eo=function(e){function t(t,n){var r=n.sdkState,i=n.dispatcher,s=n.logger,o=e.call(this)||this;return o._pinger=null,o.lastActive=0,o._iid=t,o._sdkState=r,o._dispatcher=i,o._logger=s,o._sdkState.websocket.pingerDisabled||(o._pinger=new en({pingDelegate:{send:function(e){return o.send(e)},error:function(e){return o.error(e)}},sdkState:o._sdkState,logger:s})),o}return s(t,e),Object.defineProperty(t.prototype,"connectionState",{get:function(){if(this._ws)switch(this._ws.readyState){case 0:return Z.CONNECTING;case 1:return Z.OPEN}return Z.CLOSED},enumerable:!1,configurable:!0}),t.prototype.connect=function(e){var t=this;this._ws=new WebSocket(e),this._ws.onopen=function(){t._logger.debug("websocket open"),t.dispatch("open")},this._ws.onmessage=function(e){e.data.split("\n").forEach(function(e){if(e&&I("string",e)){var n=$.createFromRawMessage(t._iid,e);t._logger.debug("receive websocket event",n),"LOGI"===n.code?(n.payload&&!n.payload.error&&t._pinger&&t._pinger.start(),t.dispatch("message",n)):"PONG"===n.code?t._pinger&&t._pinger.pong():"EXPR"===n.code?n.payload&&n.payload.expires_in>=0&&t._dispatcher.dispatch(new z):"NOOP"===n.code||t.dispatch("message",n)}})},this._ws.onerror=function(){t._logger.debug("websocket error"),t._pinger&&t._pinger.stop(),t.dispatch("error",g.networkError)},this._ws.onclose=function(){t._logger.debug("websocket close"),t._pinger&&t._pinger.stop(),t.dispatch("close")},this.lastActive=Date.now()},t.prototype.disconnect=function(){var e=this;this._logger.debug("websocket disconnect"),this._pinger&&this._pinger.stop(),this._ws&&(this._ws.onopen=er,this._ws.onmessage=er,this._ws.onerror=er,this._ws.onclose=function(){e.dispatch("close")},this._ws.close(),this._ws=null)},t.prototype.send=function(e){if(!this._ws)throw g.connectionClosed;"PING"!==e.code?this._pinger&&this._pinger.refreshTimer():this._logger.debug("send ping",e),this._ws.send(e.convertToMessage())},t.prototype.error=function(e){this._logger.debug("websocket error",e),this._pinger&&this._pinger.stop(),this.dispatch("error",e)},t}(x),ea=function(e){function t(t){var n=t.all,r=t.custom_types,i=t.ts,s=e.call(this)||this;return s.all=n,s.customTypes=r,s.ts=i,s}return s(t,e),t}(q),eu=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},ec=function(){function e(e,t){var n=t.auth,r=t.sdkState,i=t.dispatcher,s=t.logger,o=this;this._ackStateMap=new Map,this._sdkState=r,this._dispatcher=i,this._logger=s,this.apiClient=new J(e,{auth:n,sdkState:r,dispatcher:i,logger:s}),this.websocketClient=new eo(e,{sdkState:r,dispatcher:i,logger:s}),this.websocketClient.on("message",function(e){if(e.payload.unread_cnt&&o._dispatcher.dispatch(new ea(e.payload.unread_cnt)),e.requestId){if(o._ackStateMap.has(e.requestId)){var t=o._ackStateMap.get(e.requestId);"EROR"!==e.code?t.resolve(e):t.reject(new g({code:e.payload.code,message:e.payload.message}))}}else o._dispatcher.dispatch(e)}).on("close",function(){o._ackStateMap.forEach(function(e){e.reject(g.connectionClosed)}),o._ackStateMap.clear()})}return e.prototype._sendApiRequest=function(e){return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,this.apiClient.send(e)];case 1:return[2,t.sent()]}})})},e.prototype._sendWebsocketRequest=function(e){return a(this,void 0,void 0,function(){var t,n,r,i=this;return u(this,function(s){if(t=new eu,e.ackRequired){n=null,r=function(r,s){void 0===r&&(r=null),void 0===s&&(s=null),i._ackStateMap.has(e.requestId)&&(i._ackStateMap.delete(e.requestId),n&&(clearTimeout(n),n=null),r?(i._logger.debug("fail websocket request",r),t.reject(r)):(i._logger.debug("receive websocket ack",e.requestId),t.resolve(s)))};try{n=setTimeout(function(){return r(g.noAckTimeout)},this._sdkState.websocket.responseTimeout),this._ackStateMap.set(e.requestId,{resolve:function(e){return r(null,e)},reject:function(e){return r(e)}}),this.websocketClient.send(e)}catch(e){r(e)}}else try{this.websocketClient.send(e),t.resolve(null)}catch(e){t.reject(e)}return[2,t.promise]})})},e.prototype.send=function(e){return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return e instanceof B?[4,this._sendApiRequest(e)]:[3,2];case 1:case 3:return[2,t.sent()];case 2:return e instanceof ee?[4,this._sendWebsocketRequest(e)]:[3,4];case 4:throw g.invalidParameters}})})},e.prototype.cancel=function(e){this.apiClient.cancel(e)},e.prototype.cancelAll=function(){this.apiClient.cancelAll()},e}();(el=es||(es={}))[el.NONE=0]="NONE",el[el.INITIALIZED=1]="INITIALIZED",el[el.CONNECTING=2]="CONNECTING",el[el.CONNECTED=3]="CONNECTED",el[el.RECONNECTING=4]="RECONNECTING",el[el.DISCONNECTED=5]="DISCONNECTED",el[el.LOGOUT=6]="LOGOUT";var el,ed,eh,ef,ep,e_,ev,em,eg,ey,eb=function(e){function t(t){var n=t.stateType,r=e.call(this)||this;return r.stateType=n,r}return s(t,e),t}(q),eE=function(){function e(e,t){var n=t.auth,r=t.sdkState,i=t.dispatcher,s=t.logger,o=this;this._currentConnectionStateType=es.INITIALIZED,this._lazyCallQueue=[],this.commandRouter=new ec(e,{auth:n,sdkState:r,dispatcher:i,logger:s}),this._auth=n,this._logger=s,this._dispatcher=i,this._dispatcher.on(function(e){if(e instanceof eb){var t=e.stateType;switch(o._currentConnectionStateType=t,t){case es.CONNECTED:var n=o._lazyCallQueue;o._lazyCallQueue=[],n.forEach(function(e){return a(o,void 0,void 0,function(){var t,n,r,i;return u(this,function(s){switch(s.label){case 0:t=e.command,n=e.deferred,clearTimeout(e.timeout),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.send(t)];case 2:return r=s.sent(),n.resolve(r),[3,4];case 3:return i=s.sent(),n.reject(i),[3,4];case 4:return[2]}})})});break;case es.INITIALIZED:case es.DISCONNECTED:case es.LOGOUT:n=o._lazyCallQueue,o._lazyCallQueue=[],n.forEach(function(e){return a(o,void 0,void 0,function(){var t;return u(this,function(n){return t=e.deferred,clearTimeout(e.timeout),this._auth&&this._auth.hasSession?t.reject(g.connectionClosed):t.reject(g.connectionRequired),[2]})})})}}})}return Object.defineProperty(e.prototype,"isReady",{get:function(){return this._currentConnectionStateType===es.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLazyCallActivated",{get:function(){return this._currentConnectionStateType===es.CONNECTING||this._currentConnectionStateType===es.RECONNECTING},enumerable:!1,configurable:!0}),e.prototype.send=function(e){return a(this,void 0,void 0,function(){var t,n,r=this;return u(this,function(i){switch(i.label){case 0:return e instanceof ee?this.isReady?(this._logger.debug("send websocket request",e),[4,this.commandRouter.send(e)]):[3,2]:[3,4];case 1:case 5:return[2,i.sent()];case 2:if(this.isLazyCallActivated)return this._logger.debug("wait websocket request",e),t=new eu,this._lazyCallQueue.push({command:e,deferred:t,timeout:setTimeout(function(){return r.timeout(e.requestId)},1e4)}),[2,t.promise];throw this._logger.debug("fail websocket request"),g.connectionRequired;case 3:return[3,7];case 4:return e instanceof B?this._auth.hasSession?(this._logger.debug("send api request",e),[4,this.commandRouter.send(e)]):[3,6]:[3,7];case 6:if(this.isLazyCallActivated)return this._logger.debug("wait api request",e),t=new eu,this._lazyCallQueue.push({command:e,deferred:t,timeout:setTimeout(function(){return r.timeout(e.requestId)},1e4)}),[2,t.promise];throw n=g.connectionRequired,this._logger.debug("fail api request",n),n;case 7:return[2]}})})},e.prototype.forceSend=function(e){return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return this._logger.debug("send forced request",e),[4,this.commandRouter.send(e)];case 1:return[2,t.sent()]}})})},e.prototype.timeout=function(e){this._logger.debug("timeout request",e);var t=this._lazyCallQueue.findIndex(function(t){return t.command.requestId===e});t>-1&&(this._lazyCallQueue[t].deferred.reject(g.connectionRequired),this._lazyCallQueue.splice(t,1))},e.prototype.cancel=function(e){this._logger.debug("cancel api request",e),this.commandRouter.cancel(e)},e.prototype.cancelAll=function(){this._logger.debug("cancel all api requests"),this.commandRouter.cancelAll()},e}(),eI="/".concat("v3","/users"),eT="/".concat("v3","/storage/file"),eS="/".concat("v3","/group_channels"),ew="/".concat("v3","/sdk/group_channels"),eC="/".concat("v3","/open_channels"),eN="/".concat("v3","/search"),ek="/".concat("v3","/report"),eA="/".concat("v3","/emojis"),eO="/".concat("v3","/emoji_categories"),eL="/".concat("v3","/polls"),eR="/".concat("v3","/scheduled_messages"),eM="/".concat("v3","/sdk/statistics"),eU=function(e){function t(t){var n=t.userId,r=t.authToken,i=t.expiringSession,s=e.call(this)||this;return s.path="".concat(eI,"/").concat(n,"/session_key"),s.method=v.POST,s.params={token:r,expiring_session:!!(void 0===i||i)},s.requireAuth=!1,s}return s(t,e),t}(B),eD=function(e){function t(t){var n=t.authToken,r=t.expiringSession;return e.call(this,{code:"LOGI",payload:{token:n,expiring_session:void 0===r||r?1:0},ackRequired:!0})||this}return s(t,e),t}(ee),eP=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=n.key;return r.key=i,r}return s(t,e),t}(Q),ex=function(e){function t(t,n,r){var i=e.call(this,t,"LOGI",r)||this;return i.error=null,i.newKey=r.new_key,i.error=r.error?new g(r.error):null,i}return s(t,e),t}($),ej=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(q),eq=function(e){return a(void 0,void 0,void 0,function(){return u(this,function(t){return[2,new Promise(function(t){return setTimeout(t,e)})]})})},eF=function(){function e(){}return e.prototype.calcTimeout=function(){return 0},e}(),eV=function(e,t,n){return void 0===n&&(n=new eF),a(void 0,void 0,void 0,function(){var r,i,s,o,a,c;return u(this,function(u){switch(u.label){case 0:r=0,i=null,s=function(e){return void 0===e&&(e=null),i=null!=e?e:Error("Halted")},o=function(){r=0},u.label=1;case 1:if(!(-1===t||r<t))return[3,9];u.label=2;case 2:return u.trys.push([2,4,,8]),[4,e(s,o)];case 3:if(a=u.sent(),i)throw i;return[2,a];case 4:if(c=u.sent(),i)return[3,6];if(++r===t)throw c;return[4,eq(n.calcTimeout(r))];case 5:return u.sent(),[3,7];case 6:throw i;case 7:return[3,8];case 8:return[3,1];case 9:return[2]}})})},eG=function(e){return a(void 0,void 0,void 0,function(){var t;return u(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:return n.sent(),[3,3];case 2:if(!((t=n.sent())instanceof g))throw t;return t.throwOutside(),[3,3];case 3:return[2]}})})},eB=function(e){return a(void 0,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e()];case 1:case 2:return t.sent(),[3,3];case 3:return[2]}})})},eQ=function(e){function t(t){var n=t.auth,r=t.sdkState,i=t.dispatcher,s=t.requestQueue,o=t.logger,a=e.call(this)||this;return a._currentConnectionStateType=es.INITIALIZED,a._isRefreshingAuthToken=!1,a._isRefreshingSessionKey=!1,a.auth=n,a._sdkState=r,a._dispatcher=i,a._requestQueue=s,a._logger=o,a._dispatcher.on(function(e){if(e instanceof eb){var t=e.stateType;a._currentConnectionStateType=t}else e instanceof z&&a.handler&&(a._logger.debug("session expired"),a.handler.onSessionExpired(),a.refresh())}),a}return s(t,e),t.prototype.createRefreshWebsocketCommand=function(e){return new eD({authToken:e,expiringSession:!0})},t.prototype._refreshSessionKeyByWebSocket=function(e){return a(this,void 0,void 0,function(){var t,n,r,i;return u(this,function(s){switch(s.label){case 0:return t=this.createRefreshWebsocketCommand(e),[4,this._requestQueue.forceSend(t)];case 1:if(r=(n=s.sent().as(ex)).newKey,i=n.error)throw i;return this.auth.sessionKey=null!=r?r:this.auth.sessionKey,[2]}})})},t.prototype._refreshSessionKeyByApi=function(e){return a(this,void 0,void 0,function(){var t,n=this;return u(this,function(r){switch(r.label){case 0:return t=new eU({userId:this._sdkState.userId,authToken:e,expiringSession:!0}),[4,eV(function(e){return a(n,void 0,void 0,function(){var n,r;return u(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._requestQueue.forceSend(t)];case 1:return n=i.sent().as(eP).key,this.auth.sessionKey=n,[3,3];case 2:if(r=i.sent(),!this._isSessionRelatedError(r))throw r;return e(r),[3,3];case 3:return[2]}})})},3)];case 1:return r.sent(),[2]}})})},t.prototype._refreshSessionKey=function(e,t){return void 0===t&&(t=!0),a(this,void 0,void 0,function(){var n,r,i,s;return u(this,function(o){switch(o.label){case 0:if(this._currentConnectionStateType!==es.CONNECTED)return[3,9];o.label=1;case 1:return o.trys.push([1,3,,9]),[4,this._refreshSessionKeyByWebSocket(e)];case 2:return o.sent(),this.complete(),[2];case 3:return n=o.sent(),this._isSessionRelatedError(n)&&t?(r=this.auth,[4,this._receiveNewAuthToken()]):[3,8];case 4:return r.authToken=o.sent(),this.auth.authToken?[4,this._refreshSessionKey(this.auth.authToken,!1)]:[3,6];case 5:return o.sent(),this.complete(),[3,7];case 6:this.close(),o.label=7;case 7:return[2];case 8:return[3,9];case 9:return o.trys.push([9,11,,20]),[4,this._refreshSessionKeyByApi(e)];case 10:return o.sent(),this.complete(),[3,20];case 11:return i=o.sent(),this._isSessionRelatedError(i)?t?(s=this.auth,[4,this._receiveNewAuthToken()]):[3,16]:[3,18];case 12:return s.authToken=o.sent(),this.auth.authToken?[4,this._refreshSessionKeyByApi(this.auth.authToken)]:[3,14];case 13:return o.sent(),this.complete(),[3,15];case 14:this.close(),o.label=15;case 15:return[3,17];case 16:case 18:throw i;case 17:return[3,19];case 19:return[3,20];case 20:return[2]}})})},t.prototype._receiveNewAuthToken=function(){var e=this,t=new eu;return eG(function(){return a(e,void 0,void 0,function(){var e=this;return u(this,function(n){return this._isRefreshingAuthToken=!0,this.auth.clear(),this.handler.onSessionTokenRequired(function(n){e._isRefreshingAuthToken=!1,e.dispatch("refresh-authtoken"),t.resolve(n)},function(n){e._isRefreshingAuthToken=!1,t.reject(n)}),[2]})})}),t.promise},t.prototype._isSessionRelatedError=function(e){return e instanceof g&&(e.isSessionKeyExpiredError||e.isSessionTokenExpiredError)},Object.defineProperty(t.prototype,"isSessionKeyRefreshing",{get:function(){return this._isRefreshingSessionKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRefreshingAuthToken",{get:function(){return this._isRefreshingAuthToken},enumerable:!1,configurable:!0}),t.prototype.complete=function(){var e=this;this.dispatch("refresh"),eG(function(){return a(e,void 0,void 0,function(){return u(this,function(e){return this._logger.debug("session refreshed"),this.handler.onSessionRefreshed(),[2]})})})},t.prototype.error=function(e){var t=this;eG(function(){return a(t,void 0,void 0,function(){return u(this,function(t){return this.handler.onSessionError(e),[2]})})})},t.prototype.close=function(){var e=this;this.dispatch("close"),eG(function(){return a(e,void 0,void 0,function(){return u(this,function(e){return this._logger.debug("session closed"),this.handler.onSessionClosed(),[2]})})})},t.prototype.refresh=function(){return a(this,void 0,void 0,function(){var e,t;return u(this,function(n){switch(n.label){case 0:if(!this.handler||this._isRefreshingSessionKey)return[3,7];if(this._isRefreshingSessionKey=!0,this.auth.authToken)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._receiveNewAuthToken()];case 2:return(e=n.sent())?(this._logger.debug("session refreshing.."),this.auth.authToken=e,[3,4]):(this.close(),this._isRefreshingSessionKey=!1,[2]);case 3:throw n.sent(),t=g.sessionTokenRequestFailed,this._dispatcher.dispatch(new ej),this.error(t),this._isRefreshingSessionKey=!1,t;case 4:return n.trys.push([4,6,,7]),[4,this._refreshSessionKey(this.auth.authToken)];case 5:return n.sent(),this._isRefreshingSessionKey=!1,[3,7];case 6:throw n.sent(),t=g.sessionTokenRefreshFailed,this._dispatcher.dispatch(new ej),this.error(t),this._isRefreshingSessionKey=!1,t;case 7:return[2]}})})},t}(x),eH=function(){function e(){this.type=es.NONE,this.name="none"}return e.prototype.run=function(e){return a(this,void 0,void 0,function(){return u(this,function(e){return[2]})})},e.prototype.onConnect=function(e,t){return a(this,void 0,void 0,function(){return u(this,function(e){return[2]})})},e.prototype.onReconnect=function(e,t){return t.resetReconnectCount,a(this,void 0,void 0,function(){return u(this,function(e){return[2]})})},e.prototype.onDisconnect=function(e,t){return t.error,t.autoReconnect,a(this,void 0,void 0,function(){return u(this,function(e){return[2]})})},e.prototype.onLogout=function(e){return a(this,void 0,void 0,function(){return u(this,function(e){return[2]})})},e}(),ez=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=es.LOGOUT,t.name="logout",t}return s(t,e),t.prototype.run=function(e){return a(this,void 0,void 0,function(){var t,n=this;return u(this,function(r){switch(r.label){case 0:return t=e.sdkState.userId,e.logout(),eG(function(){return a(n,void 0,void 0,function(){return u(this,function(n){return e.connectionHandlers.forEach(function(e){e.onDisconnected(t)}),[2]})})}),[4,e.changeState(new eX)];case 1:return r.sent(),[2]}})})},t}(eH),eK=function(e){function t(t){var n=t.autoReconnect,r=e.call(this)||this;return r.type=es.DISCONNECTED,r.name="disconnected",r._autoReconnect=!1,r._autoReconnect=n,r}return s(t,e),t.prototype.run=function(e){return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return e.disconnect(),this._autoReconnect?[4,e.changeState(new eW)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.onConnect=function(e,t){return a(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return e.disconnect(),[4,e.changeState(new eY({authToken:t}))];case 1:return n.sent(),[2]}})})},t.prototype.onReconnect=function(e){return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,e.changeState(new eW)];case 1:return t.sent(),[2]}})})},t.prototype.onLogout=function(e){return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,e.changeState(new ez)];case 1:return t.sent(),[2]}})})},t}(eH),eW=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=es.RECONNECTING,t.name="reconnecting",t._haltConnect=null,t._resetConnect=null,t._callbacks=[],t}return s(t,e),t.prototype.flushCallbacks=function(e){void 0===e&&(e=null),this._callbacks.forEach(function(t){return t(e)})},t.prototype.run=function(e){return a(this,void 0,void 0,function(){var t,n,r,i=this;return u(this,function(s){switch(s.label){case 0:t=new eu,this._callbacks.push(function(e){return e?t.reject(e):t.resolve()}),eG(function(){return a(i,void 0,void 0,function(){return u(this,function(t){return e.connectionHandlers.forEach(function(e){e.onReconnectStarted()}),[2]})})}),s.label=1;case 1:return s.trys.push([1,4,,9]),[4,eV(function(t,n){return a(i,void 0,void 0,function(){var r;return u(this,function(i){switch(i.label){case 0:this._haltConnect=t,this._resetConnect=n,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.connect()];case 2:return i.sent(),[3,4];case 3:if((r=i.sent())instanceof g&&r.code===h.CONNECTION_CANCELED)return t(r),[2];throw r;case 4:return[2]}})})},(n=e.sdkState.websocket).reconnectMaxRetry,n.reconnectRetryStrategy)];case 2:return s.sent(),[4,e.changeState(new eZ)];case 3:return s.sent(),eG(function(){return a(i,void 0,void 0,function(){return u(this,function(t){return e.connectionHandlers.forEach(function(e){e.onReconnectSucceeded()}),this.flushCallbacks(null),[2]})})}),[3,9];case 4:return m(r=s.sent())?[3,7]:r instanceof g?r.code===h.CONNECTION_CANCELED?[3,6]:[4,e.changeState(new eK({autoReconnect:!1}))]:[3,6];case 5:s.sent(),s.label=6;case 6:return eG(function(){return a(i,void 0,void 0,function(){return u(this,function(t){return e.connectionHandlers.forEach(function(e){e.onReconnectFailed()}),this.flushCallbacks(r),[2]})})}),[3,8];case 7:throw r;case 8:return[3,9];case 9:return[2,t.promise]}})})},t.prototype.onConnect=function(e,t){return a(this,void 0,void 0,function(){var t;return u(this,function(n){return t=new eu,this._resetConnect&&this._resetConnect(),e.cancelConnectForRetry(),this._callbacks.push(function(e){return e?t.reject(e):t.resolve()}),[2,t.promise]})})},t.prototype.onReconnect=function(e,t){var n=t.resetReconnectCount,r=void 0!==n&&n;return a(this,void 0,void 0,function(){var t;return u(this,function(n){return t=new eu,this._resetConnect&&r&&this._resetConnect(),e.cancelConnectForRetry(),this._callbacks.push(function(e){return e?t.reject(e):t.resolve()}),[2,t.promise]})})},t.prototype.onDisconnect=function(e,t){var n=t.error,r=void 0===n?null:n,i=t.autoReconnect,s=void 0===i||i;return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return this._haltConnect&&this._haltConnect(null!=r?r:g.connectionCanceled),[4,e.changeState(new eK({autoReconnect:s}))];case 1:return t.sent(),[2]}})})},t.prototype.onLogout=function(e){return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return this._haltConnect&&this._haltConnect(g.connectionCanceled),[4,e.changeState(new ez)];case 1:return t.sent(),[2]}})})},t}(eH),eZ=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=es.CONNECTED,t.name="connected",t}return s(t,e),t.prototype.onReconnect=function(e){return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return e.disconnect(),[4,e.changeState(new eW)];case 1:return t.sent(),[2]}})})},t.prototype.onDisconnect=function(e,t){var n=t.autoReconnect;return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,e.changeState(new eK({autoReconnect:n}))];case 1:return t.sent(),[2]}})})},t.prototype.onLogout=function(e){return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,e.changeState(new ez)];case 1:return t.sent(),[2]}})})},t}(eH),eY=function(e){function t(t){var n=t.authToken,r=e.call(this)||this;return r.type=es.CONNECTING,r.name="connecting",r._authToken="",r._haltConnect=null,r._callbacks=[],r._authToken=n,r}return s(t,e),t.prototype.flushCallbacks=function(e){void 0===e&&(e=null),this._callbacks.forEach(function(t){return t(e)})},t.prototype.run=function(e){return a(this,void 0,void 0,function(){var t,n,r=this;return u(this,function(i){switch(i.label){case 0:t=new eu,this._callbacks.push(function(e){return e?t.reject(e):t.resolve()}),i.label=1;case 1:return i.trys.push([1,4,,9]),[4,eV(function(t){return a(r,void 0,void 0,function(){var n;return u(this,function(r){switch(r.label){case 0:this._haltConnect=t,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.connect(this._authToken)];case 2:return r.sent(),[3,4];case 3:if((n=r.sent())instanceof g&&n.code===h.CONNECTION_CANCELED)return t(n),[2];throw n;case 4:return[2]}})})},e.sdkState.websocket.connectMaxRetry)];case 2:return i.sent(),[4,e.changeState(new eZ)];case 3:return i.sent(),eG(function(){return a(r,void 0,void 0,function(){return u(this,function(t){return e.connectionHandlers.forEach(function(t){t.onConnected(e.sdkState.userId)}),this.flushCallbacks(null),[2]})})}),[3,9];case 4:return m(n=i.sent())?[3,7]:(e.disconnect(),n instanceof g?n.code===h.CONNECTION_CANCELED?[3,6]:[4,e.changeState(new eX)]:[3,6]);case 5:i.sent(),i.label=6;case 6:return eG(function(){return a(r,void 0,void 0,function(){return u(this,function(e){return this.flushCallbacks(n),[2]})})}),[3,8];case 7:throw n;case 8:return[3,9];case 9:return[2,t.promise]}})})},t.prototype.onConnect=function(e){return a(this,void 0,void 0,function(){var e;return u(this,function(t){return e=new eu,this._callbacks.push(function(t){return t?e.reject(t):e.resolve()}),[2,e.promise]})})},t.prototype.onDisconnect=function(e,t){var n=t.error,r=void 0===n?null:n;return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return this._haltConnect&&this._haltConnect(null!=r?r:g.connectionCanceled),[4,e.changeState(new ez)];case 1:return t.sent(),[2]}})})},t.prototype.onLogout=function(e){return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return this._haltConnect&&this._haltConnect(g.connectionCanceled),[4,e.changeState(new ez)];case 1:return t.sent(),[2]}})})},t}(eH),eX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=es.INITIALIZED,t.name="initialized",t}return s(t,e),t.prototype.onConnect=function(e,t){return a(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return[4,e.changeState(new eY({authToken:t}))];case 1:return n.sent(),[2]}})})},t}(eH),eJ=new Map,e$=function(e,t){var n;return void 0===t&&(t=null),null!==t&&eJ.set(e,t),null!==(n=eJ.get(e))&&void 0!==n?n:""},e0=function(e){void 0===e&&(e={}),this.emojiHash=e.emoji_hash||"",this.uploadSizeLimit=e.file_upload_size_limit?1048576*e.file_upload_size_limit:Number.MAX_VALUE,this.useReaction=!!e.use_reaction,this.applicationAttributes=e.application_attributes||[],this.premiumFeatureList=e.premium_feature_list||[],this.enabledChannelMemberShipHistory=this.applicationAttributes.includes("channel_membership_history")},e1=function(){function e(e){this._iid="",this._iid=e}return e.payloadify=function(e){return e?{}:null},e}(),e2=function(e){function t(t){var n=t.userId,r=t.metadata,i=e.call(this)||this;return i.method=v.POST,i.path="".concat(eI,"/").concat(n,"/metadata"),i.params={metadata:r},i}return s(t,e),t}(B);s(function(e,t){var n=tr.call(this,e,t)||this;return n.metadata=t,n},tr=Q),(ti=ed||(ed={})).BASE="base",ti.GROUP="group",ti.OPEN="open",(ts=eh||(eh={})).OPERATOR="operator",ts.NONE="none",(to=ef||(ef={})).BASE="base",to.USER="user",to.FILE="file",to.ADMIN="admin",(ta=ep||(ep={})).ALL="",ta.USER="MESG",ta.FILE="FILE",ta.ADMIN="ADMM",(tu=e_||(e_={})).USER="MESG",tu.FILE="FILE",tu.ADMIN="ADMM",(tc=ev||(ev={})).USERS="users",tc.CHANNEL="channel",(tl=em||(em={})).ALL="all",tl.NONE="none",tl.ONLY_REPLY_TO_CHANNEL="only_reply_to_channel",(td=eg||(eg={})).DEFAULT="default",td.SUPPRESS="suppress",(th=ey||(ey={})).PENDING="pending",th.SCHEDULED="scheduled",th.SUCCEEDED="succeeded",th.FAILED="failed",th.CANCELED="canceled";var e4=function(e){switch(e){case ed.GROUP:return eS;case ed.OPEN:return eC;default:return null}},e3=function(e){switch(e){case ed.GROUP:return"".concat(ek,"/group_channels");case ed.OPEN:return"".concat(ek,"/open_channels");default:return null}},e5=function(e,t,n){var r,i;switch(e){case ev.CHANNEL:return!0;case ev.USERS:if(t)try{for(var s=c(t),o=s.next();!o.done;o=s.next())if(o.value===n)return!0}catch(e){r={error:e}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return!1},e7=function(e,t,n){var r=e5(e.mentionType,e.mentionedUserIds,n),i=e5(t.mentionType,t.mentionedUserIds,n);return!r&&i?1:r&&!i?-1:0},e6=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.metadata;return(n=e.call(this)||this).method=v.POST,n.path="".concat(e4(i),"/").concat(encodeURIComponent(r),"/metadata"),n.params={metadata:s,include_ts:!0},n}return s(t,e),t}(B),e8=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaData=null!=n?n:{},r}return s(t,e),t}(Q),e9=function(e){function t(t){var n=t.userId,r=t.metadata,i=t.upsert,s=e.call(this)||this;return s.method=v.PUT,s.path="".concat(eI,"/").concat(n,"/metadata"),s.params={metadata:r,upsert:i},s}return s(t,e),t}(B),te=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metadata=n,r}return s(t,e),t}(Q),tt=function(e){function t(t){var n=t.userId,r=t.metadataKey,i=e.call(this)||this;return i.method=v.DELETE,i.path="".concat(eI,"/").concat(n,"/metadata/").concat(r),i}return s(t,e),t}(B);s(function(){return null!==tf&&tf.apply(this,arguments)||this},tf=Q);var tn=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=v.DELETE,r.path="".concat(eI,"/").concat(n,"/metadata"),r}return s(t,e),t}(B);s(function(){return null!==tp&&tp.apply(this,arguments)||this},tp=Q);var tr,ti,ts,to,ta,tu,tc,tl,td,th,tf,tp,t_,tv=function(e,t){void 0===t&&(t=null);var n=JSON.parse(JSON.stringify(e));return n._iid&&delete n._iid,t&&t(n),n},tm=function(e,t){void 0===t&&(t=null);var n=JSON.parse(JSON.stringify(e));return t&&t(n),n},tg=function(e){return{do:function(t){e||t()},throw:function(t){if(!e)throw t}}};(ty=t_||(t_={})).ONLINE="online",ty.OFFLINE="offline",ty.NON_AVAILABLE="nonavailable";var ty,tb,tE=function(e){function t(t,n){var r,i,s,o,a,u,c,h,f,p,_,v,m=this;return(m=e.call(this,t)||this).userId=null!==(i=null!==(r=n.guest_id)&&void 0!==r?r:n.user_id)&&void 0!==i?i:"",m.nickname=null!==(o=null!==(s=n.nickname)&&void 0!==s?s:n.name)&&void 0!==o?o:"",m.plainProfileUrl=null!==(u=null!==(a=n.profile_url)&&void 0!==a?a:n.image)&&void 0!==u?u:"",m.requireAuth=null!==(c=n.require_auth_for_profile_image)&&void 0!==c&&c,m.metaData=null!==(h=n.metadata)&&void 0!==h?h:{},m.connectionStatus=t_.NON_AVAILABLE,T(t_,n.is_online)?m.connectionStatus=n.is_online:I("boolean",n.is_online)&&(m.connectionStatus=n.is_online?t_.ONLINE:t_.OFFLINE),m.isActive=null===(f=n.is_active)||void 0===f||f,m.lastSeenAt=null!==(p=n.last_seen_at)&&void 0!==p?p:null,m.preferredLanguages=n.preferred_languages?d([],l(n.preferred_languages),!1):null,m.friendDiscoveryKey=null!==(_=n.friend_discovery_key)&&void 0!==_?_:null,m.friendName=null!==(v=n.friend_name)&&void 0!==v?v:null,m}return s(t,e),t.payloadify=function(t){return t?F(o(o({},e.payloadify.call(this,t)),{user_id:t.userId,nickname:t.nickname,profile_url:t.plainProfileUrl,require_auth_for_profile_image:t.requireAuth,metadata:t.metaData,is_online:t.connectionStatus,is_active:t.isActive,last_seen_at:t.lastSeenAt,preferred_languages:t.preferredLanguages,friend_discovery_key:t.friendDiscoveryKey,friend_name:t.friendName})):null},Object.defineProperty(t.prototype,"profileUrl",{get:function(){return this.requireAuth?"".concat(this.plainProfileUrl,"?auth=").concat(e$(this._iid)):this.plainProfileUrl},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return tv(this)},t.prototype._isValidMetaData=function(e){return!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map(function(t){return e[t]}).every(function(e){return I("string",e)})},t.prototype._applyMetaData=function(e,t){var n=this;void 0===t&&(t=!1),Object.keys(e).forEach(function(r){t?delete n.metaData[r]:n.metaData[r]=e[r]})},t.prototype.createMetaData=function(e){return a(this,void 0,void 0,function(){var t,n,r,i,s;return u(this,function(o){switch(o.label){case 0:return tg(this._isValidMetaData(e)).throw(g.invalidParameters),n=(t=tP.of(this._iid)).sdkState,r=t.requestQueue,i=new e2({userId:n.userId,metadata:e}),[4,r.send(i)];case 1:return s=o.sent().as(e8).metaData,this._applyMetaData(s),[2,this.metaData]}})})},t.prototype.updateMetaData=function(e,t){return void 0===t&&(t=!1),a(this,void 0,void 0,function(){var n,r,i,s,o;return u(this,function(a){switch(a.label){case 0:return tg(this._isValidMetaData(e)).throw(g.invalidParameters),r=(n=tP.of(this._iid)).sdkState,i=n.requestQueue,s=new e9({userId:r.userId,metadata:e,upsert:t}),[4,i.send(s)];case 1:return o=a.sent().as(te).metadata,this._applyMetaData(o),[2,this.metaData]}})})},t.prototype.deleteMetaData=function(e){return a(this,void 0,void 0,function(){var t,n,r,i,s;return u(this,function(o){switch(o.label){case 0:return tg(I("string",e)).throw(g.invalidParameters),n=(t=tP.of(this._iid)).sdkState,r=t.requestQueue,i=new tt({userId:n.userId,metadataKey:e}),[4,r.send(i)];case 1:return o.sent(),this._applyMetaData(((s={})[e]=!0,s),!0),[2,this.metaData]}})})},t.prototype.deleteAllMetaData=function(){return a(this,void 0,void 0,function(){var e,t,n,r;return u(this,function(i){switch(i.label){case 0:return t=(e=tP.of(this._iid)).sdkState,n=e.requestQueue,r=new tn({userId:t.userId}),[4,n.send(r)];case 1:return i.sent(),this.metaData={},[2]}})})},t}(e1),tI=function(e){function t(t){var n=t.userProfile,r=e.call(this)||this;return r.userProfile=n,r}return s(t,e),t}(q),tT=function(){function e(e,t){var n,r,i,s,o,a,u,c,l,d,h,f,p,_;this._iid=e,this.appInfo=new e0(t),this.user=new tE(e,t),this.connectedAt=1e3*(null!==(n=t.login_ts)&&void 0!==n?n:0),this.firstConnectedAt=0,this.pingInterval=null!==(r=t.ping_interval)&&void 0!==r?r:15e3,this.pongTimeout=null!==(i=t.pong_timeout)&&void 0!==i?i:5e3,this.reconnectInterval=null!==(o=null===(s=t.reconnect)||void 0===s?void 0:s.interval)&&void 0!==o?o:3e3,this.reconnectMaxInterval=null!==(u=null===(a=t.reconnect)||void 0===a?void 0:a.max_interval)&&void 0!==u?u:6e4,this.reconnectRetryCount=null!==(l=null===(c=t.reconnect)||void 0===c?void 0:c.retry_cnt)&&void 0!==l?l:5,this.reconnectIntervalMultiple=null!==(h=null===(d=t.reconnect)||void 0===d?void 0:d.mul)&&void 0!==h?h:2,this.maxUnreadCountOnSuperGroup=null!==(f=t.max_unread_cnt_on_super_group)&&void 0!==f?f:100,this.profileImageEncryption=!!t.profile_image_encryption,this.concurrentCallLimit=null!==(p=t.concurrent_call_limit)&&void 0!==p?p:5,this.backOffDelay=null!==(_=t.back_off_delay)&&void 0!==_?_:100}return e.payloadify=function(e){return o(o({},tE.payloadify(e.user)),{emoji_hash:e.appInfo.emojiHash,file_upload_size_limit:e.appInfo.uploadSizeLimit,application_attributes:e.appInfo.applicationAttributes,premium_feature_list:e.appInfo.premiumFeatureList,login_ts:e.connectedAt/1e3,ping_interval:e.pingInterval,pong_timeout:e.pongTimeout,reconnect:{interval:e.reconnectInterval,max_interval:e.reconnectMaxInterval,retry_cnt:e.reconnectRetryCount,mul:e.reconnectIntervalMultiple},max_unread_cnt_on_super_group:e.maxUnreadCountOnSuperGroup,profile_image_encryption:e.profileImageEncryption,concurrent_call_limit:e.concurrentCallLimit,back_off_delay:e.backOffDelay})},e.prototype.apply=function(){var e=this.reconnectInterval,t=this.reconnectMaxInterval,n=this.reconnectIntervalMultiple,r=tP.of(this._iid);r.sdkState.websocket.pingInterval=1e3*this.pingInterval,r.sdkState.websocket.pongTimeout=1e3*this.pongTimeout,r.sdkState.websocket.reconnectMaxRetry=this.reconnectRetryCount,r.sdkState.websocket.reconnectRetryStrategy={calcTimeout:function(r){return r>0?1e3*Math.min(e*Math.pow(n,r-1),t):10}},r.appInfo=this.appInfo,r.sessionManager.currentUser=this.user,r.connectedAt=this.connectedAt,this.firstConnectedAt||(r.firstConnectedAt=this.connectedAt),r.maxSuperGroupChannelUnreadCount=this.maxUnreadCountOnSuperGroup,r.concurrentCallLimit=this.concurrentCallLimit,r.backOffDelay=this.backOffDelay,r.dispatcher.dispatch(new tI({userProfile:this}))},e}(),tS=function(e){function t(t,n,r){var i,s=this;return(s=e.call(this,t,n,r)||this).error=null,s.userProfile=new tT(t,r),s.key=r.key,s.ekey=null!==(i=r.ekey)&&void 0!==i?i:"",s.error=r.error?new g(r):null,s}return s(t,e),t.asError=function(e){return new t(null,"LOGI",o({user_id:null,error:!0},e))},t.prototype.applyTo=function(e){if(this.error)throw this.error;var t=tP.of(e);if(!t)throw g.lostInstance;t.sessionManager.auth.sessionKey=this.key,e$(e,this.ekey),this.userProfile.apply()},t}($),tw=function(e){function t(t){var n=e.call(this)||this;return n.enabled=t,n}return s(t,e),t}(q),tC=function(e){function t(t,n){var r=n.sdkState,i=n.cacheContext,s=n.connectionHandlers,o=n.sessionManager,a=n.websocketClient,u=n.dispatcher,c=n.logger,l=n.entryState,d=void 0===l?new eX:l,h=e.call(this)||this;return h._currentState=null,h._loginTimer=null,h._connectingAt=0,h._connectionRequestQueue=[],h._iid=t,h.sdkState=r,h.cacheContext=i,h.connectionHandlers=s,h._sessionManager=o,h._websocketClient=a,h._dispatcher=u,h._logger=c,h._currentState=d,h._websocketClient.on("message",function(e){if("LOGI"===e.code){h._loginTimer&&(clearTimeout(h._loginTimer),h._loginTimer=null);var t=e.as(tS);if(t.error)h._sessionManager.auth.authToken=null,(t.error.isSessionKeyExpiredError||t.error.isSessionTokenExpiredError)&&h._dispatcher.dispatch(new z),h._connectionRequestQueue.forEach(function(e){return e.reject(t.error)}),h._statLogConnection(t.error);else{t.applyTo(h._iid),h._connectionRequestQueue.forEach(function(e){return e.resolve()});var n=t.userProfile;h._enableStatLog(n.appInfo.applicationAttributes.includes("allow_sdk_request_log_publish")),h._statLogConnection(null)}h._connectionRequestQueue=[]}}).on("close",function(){h._connectionRequestQueue.length>0&&(h._connectionRequestQueue.forEach(function(e){return e.reject(g.networkError)}),h._connectionRequestQueue=[],h._statLogConnection(g.networkError))}),h}return s(t,e),Object.defineProperty(t.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),t.prototype.changeState=function(e){return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return this._currentState=e,this._dispatcher.dispatch(new eb({stateType:e.type})),this._logger.debug("connection state changes to ".concat(e.name)),[4,this._currentState.run(this)];case 1:return t.sent(),[2]}})})},t.prototype._url=function(e){void 0===e&&(e="");var t=this.sdkState,n=t.appId,r=t.appVersion,i=t.userId,s=t.extensions,o=this.cacheContext.localCacheEnabled,a=this._sessionManager.auth,u=s.sb_syncmanager?"s".concat(s.sb_syncmanager):"",c=s.sb_uikit?"u".concat(s.sb_uikit):"",l="JS/c".concat(p.SDK_VERSION,"/").concat(u,"/").concat(c);return"".concat(this.sdkState.websocket.host,"/?p=JS&pv=").concat(encodeURIComponent(p.OS_VERSION),"&sv=").concat(encodeURIComponent(p.SDK_VERSION),"&ai=").concat(n).concat(r?"&av=".concat(r):"").concat(a.hasSession?"&key=".concat(encodeURIComponent(a.sessionKey)):"&user_id=".concat(encodeURIComponent(i),"&access_token=").concat(encodeURIComponent(e)),"&active=1&SB-User-Agent=").concat(l,"&Request-Sent-Timestamp=").concat(Date.now().toString(),"&include_extra_data=").concat(encodeURIComponent(String(["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash"]))).concat(this._sessionManager.handler?"&expiring_session=1":"","&use_local_cache=").concat(o?1:0,"&include_poll_details=1")},t.prototype._enableStatLog=function(e){this._dispatcher.dispatch(new tw(e))},t.prototype._statLogConnection=function(e){this._dispatcher.dispatch(new K(new Y({type:G.WEBSOCKET_CONNECT,data:{host_url:this.sdkState.websocket.host,success:!e,latency:Date.now()-this._connectingAt,error_code:null==e?void 0:e.code,error_description:null==e?void 0:e.message}})))},t.prototype.connect=function(e){return void 0===e&&(e=""),a(this,void 0,void 0,function(){var t,n,r=this;return u(this,function(i){return t=this._url(e),n=new eu,this._connectionRequestQueue.push(n),1===this._connectionRequestQueue.length&&(this._connectingAt=Date.now(),this._loginTimer=setTimeout(function(){r._loginTimer=null,r._dispatcher.dispatch(tS.asError(g.loginTimeout))},this.sdkState.websocket.responseTimeout),this._sessionManager.auth.authToken=e,this._websocketClient.connect(t)),[2,n.promise]})})},t.prototype.cancelConnectForRetry=function(){this._dispatcher.dispatch(tS.asError(g.connectionRenew))},t.prototype.disconnect=function(){this._websocketClient.disconnect()},t.prototype.logout=function(){this.sdkState.userId=null,this._sessionManager.currentUser=null,this._sessionManager.auth.clear(),this.disconnect()},t}(x),tN=function(){function e(e,t){var n=t.sdkState,r=t.cacheContext,i=t.connectionHandlers,s=t.sessionManager,o=t.websocketClient,a=t.dispatcher,u=t.logger,c=t.disableAutoReconnect,l=this;this._context=null,this._logger=u,this._context=new tC(e,{sdkState:n,cacheContext:r,connectionHandlers:i,sessionManager:s,websocketClient:o,dispatcher:a,logger:u}),void 0!==c&&c||(s.on("refresh-authtoken",function(){l.isConnected||(l._logger.debug("try reconnect by session token refresh"),l.reconnect())}).on("refresh",function(){l.isConnecting||l.isConnected||(l._logger.debug("try reconnect by session key refresh"),l.reconnect())}),o.on("close",function(){"foreground"===n.appState&&setTimeout(function(){s.isRefreshingAuthToken||(l._logger.debug("try reconnect by websocket connection closed"),l.reconnect())},100)}))}return Object.defineProperty(e.prototype,"isConnected",{get:function(){return this._context.currentState.type===es.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isConnecting",{get:function(){var e=this._context.currentState;return e.type===es.CONNECTING||e.type===es.RECONNECTING},enumerable:!1,configurable:!0}),e.prototype.connect=function(e){return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,this._context.currentState.onConnect(this._context,e)];case 1:return t.sent(),[2]}})})},e.prototype.reconnect=function(){return a(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,this._context.currentState.onReconnect(this._context,{})];case 1:return e.sent(),[2]}})})},e.prototype.resetAndReconnect=function(){return a(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,this._context.currentState.onReconnect(this._context,{resetReconnectCount:!0})];case 1:return e.sent(),[2]}})})},e.prototype.background=function(){return a(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,this._context.currentState.onDisconnect(this._context,{autoReconnect:!1})];case 1:return e.sent(),[2]}})})},e.prototype.disconnect=function(e){return void 0===e&&(e=null),a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,this._context.currentState.onDisconnect(this._context,{error:e,autoReconnect:!0})];case 1:return t.sent(),[2]}})})},e.prototype.logout=function(){return a(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,this._context.currentState.onLogout(this._context)];case 1:return e.sent(),[2]}})})},e}(),tk=function(e){function t(t){var n=t.deviceId,r=t.statLogs,i=e.call(this)||this;return i.method=v.POST,i.path="".concat(eM),i.params={device_id:n,log_entries:r.map(function(e){return Y.payloadify(e)})},i}return s(t,e),t}(B);(tA=tb||(tb={}))[tA.PENDING=0]="PENDING",tA[tA.ENABLED=1]="ENABLED",tA[tA.DISABLED=2]="DISABLED";var tA,tO,tL=function(){function e(e){var t=e.cacheContext,n=e.requestQueue,r=e.dispatcher,i=e.baseLimit,s=void 0===i?100:i,o=e.maxLimit,a=e.minLimit;this.queue=[],this.enabledstate=tb.PENDING,this.isFlushing=!1,this.generation=1,this.lastFlushedAt=0,this.deviceId=D(),this.cacheContext=t,this.requestQueue=n,this.dispatcher=r,this.baseLimit=s,this.limit=s,this.maxLimit=void 0===o?1e3:o,this.minLimit=void 0===a?10:a}return Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this.enabledstate===tb.ENABLED},enumerable:!1,configurable:!0}),e.prototype._save=function(){return a(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return this.cacheContext.localCacheEnabled?[4,this.cacheContext.preference.set(this.key,{deviceId:this.deviceId,statLogs:this.queue.map(function(e){return Y.payloadify(e)}),generation:this.generation++,lastFlushedAt:this.lastFlushedAt})]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype._flush=function(){return a(this,void 0,void 0,function(){var e,t;return u(this,function(n){switch(n.label){case 0:if(!this.isEnabled||this.isFlushing)return[3,7];this.isFlushing=!0,n.label=1;case 1:return n.trys.push([1,5,6,7]),(e=this.queue.slice(0,Math.min(this.limit,this.maxLimit))).length>0?(t=new tk({deviceId:this.deviceId,statLogs:e}),[4,this.requestQueue.send(t)]):[3,4];case 2:return n.sent(),this.queue=this.queue.slice(e.length),[4,this._save()];case 3:n.sent(),n.label=4;case 4:return this.limit=this.baseLimit,this.lastFlushedAt=Date.now(),[3,7];case 5:return n.sent(),this.limit=this.limit+20,[3,7];case 6:return this.isFlushing=!1,[7];case 7:return[2]}})})},e.prototype.init=function(e){return a(this,void 0,void 0,function(){var t,n=this;return u(this,function(r){switch(r.label){case 0:return this.key=e,this.cacheContext.localCacheEnabled?[4,this.cacheContext.preference.get(this.key)]:[3,4];case 1:return(t=r.sent())?(this.deviceId=t.deviceId,this.queue=t.statLogs.map(function(e){return new Y({type:e.stat_type,ts:e.ts,data:e.data})}),this.generation=t.generation,this.lastFlushedAt=t.lastFlushedAt,Date.now()-this.lastFlushedAt>=108e5&&this.queue.length>=this.minLimit?[4,eq(Math.min(Math.floor(18e4*Math.random()),100))]:[3,4]):[3,4];case 2:return r.sent(),[4,this._flush()];case 3:r.sent(),r.label=4;case 4:return this.dispatcher.on(function(e){if(e instanceof K){var t=e.statLog;n.put(t)}else e instanceof tw&&(n.enabledstate=e.enabled?tb.ENABLED:tb.DISABLED,n.isEnabled?n.queue.length>=n.limit&&n._flush():n.clear())}),[2]}})})},e.prototype.put=function(e){return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return this.enabledstate===tb.DISABLED?[3,3]:(this.queue.push(e),[4,this._save()]);case 1:return t.sent(),this.queue.length>=this.limit?[4,this._flush()]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.clear=function(){return a(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return this.queue=[],this.generation=1,[4,this._save()];case 1:return e.sent(),[2]}})})},e}();(tR=tO||(tO={}))[tR.NONE=0]="NONE",tR[tR.VERBOSE=1]="VERBOSE",tR[tR.DEBUG=2]="DEBUG",tR[tR.INFO=3]="INFO",tR[tR.WARN=4]="WARN",tR[tR.ERROR=5]="ERROR";var tR,tM,tU=function(){function e(){this.level=tO.WARN}return e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=tO.VERBOSE&&console.log.apply(console,d(["[verbose]"],l(e),!1))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=tO.DEBUG&&console.log.apply(console,d(["[debug]"],l(e),!1))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=tO.INFO&&console.log.apply(console,d(["[info]"],l(e),!1))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=tO.WARN&&console.warn.apply(console,d(["[warn]"],l(e),!1))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=tO.ERROR&&console.error.apply(console,d(["[error]"],l(e),!1))},e}(),tD={},tP=function(){function e(e,t){var n,r,i,s,o,a,u,c;if(this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map,!tD[e]){tD[e]=this;var l=null!==(n=t.options)&&void 0!==n?n:new A,d=this.sdkState={appId:t.appId,appVersion:null!==(r=t.appVersion)&&void 0!==r?r:"",appState:"foreground",userId:null,extensions:{},api:{host:null!==(i=t.apiHost)&&void 0!==i?i:"https://api-".concat(t.appId,".sendbird.com")},websocket:{host:null!==(s=t.websocketHost)&&void 0!==s?s:"wss://ws-".concat(t.appId,".sendbird.com"),pingerDisabled:!!t.noPingpong,pingInterval:null,pongTimeout:null,connectMaxRetry:2,reconnectMaxRetry:-1,reconnectRetryStrategy:new eF,responseTimeout:l.websocketResponseTimeout}};this.appInfo=null,this.subscribedUnreadMessageCount={all:0,customTypes:{},ts:0};var h=this.logger=new tU;this.logger.level=null!==(o=t.logLevel)&&void 0!==o?o:tO.WARN,this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map,this.cacheContext=new M({encryption:t.encryption,store:t.store,localCacheEnabled:null!==(a=t.localCacheEnabled)&&void 0!==a&&a}),this.debugMode=null!==(u=t.debugMode)&&void 0!==u&&u,this.maxSuperGroupChannelUnreadCount=p.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,this.useMemberInfoInMessage=l.useMemberInfoInMessage,this.typingIndicatorInvalidateTime=l.typingIndicatorInvalidateTime,this.typingIndicatorThrottle=l.typingIndicatorThrottle,this.concurrentCallLimit=null,this.backOffDelay=null;var f=this.dispatcher=new j,_=new U;this.requestQueue=new eE(e,{auth:_,sdkState:d,dispatcher:f,logger:h}),this.sessionManager=new eQ({auth:_,sdkState:d,dispatcher:f,requestQueue:this.requestQueue,logger:h}),this.connectionManager=new tN(e,{sdkState:d,cacheContext:this.cacheContext,connectionHandlers:this.connectionHandlers,dispatcher:f,sessionManager:this.sessionManager,websocketClient:this.requestQueue.commandRouter.websocketClient,disableAutoReconnect:null!==(c=t.disableAutoReconnect)&&void 0!==c&&c,logger:h}),this.statLogCollector=new tL({cacheContext:this.cacheContext,requestQueue:this.requestQueue,dispatcher:f})}return tD[e]}return e.of=function(e){if(tD[e])return tD[e];throw g.lostInstance},e}(),tx=function(){function e(){}return e.prototype.init=function(e,t){var n=t.sdkState,r=t.dispatcher,i=t.sessionManager,s=t.requestQueue,o=t.logger;t.onlineDetector;var a=t.cacheContext;this._iid=e,this._cacheContext=void 0===a?null:a,this._sdkState=n,this._dispatcher=r,this._sessionManager=i,this._requestQueue=s,this._logger=o},e}(),tj=function(e){function t(t){var n=e.call(this)||this;if(n.method=v.POST,n.path="".concat(eT),n.params=F({file:t.file,channel_url:t.channelUrl}),t.thumbnailSizes)for(var r=0;r<t.thumbnailSizes.length;r++){var i=t.thumbnailSizes[r],s=i.maxWidth,o=i.maxHeight;n.params["thumbnail".concat(r+1)]="".concat(s,",").concat(o)}return n.requestId=t.requestId,n}return s(t,e),t}(B),tq=function(e){function t(t,n){var r,i,s,o=this;return(o=e.call(this,t,n)||this).url=n.url,o.fileSize=null!==(r=n.file_size)&&void 0!==r?r:0,o.thumbnailSizes=null!==(i=n.thumbnails)&&void 0!==i?i:[],o.requireAuth=null!==(s=n.require_auth)&&void 0!==s&&s,o}return s(t,e),t}(Q),tF=function(e){function t(t,n){var r,i,s,o=this;return(o=e.call(this,t)||this).replyCount=0,o.mostRepliedUsers=null,o.lastRepliedAt=0,o.updatedAt=0,o.replyCount=null!==(r=n.reply_count)&&void 0!==r?r:0,o.mostRepliedUsers=n.hasOwnProperty("most_replies")&&w("object",n.most_replies)?n.most_replies.map(function(e){return new tE(o._iid,e)}):[],o.lastRepliedAt=null!==(i=n.last_replied_at)&&void 0!==i?i:0,o.updatedAt=null!==(s=n.updated_at)&&void 0!==s?s:0,o}return s(t,e),t.payloadify=function(t){return t?F(o(o({},e.payloadify.call(this,t)),{reply_count:t.replyCount,most_replies:Array.isArray(t.mostRepliedUsers)?t.mostRepliedUsers.map(function(e){return tE.payloadify(e)}):[],last_replied_at:t.lastRepliedAt,updated_at:t.updatedAt})):null},t}(e1);(tV=tM||(tM={})).ADD="add",tV.DELETE="delete";var tV,tG,tB,tQ=function(e){this.messageId=0,this.userId=null,this.key=null,this.operation=null,this.updatedAt=0;var t=I("string",e.msg_id)?parseInt(e.msg_id):e.msg_id,n=e.user_id,r=e.operation?e.operation.toLowerCase():null,i=e.reaction,s=e.updated_at;t&&I("string",n)&&I("string",r)&&T(tM,r)&&I("string",i)&&i&&I("number",s)&&(this.messageId=t,this.userId=n,this.key=i,this.operation=r,this.updatedAt=s)},tH=function(){function e(e){var t,n,r,i=e.key,s=null!==(r=d([],l(e.user_ids),!1))&&void 0!==r?r:[],o=e.updated_at;I("string",i)&&i&&w("string",s)&&s.length>0&&I("number",o)&&(this.key=i,this.userIds=s,this.updatedAt=o);var a={};try{for(var u=c(this.userIds),h=u.next();!h.done;h=u.next())a[h.value]=this.updatedAt}catch(e){t={error:e}}finally{try{h&&!h.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}this._version=a}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.userIds.length},enumerable:!1,configurable:!0}),e.payloadify=function(e){return e?F({key:e.key,user_ids:e.userIds,updated_at:e.updatedAt}):null},e.prototype.applyEvent=function(e){if(e.key===this.key&&this.updatedAt<=e.updatedAt){if(!this._version[e.userId]||this._version[e.userId]<=e.updatedAt){var t=this.userIds.indexOf(e.userId);switch(e.operation){case tM.ADD:t<0&&this.userIds.push(e.userId);break;case tM.DELETE:t>=0&&this.userIds.splice(t,1)}this._version[e.userId]=e.updatedAt}this.updatedAt=Math.max(this.updatedAt,e.updatedAt)}},e}(),tz=function(){function e(e){this.key=e.key,this.value=w("string",e.value)?d([],l(e.value),!1):[]}return e.payloadify=function(e){var t;return e?F({key:e.key,value:null!==(t=e.value)&&void 0!==t?t:[]}):null},e}(),tK=function(){function e(e){this.url=null,this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,this.url=e.url,e.hasOwnProperty("secure_url")&&(this.secureUrl=e.secure_url),e.hasOwnProperty("type")&&(this.type=e.type),e.hasOwnProperty("width")&&(this.width=e.width),e.hasOwnProperty("height")&&(this.height=e.height),e.hasOwnProperty("alt")&&(this.alt=e.alt)}return e.payloadify=function(e){var t,n;return e?F({url:e.url,secure_url:e.secureUrl,type:e.type,width:null!==(t=e.width)&&void 0!==t?t:0,height:null!==(n=e.height)&&void 0!==n?n:0,alt:e.alt}):null},e}(),tW=function(){function e(e){this.title=null,this.url=null,this.description=null,this.defaultImage=null,e.hasOwnProperty("og:title")&&(this.title=e["og:title"]),e.hasOwnProperty("og:url")&&(this.url=e["og:url"]),e.hasOwnProperty("og:description")&&(this.description=e["og:description"]),e.hasOwnProperty("og:image")&&(this.defaultImage=new tK(e["og:image"]))}return e.payloadify=function(e){return e?F({"og:title":e.title,"og:url":e.url,"og:description":e.description,"og:image":e.defaultImage?tK.payloadify(e.defaultImage):null}):null},e}(),tZ=function(){function e(e){var t,n;this.name=null,this.volume=0,this.name=null!==(t=e.name)&&void 0!==t?t:"default",this.volume=null!==(n=e.volume)&&void 0!==n?n:1}return e.payloadify=function(e){return e?F({name:e.name,volume:e.volume}):null},e}();(tY=tG||(tG={})).PENDING="pending",tY.SENT="sent",tY.FAILED="failed",tY.CANCELED="canceled",(tX=tB||(tB={})).PENDING="pending",tX.IN_QUEUE="in_queue",tX.SENT="sent",tX.FAILED="failed",tX.CANCELED="canceled",tX.REMOVED="removed";var tY,tX,tJ,t$=function(e){switch(e){case ef.BASE:return"";case ef.USER:return"MESG";case ef.FILE:return"FILE";case ef.ADMIN:return"ADMM"}},t0=function(e){function t(t,n){var r,i,s,o,a,u,c,l,d,h,f,p,_,v=this;(v=e.call(this,t)||this).channelUrl=null,v.channelType=ed.BASE,v.messageId=0,v.parentMessageId=null,v.parentMessage=null,v.silent=!1,v.isOperatorMessage=!1,v.messageType=ef.BASE,v.data=null,v.customType=null,v.mentionType=null,v.mentionedUsers=[],v.mentionedUserIds=[],v.mentionedMessageTemplate=null,v.threadInfo=null,v.reactions=[],v.metaArrays=[],v.ogMetaData=null,v.appleCriticalAlertOptions=null,v.createdAt=0,v.updatedAt=0,v.scheduledInfo=null,v._scheduledStatus=null,v.messageId=null!==(i=null!==(r=n.msg_id)&&void 0!==r?r:n.message_id)&&void 0!==i?i:0,v.channelUrl=n.channel_url,v.channelType=T(ed,n.channel_type)?n.channel_type:ed.GROUP,n.channel&&(n.channel.channel_url&&(v.channelUrl=n.channel.channel_url),n.channel.channel_type&&(v.channelType=n.channel.channel_type)),v.parentMessageId=null!==(s="string"==typeof n.parent_message_id?parseInt(n.parent_message_id):n.parent_message_id)&&void 0!==s?s:0,v.data=null!==(o=n.data)&&void 0!==o?o:"",v.customType=null!==(a=n.custom_type)&&void 0!==a?a:"",v.mentionType=T(ev,n.mention_type)?n.mention_type:null;var m=n.mentioned_users;v.mentionedUsers=m?m.map(function(e){return new tE(v._iid,e)}):null;var g=n.mentioned_user_ids;v.mentionedUserIds=null!=g?g:null,v.mentionedMessageTemplate=null!==(u=n.mentioned_message_template)&&void 0!==u?u:"",v.threadInfo=n.thread_info?new tF(v._iid,n.thread_info):null,v.reactions=n.reactions?n.reactions.map(function(e){return new tH(e)}):[];for(var y=null!==(c=n.metaarray)&&void 0!==c?c:{},b=null!==(l=n.metaarray_key_order)&&void 0!==l?l:Object.keys(y).sort(function(e,t){return e.localeCompare(t)}),E=0;E<b.length;E++){var I=b[E];v.metaArrays.push(new tz({key:I,value:y[I]||[]}))}return n.sorted_metaarray&&(v.metaArrays=n.sorted_metaarray.map(function(e){return new tz(e)})),v.ogMetaData=n.og_tag?new tW(n.og_tag):null,v.silent=null!==(d=n.silent)&&void 0!==d&&d,v.isOperatorMessage=null!==(h=n.is_op_msg)&&void 0!==h&&h,v.appleCriticalAlertOptions=n.apple_critical_alert_options?new tZ(n.apple_critical_alert_options):null,v.createdAt=null!==(p=null!==(f=n.created_at)&&void 0!==f?f:n.ts)&&void 0!==p?p:0,v.updatedAt=null!==(_=n.updated_at)&&void 0!==_?_:0,"number"==typeof n.scheduled_message_id&&"number"==typeof n.scheduled_at&&n.scheduled_status&&(v.scheduledInfo={scheduledMessageId:n.scheduled_message_id,scheduledAt:n.scheduled_at},v._scheduledStatus=n.scheduled_status),v}return s(t,e),t.payloadify=function(t){var n,r,i,s;return t?F(o(o({},e.payloadify.call(this,t)),{channel_url:t.channelUrl,channel_type:t.channelType,message_id:t.messageId,type:t$(t.messageType),parent_message_id:t.parentMessageId,data:t.data,custom_type:t.customType,mention_type:t.mentionType,mentioned_user_ids:t.mentionedUserIds,mentioned_users:null===(n=t.mentionedUsers)||void 0===n?void 0:n.map(function(e){return tE.payloadify(e)}),mentioned_message_template:t.mentionedMessageTemplate,thread_info:t.threadInfo?tF.payloadify(t.threadInfo):null,reactions:t.reactions.map(function(e){return tH.payloadify(e)}),sorted_metaarray:null===(r=t.metaArrays)||void 0===r?void 0:r.map(function(e){return tz.payloadify(e)}),og_tag:tW.payloadify(t.ogMetaData),silent:t.silent,is_op_msg:t.isOperatorMessage,apple_critical_alert_options:tZ.payloadify(t.appleCriticalAlertOptions),created_at:t.createdAt,updated_at:t.updatedAt,scheduled_message_id:null===(i=t.scheduledInfo)||void 0===i?void 0:i.scheduledMessageId,scheduled_at:null===(s=t.scheduledInfo)||void 0===s?void 0:s.scheduledAt,scheduled_status:t._scheduledStatus})):null},t.prototype.isIdentical=function(e){return this.messageId===e.messageId},t.prototype.isEqual=function(e){return E(this,e)},t.prototype.isUserMessage=function(){return this.messageType===ef.USER},t.prototype.isFileMessage=function(){return this.messageType===ef.FILE},t.prototype.isAdminMessage=function(){return this.messageType===ef.ADMIN},t.prototype.serialize=function(){return tv(this)},t.prototype.getMetaArraysByKeys=function(e){return this.metaArrays.filter(function(t){return e.includes(t.key)})},t.prototype.applyThreadInfoUpdateEvent=function(e){return this.parentMessageId===e.targetMessageId&&(this.threadInfo=e.threadInfo),!1},t.prototype.applyReactionEvent=function(e){if(this.messageId===e.messageId){for(var t=!1,n=0;n<this.reactions.length;n++)if(this.reactions[n].key===e.key){this.reactions[n].applyEvent(e),this.reactions[n].isEmpty&&this.reactions.splice(n,1),t=!0;break}t||"add"!==e.operation||this.reactions.push(new tH(tH.payloadify({key:e.key,userIds:[e.userId],updatedAt:e.updatedAt})))}},t.prototype.applyParentMessage=function(e){if(this.parentMessageId===e.messageId){var t=this.parentMessage.updatedAt;if(e.updatedAt>=t)return this.parentMessage=e,!0}return!1},t}(e1),t1=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.role=null,r.isBlockedByMe=!1,r.role=T(eh,n.role)?n.role:eh.NONE,n.hasOwnProperty("is_blocked_by_me")&&(r.isBlockedByMe=n.is_blocked_by_me),r}return s(t,e),t.payloadify=function(t){return t?F(o(o({},e.payloadify.call(this,t)),{role:t.role,is_blocked_by_me:t.isBlockedByMe})):null},t}(tE),t2=function(e){function t(t,n){var r,i,s,o,a=this;if((a=e.call(this,t,n)||this).sender=null,a.reqId="",a.replyToChannel=!1,a.sendingStatus=null,a.errorCode=0,a.sender=n.user?new t1(a._iid,n.user):n.sender_id,a.reqId=null!==(i=null!==(r=n.req_id)&&void 0!==r?r:n.request_id)&&void 0!==i?i:"",a.replyToChannel=null!==(s=n.is_reply_to_channel)&&void 0!==s&&s,n.request_state&&T(ey,n.request_state)&&(a.sendingStatus=n.request_state),!a.sendingStatus){if(a.messageId>0)a.sendingStatus=ey.SUCCEEDED;else if(a.scheduledInfo)switch(a._scheduledStatus=n.scheduled_status,n.scheduled_status){case tB.SENT:case tB.IN_QUEUE:a.sendingStatus=ey.SUCCEEDED;break;case tB.PENDING:a.sendingStatus=ey.SCHEDULED;break;case tB.FAILED:case tB.REMOVED:a.sendingStatus=ey.FAILED;break;case tB.CANCELED:a.sendingStatus=ey.CANCELED}else a.sendingStatus=ey.PENDING}return a.errorCode=null!==(o=n.error_code)&&void 0!==o?o:0,a}return s(t,e),t.payloadify=function(t){return t?F(o(o({},e.payloadify.call(this,t)),{user:t1.payloadify(t.sender),req_id:t.reqId,is_reply_to_channel:t.replyToChannel,request_state:t.sendingStatus,error_code:t.errorCode})):null},Object.defineProperty(t.prototype,"isResendable",{get:function(){var e;return this.sendingStatus===ey.FAILED&&(e=this.errorCode)>0&&y.indexOf(e)>=0},enumerable:!1,configurable:!0}),t.prototype.isIdentical=function(e){return this.messageId>0&&e.messageId>0?this.messageId===e.messageId:this.reqId===e.reqId},t}(t0),t4=function(){function e(e){var t,n;this.url=null,this.width=0,this.height=0,this.realWidth=0,this.realHeight=0,this.url=e.url,this.width=e.width,this.height=e.height,this.realWidth=null!==(t=e.real_width)&&void 0!==t?t:e.width,this.realHeight=null!==(n=e.real_height)&&void 0!==n?n:e.height}return e.payloadify=function(e){return e?F({url:"",width:e.maxWidth,height:e.maxHeight,real_width:0,real_height:0}):null},Object.defineProperty(e.prototype,"plainUrl",{get:function(){return this.url.split("?auth=")[0]},enumerable:!1,configurable:!0}),e}(),t3={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:ep.ALL,customTypesFilter:null,senderUserIdsFilter:null,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1},t5=function(e){return I("number",e.prevResultSize)&&I("number",e.nextResultSize)&&I("boolean",e.isInclusive)&&I("boolean",e.reverse)&&I("string",e.messageTypeFilter)&&T(ep,e.messageTypeFilter)&&w("string",e.customTypesFilter,!0)&&w("string",e.senderUserIdsFilter,!0)&&I("boolean",e.includeMetaArray)&&I("boolean",e.includeReactions)&&I("boolean",e.includeParentMessageInfo)},t7=function(e){function t(t,n){var r,i,s,a,u=this;if((u=e.call(this,t,n)||this).message=null,u.translations={},u.message=null!==(r=n.message)&&void 0!==r?r:"",u.messageType=ef.ADMIN,u.translations=null!==(i=n.translations)&&void 0!==i?i:{},n.parent_message_info){var c=n.parent_message_info,l=o(o({},c),{message_id:u.parentMessageId,channel_url:u.channelUrl,channel_type:u.channelType,file:c.file,url:null===(s=c.file)||void 0===s?void 0:s.url,require_auth:null===(a=c.file)||void 0===a?void 0:a.require_auth});u.parentMessage=nu(t,l)}return u}return s(t,e),t.payloadify=function(t){return t?F(o(o({},e.payloadify.call(this,t)),{message:t.message,translations:t.translations,parent_message_info:na(t.parentMessage)})):null},t.prototype.getThreadedMessagesByTimestamp=function(e,t){return a(this,void 0,void 0,function(){var n;return u(this,function(r){switch(r.label){case 0:return n=o(o({},t3),t),tg(this.messageId>0&&I("number",e)&&t5(n)).throw(g.invalidParameters),[4,nq.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}})})},t}(t0),t6=function(){function e(e){var t,n;this.type=null,this.vendor=null,this.detail={},this.type=null!==(t=e.type)&&void 0!==t?t:"",this.vendor=null!==(n=e.vendor)&&void 0!==n?n:"",e.hasOwnProperty("detail")&&I("object",e.detail)&&!Array.isArray(e.detail)&&(this.detail=e.detail)}return e.payloadify=function(e){return e?F({type:e.type,vendor:e.vendor,detail:e.detail}):null},e}();(t8=tJ||(tJ={})).OPEN="open",t8.CLOSED="closed";var t8,t9,ne="removed",nt=function(e){switch(e){case tJ.OPEN:return tJ.OPEN;case tJ.CLOSED:return tJ.CLOSED}},nn=function(e){return!e||e.text&&I("string",e.text)},nr=function(e){return w("string",e)&&e.every(function(e){return""!==e.trim()})},ni=function(e){function t(t,n){var r,i,s,o,a,u,c,l=this;return(l=e.call(this,t)||this).pollId=0,l.id=0,l.text=null,l.voteCount=0,l.createdBy=null,l.createdAt=0,l.updatedAt=0,l._lastVotedAt=0,l.pollId=null!==(r=n.poll_id)&&void 0!==r?r:0,l.id=null!==(i=n.id)&&void 0!==i?i:0,l.text=null!==(s=n.text)&&void 0!==s?s:null,l.voteCount=null!==(o=n.vote_count)&&void 0!==o?o:0,l.createdBy=null!==(a=n.created_by)&&void 0!==a?a:null,l.createdAt=null!==(u=n.created_at)&&void 0!==u?u:0,l.updatedAt=null!==(c=n.updated_at)&&void 0!==c?c:0,l}return s(t,e),t.payloadify=function(t){return t?F(o(o({},e.payloadify.call(this,t)),{vote_count:t.voteCount,poll_id:t.pollId,text:t.text,created_at:t.createdAt,id:t.id,created_by:t.createdBy,updated_at:t.updatedAt})):null},t}(e1),ns=function(e){function t(t,n){var r,i,s,o,a,u,c,l,d,h,f,p,_,v=this;return(v=e.call(this,t)||this).id=0,v.title=null,v.createdAt=0,v.updatedAt=0,v.closeAt=-1,v.status=tJ.CLOSED,v.messageId=0,v.data=null,v.voterCount=-1,v.options=[],v.createdBy=null,v.allowUserSuggestion=!1,v.allowMultipleVotes=!1,v.votedPollOptionIds=[],v.id=null!==(r=n.id)&&void 0!==r?r:0,v.title=null!==(i=n.title)&&void 0!==i?i:null,v.createdAt=null!==(s=n.created_at)&&void 0!==s?s:0,v.updatedAt=null!==(o=n.updated_at)&&void 0!==o?o:0,v.closeAt=null!==(a=n.close_at)&&void 0!==a?a:-1,v.status=null!==(u=nt(n.status))&&void 0!==u?u:tJ.CLOSED,v.messageId=null!==(c=n.message_id)&&void 0!==c?c:0,v.data=null!==(l=n.data)&&void 0!==l?l:null,v.voterCount=null!==(d=n.voter_count)&&void 0!==d?d:-1,v.options=n.options?n.options.map(function(e){return new ni(v._iid,e)}):[],v.createdBy=null!==(h=n.created_by)&&void 0!==h?h:null,v.allowUserSuggestion=null!==(f=n.allow_user_suggestion)&&void 0!==f&&f,v.allowMultipleVotes=null!==(p=n.allow_multiple_votes)&&void 0!==p&&p,v.votedPollOptionIds=null!==(_=n.voted_option_ids)&&void 0!==_?_:[],v}return s(t,e),t.prototype._applyPollUpdatePayload=function(e){var t,n,r,i,s,o,a,u,c=this;this.title=null!==(t=e.title)&&void 0!==t?t:this.title,this.updatedAt=null!==(n=e.updated_at)&&void 0!==n?n:this.updatedAt,this.closeAt=null!==(r=e.close_at)&&void 0!==r?r:this.closeAt,this.status=null!==(i=nt(e.status))&&void 0!==i?i:this.status,this.data=null!==(s=e.data)&&void 0!==s?s:this.data,this.voterCount=null!==(o=e.voter_count)&&void 0!==o?o:this.voterCount,this.options=e.options?e.options.map(function(e){return new ni(c._iid,e)}):this.options,this.allowUserSuggestion=null!==(a=e.allow_user_suggestion)&&void 0!==a?a:this.allowUserSuggestion,this.allowMultipleVotes=null!==(u=e.allow_multiple_votes)&&void 0!==u?u:this.allowMultipleVotes},t.payloadify=function(t){return t?F(o(o({},e.payloadify.call(this,t)),{id:t.id,title:t.title,created_at:t.createdAt,updated_at:t.updatedAt,close_at:t.closeAt,status:t.status,message_id:t.messageId,data:t.data,voter_count:t.voterCount,options:t.options.map(function(e){return ni.payloadify(e)}),created_by:t.createdBy,allow_user_suggestion:t.allowUserSuggestion,allow_multiple_votes:t.allowMultipleVotes,voted_option_ids:t.votedPollOptionIds})):null},t.prototype.applyPollUpdateEvent=function(e){var t=e._payload.poll;return!(!t||this.id!==t.id||t.updated_at<this.updatedAt)&&(this._applyPollUpdatePayload(t),!0)},t.prototype.applyPollVoteEvent=function(e){if(this.id!==e.pollId)return!1;var t=this.options,n=t.map(function(e){return e.id}),r=e._payload,i=Math.floor(r.ts/1e3);return r.updated_vote_counts.forEach(function(e){var r=n.indexOf(e.option_id);if(r>-1){var s=t[r];i>s._lastVotedAt&&(s.voteCount=e.vote_count,s._lastVotedAt=i)}}),r.req_id&&r.voted_option_ids&&(this.votedPollOptionIds=r.voted_option_ids),!0},t}(e1),no=function(e){function t(t,n){var r,i,s,a,u,l,d,h=this;if((h=e.call(this,t,n)||this).message="",h.messageParams=null,h.translations={},h.translationTargetLanguages=[],h.messageSurvivalSeconds=-1,h.plugins=[],h._poll=null,h.message=n.message,h.messageType=ef.USER,h.translations=null!==(s=n.translations)&&void 0!==s?s:{},h.translationTargetLanguages=null!==(a=n.target_langs)&&void 0!==a?a:[],0===Object.keys(h.translations).length&&h.translationTargetLanguages.length>0)try{for(var f=c(h.translationTargetLanguages),p=f.next();!p.done;p=f.next()){var _=p.value;h.translations[_]=""}}catch(e){r={error:e}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}if(h.messageSurvivalSeconds=null!==(u=n.message_survival_seconds)&&void 0!==u?u:-1,h.plugins=n.plugins?n.plugins.map(function(e){return new t6(e)}):[],h._poll=n.poll?new ns(h._iid,n.poll):null,n.parent_message_info){var v=n.parent_message_info,m=o(o({},v),{created_at:v.ts,message_id:h.parentMessageId,channel_url:h.channelUrl,channel_type:h.channelType,file:v.file,url:null===(l=v.file)||void 0===l?void 0:l.url,require_auth:null===(d=v.file)||void 0===d?void 0:d.require_auth});h.parentMessage=nu(t,F(m))}return h}return s(t,e),t.payloadify=function(t){return t?F(o(o({},e.payloadify.call(this,t)),{message:t.message,translations:t.translations,message_survival_seconds:t.messageSurvivalSeconds,plugins:t.plugins.map(function(e){return t6.payloadify(e)}),poll:ns.payloadify(t._poll),parent_message_info:na(t.parentMessage)})):null},t.prototype.getThreadedMessagesByTimestamp=function(e,t){return a(this,void 0,void 0,function(){var n;return u(this,function(r){switch(r.label){case 0:return n=o(o({},t3),t),tg(this.messageId>0&&I("number",e)&&t5(n)).throw(g.invalidParameters),[4,nq.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}})})},t.prototype.applyPoll=function(e){return!(this._poll&&this._poll.id===e.id&&this._poll.updatedAt>e.updatedAt)&&(this._poll=e,!0)},Object.defineProperty(t.prototype,"poll",{get:function(){return this._poll},enumerable:!1,configurable:!0}),t}(t2),na=function(e){if(e)switch(e.messageType){case ef.USER:return no.payloadify(e);case ef.FILE:return nc.payloadify(e);case ef.ADMIN:return t7.payloadify(e)}return null},nu=function(e,t){switch(t.type){case"MESG":return new no(e,t);case"FILE":return new nc(e,t);case"ADMM":case"BRDM":return new t7(e,t)}return null},nc=function(e){function t(t,n){var r,i,s,a,u,c,l,d,h,f,p,_,v,m,g,y=this;(y=e.call(this,t,n)||this).messageParams=null,y.plainUrl="",y.requireAuth=!1,y.name=null,y.size=0,y.type=null,y.thumbnails=[],y.messageSurvivalSeconds=-1,y.messageType=ef.FILE;var b=null!==(r=n.file)&&void 0!==r?r:null;if(y.plainUrl=(null!==(s=null!==(i=null==b?void 0:b.url)&&void 0!==i?i:n.url)&&void 0!==s?s:"").split("?auth=")[0],y.name=null!==(u=null!==(a=null==b?void 0:b.name)&&void 0!==a?a:n.name)&&void 0!==u?u:"File",y.size=null!==(l=null!==(c=null==b?void 0:b.size)&&void 0!==c?c:n.size)&&void 0!==l?l:0,y.data=null!==(h=null!==(d=null==b?void 0:b.data)&&void 0!==d?d:n.custom)&&void 0!==h?h:"",y.type=b?null!==(f=b.type)&&void 0!==f?f:"":null!==(p=n.type)&&void 0!==p?p:"",y.requireAuth=null!==(_=n.require_auth)&&void 0!==_&&_,y.thumbnails=n.thumbnails?n.thumbnails.map(function(e){return new t4(o(o({},e),{url:"".concat(e.url.split("?auth=")[0]).concat(y.requireAuth?"?auth=".concat(e$(y._iid)):"")}))}):[],y.messageSurvivalSeconds=null!==(v=n.message_survival_seconds)&&void 0!==v?v:-1,n.parent_message_info){var E=n.parent_message_info,I=o(o({},E),{message_id:y.parentMessageId,channel_url:y.channelUrl,channel_type:y.channelType,file:E.file,url:null===(m=E.file)||void 0===m?void 0:m.url,require_auth:null===(g=E.file)||void 0===g?void 0:g.require_auth});y.parentMessage=nu(t,I)}return y}return s(t,e),t.payloadify=function(t){return t?F(o(o({},e.payloadify.call(this,t)),{url:t.plainUrl,require_auth:t.requireAuth,file:{name:t.name,size:t.size,type:t.type,data:t.data},thumbnails:t.thumbnails.map(function(e){return{url:e.url,width:e.width,height:e.height,real_width:e.realWidth,real_height:e.realHeight}}),message_survival_seconds:t.messageSurvivalSeconds,parent_message_info:na(t.parentMessage)})):null},Object.defineProperty(t.prototype,"url",{get:function(){return this.requireAuth?"".concat(this.plainUrl,"?auth=").concat(e$(this._iid)):this.plainUrl},enumerable:!1,configurable:!0}),t.prototype.getThreadedMessagesByTimestamp=function(e,t){return a(this,void 0,void 0,function(){var n;return u(this,function(r){switch(r.label){case 0:return n=o(o({},t3),t),tg(this.messageId>0&&I("number",e)&&t5(n)).throw(g.invalidParameters),[4,nq.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}})})},t}(t2),nl=function(e){function t(t){var n,r,i,s=[];return t.mentionType===ev.USERS&&(t.mentionedUserIds?s=t.mentionedUserIds:t.mentionedUsers&&(s=t.mentionedUsers.map(function(e){return e.userId}))),e.call(this,{code:"FILE",ackRequired:!0,payload:F({channel_url:t.channelUrl,url:t.url,name:null!==(n=t.fileName)&&void 0!==n?n:"",type:null!==(r=t.mimeType)&&void 0!==r?r:"",size:null!==(i=t.fileSize)&&void 0!==i?i:0,custom:t.data,custom_type:t.customType,thumbnails:t.thumbnailSizes,require_auth:t.requireAuth,metaarray:t.metaArrays,mention_type:t.mentionType,mentioned_user_ids:s,push_option:t.pushNotificationDeliveryOption&&t.pushNotificationDeliveryOption!==eg.DEFAULT?t.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:t.appleCriticalAlertOptions,silent:t.silent,reply_to_channel:t.isReplyToChannel,parent_message_id:t.parentMessageId>0?t.parentMessageId:null,req_id:t.reqId})})||this}return s(t,e),t}(ee),nd=function(e){function t(t){var n,r=this;r=e.call(this)||this;var i=[];return t.mentionType===ev.USERS&&(t.mentionedUserIds?i=t.mentionedUserIds:t.mentionedUsers&&(i=t.mentionedUsers.map(function(e){return e.userId}))),r.method=v.POST,r.path="".concat(e4(t.channelType),"/").concat(encodeURIComponent(t.channelUrl),"/messages"),r.params=F({message_type:ef.FILE,user_id:t.userId,url:t.fileUrl,mention_type:t.mentionType,mentioned_user_ids:i,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,data:t.data,custom_type:t.customType,thumbnails:t.thumbnailSizes.map(function(e){return t4.payloadify(e)}),require_auth:t.requireAuth,sorted_metaarray:null===(n=t.metaArrays)||void 0===n?void 0:n.map(function(e){return tz.payloadify(e)}),push_option:t.pushNotificationDeliveryOption,parent_message_id:t.parentMessageId>0?t.parentMessageId:null,apple_critical_alert_options:tZ.payloadify(t.appleCriticalAlertOptions),reply_to_channel:t.isReplyToChannel,req_id:t.reqId}),r}return s(t,e),t}(B),nh=function(e){function t(t,n,r){var i,s,o,a=this;(a=e.call(this,t,"FILE",r)||this).message=new nc(t,r);var u=tP.of(t).sdkState;return a.isMentioned=e5(a.message.mentionType,null!==(i=a.message.mentionedUserIds)&&void 0!==i?i:null===(s=a.message.mentionedUsers)||void 0===s?void 0:s.map(function(e){return e.userId}),u.userId),a.forceUpdateLastMessage=null!==(o=r.force_update_last_message)&&void 0!==o&&o,a}return s(t,e),t}($),nf=function(e){function t(t,n){var r,i,s=this;(s=e.call(this,t,n)||this).message=new nc(t,n);var o=tP.of(t).sdkState;return s.isMentioned=e5(s.message.mentionType,null!==(r=s.message.mentionedUserIds)&&void 0!==r?r:s.message.mentionedUsers.map(function(e){return e.userId}),o.userId),s.forceUpdateLastMessage=null!==(i=n.force_update_last_message)&&void 0!==i&&i,s}return s(t,e),t}(Q);(np=t9||(t9={}))[np.PENDING=0]="PENDING",np[np.UPLOADING=1]="UPLOADING",np[np.UPLOADED=2]="UPLOADED",np[np.SENDING=3]="SENDING",np[np.FAILED=4]="FAILED";var np,n_,nv=function(){function e(e,t){var n=t.sdkState,r=t.dispatcher,i=t.requestQueue,s=t.onlineDetector,o=t.cacheContext,a=this;this._queueMap=new Map,this._connectionState=null,this._onlineDetector=null,this._iid=e,this._sdkState=n,this._requestQueue=i,this._cacheContext=o,this._dispatcher=r,this._dispatcher.on(function(e){e instanceof eb&&(a._connectionState=e.stateType)}),this._onlineDetector=s}return Object.defineProperty(e.prototype,"_shouldSendThroughWebSocket",{get:function(){return this._connectionState===es.CONNECTED||this._connectionState===es.CONNECTING||this._connectionState===es.RECONNECTING},enumerable:!1,configurable:!0}),e.prototype._sendFileMessage=function(e,t){return a(this,void 0,void 0,function(){var n;return u(this,function(r){switch(r.label){case 0:return this._shouldSendThroughWebSocket?(n=new nl(o(o({channelUrl:e.url,channelType:e.channelType,url:t.params.fileUrl,requireAuth:t.requireAuth},t.params),{reqId:t.requestId})),[4,this._requestQueue.send(n)]):[3,2];case 1:return[2,r.sent().as(nh).message];case 2:return n=new nd(o(o({channelUrl:e.url,channelType:e.channelType,url:t.params.fileUrl,userId:this._sdkState.userId,requireAuth:t.requireAuth},t.params),{reqId:t.requestId})),[4,this._requestQueue.send(n)];case 3:return[2,r.sent().as(nf).message]}})})},e.prototype._resolveMessageQueue=function(e){return a(this,void 0,void 0,function(){var t,n,r,i,s,o,a,l,d,f,p;return u(this,function(u){switch(u.label){case 0:if(!(t=this._queueMap.get(e.url)))return[3,21];if(t.isResolving)return[3,20];t.isResolving=!0,n=[],r=!0,u.label=1;case 1:u.trys.push([1,15,16,17]),s=(i=c(t.messageQueue)).next(),u.label=2;case 2:if(s.done)return[3,14];switch((o=s.value).state){case t9.PENDING:case t9.UPLOADING:return[3,3];case t9.UPLOADED:return[3,4];case t9.FAILED:return[3,12]}return[3,13];case 3:return r=!1,n.push(o),[3,13];case 4:if(!r)return[3,10];u.label=5;case 5:return u.trys.push([5,8,,9]),o.state=t9.SENDING,[4,this._sendFileMessage(e,o)];case 6:return a=u.sent(),o.deferred.resolve(a),[4,eq(100)];case 7:return u.sent(),[3,9];case 8:return l=u.sent(),o.deferred.reject(l),[3,9];case 9:return[3,11];case 10:n.push(o),u.label=11;case 11:return[3,13];case 12:return o.deferred.reject(o.error.code===h.REQUEST_CANCELED?g.fileUploadCanceled:o.error),[3,13];case 13:return s=i.next(),[3,2];case 14:return[3,17];case 15:return f={error:u.sent()},[3,17];case 16:try{s&&!s.done&&(p=i.return)&&p.call(i)}finally{if(f)throw f.error}return[7];case 17:return d=t.isResolveRequestPending,t.messageQueue=n,t.isResolving=!1,t.isResolveRequestPending=!1,d?[4,this._resolveMessageQueue(e)]:[3,19];case 18:u.sent(),u.label=19;case 19:return[3,21];case 20:t.isResolveRequestPending=!0,u.label=21;case 21:return[2]}})})},e.prototype._uploadNextPendingItem=function(e){return a(this,void 0,void 0,function(){var t,n,r,i,s,o,a,c,l,d,f,p,_;return u(this,function(u){switch(u.label){case 0:return(n=(t=this._queueMap.get(e.url)).messageQueue.find(function(e){return e.state===t9.PENDING}))?N(n.params.file)?t.uploadQueue.length<6?(n.state=t9.UPLOADING,t.uploadQueue.push(n),[4,this._onlineDetector.isOnline()]):[3,10]:[3,11]:[3,13];case 1:if(!u.sent())return[3,8];u.label=2;case 2:return u.trys.push([2,4,5,7]),r=new tj({file:n.params.file,channelUrl:e.url,thumbnailSizes:n.params.thumbnailSizes,requestId:n.requestId}),[4,this._requestQueue.send(r)];case 3:return s=(i=u.sent().as(tq)).url,a=void 0===(o=i.fileSize)?n.params.fileSize:o,l=void 0===(c=i.thumbnailSizes)?n.params.thumbnailSizes:c,f=void 0!==(d=i.requireAuth)&&d,n.params.fileUrl=s,n.params.fileSize=a,n.params.thumbnailSizes=l,n.params.requireAuth=f,n.requireAuth=f,n.state=t9.UPLOADED,[3,7];case 4:return(p=u.sent()).code===h.REQUEST_FAILED?n.error=new g({code:h.NETWORK_ERROR,message:"Failed to upload a file."}):n.error=p,n.state=t9.FAILED,[3,7];case 5:return(_=t.uploadQueue.findIndex(function(e){return e.requestId===n.requestId}))>=0&&(t.uploadQueue.splice(_,1),this._uploadNextPendingItem(e)),[4,this._resolveMessageQueue(e)];case 6:return u.sent(),[7];case 7:return[3,10];case 8:return n.state=t9.FAILED,n.error=g.connectionRequired,(_=t.uploadQueue.findIndex(function(e){return e.requestId===n.requestId}))>=0&&(t.uploadQueue.splice(_,1),this._uploadNextPendingItem(e)),[4,this._resolveMessageQueue(e)];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return n.params.thumbnailSizes=[],n.state=t9.UPLOADED,[4,this._resolveMessageQueue(e)];case 12:u.sent(),u.label=13;case 13:return[2]}})})},e.prototype.request=function(e,t,n){var r,i,s;return a(this,void 0,void 0,function(){var o;return u(this,function(a){return o=new eu,N(n.file)&&(n.fileName=null!==(r=n.fileName)&&void 0!==r?r:n.file.name,n.mimeType=null!==(i=n.mimeType)&&void 0!==i?i:n.file.type,n.fileSize=null!==(s=n.fileSize)&&void 0!==s?s:n.file.size),this._queueMap.has(e.url)||this._queueMap.set(e.url,{messageQueue:[],uploadQueue:[],isResolving:!1,isResolveRequestPending:!1}),this._queueMap.get(e.url).messageQueue.push({requestId:t,params:n,state:t9.PENDING,deferred:o,requireAuth:n.requireAuth}),this._uploadNextPendingItem(e),[2,o.promise]})})},e.prototype.cancel=function(e,t){void 0===t&&(t=null);var n,r,i=this._queueMap.get(e.url);if(i){var s=t?[i.messageQueue.find(function(e){return e.requestId===t})]:d([],l(i.messageQueue),!1);try{for(var o=c(s),a=o.next();!a.done;a=o.next()){var u=a.value;if(u)switch(u.state){case t9.PENDING:u.state=t9.FAILED,u.error=g.requestCanceled,this._resolveMessageQueue(e);break;case t9.UPLOADING:this._requestQueue.cancel(u.requestId)}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}},e}(),nm={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:ep.ALL,customTypesFilter:null,senderUserIdsFilter:null,replyType:em.NONE,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1,showSubchannelMessagesOnly:!1},ng=function(e){return I("number",e.prevResultSize)&&I("number",e.nextResultSize)&&I("boolean",e.isInclusive)&&I("boolean",e.reverse)&&I("string",e.messageTypeFilter)&&T(ep,e.messageTypeFilter)&&w("string",e.customTypesFilter,!0)&&w("string",e.senderUserIdsFilter,!0)&&T(em,e.replyType)&&I("boolean",e.includeMetaArray)&&I("boolean",e.includeReactions)&&I("boolean",e.includeParentMessageInfo)&&I("boolean",e.includeThreadInfo)&&I("boolean",e.showSubchannelMessagesOnly)},ny={replyType:em.NONE,includeReactions:!1,includeThreadInfo:!1,includeMetaArray:!1,includeParentMessageInfo:!1},nb=function(e){return T(em,e.replyType)&&I("boolean",e.includeReactions)&&I("boolean",e.includeMetaArray)&&I("boolean",e.includeParentMessageInfo)&&I("boolean",e.includeThreadInfo)};(nE=n_||(n_={})).UNKNOWN="UNKNOWN",nE.EVENT_MESSAGE_SENT_SUCCESS="EVENT_MESSAGE_SENT_SUCCESS",nE.EVENT_MESSAGE_SENT_FAILED="EVENT_MESSAGE_SENT_FAILED",nE.EVENT_MESSAGE_SENT_PENDING="EVENT_MESSAGE_SENT_PENDING",nE.EVENT_MESSAGE_RECEIVED="EVENT_MESSAGE_RECEIVED",nE.EVENT_MESSAGE_UPDATED="EVENT_MESSAGE_UPDATED",nE.EVENT_MESSAGE_DELETED="EVENT_MESSAGE_DELETED",nE.EVENT_MESSAGE_READ="EVENT_MESSAGE_READ",nE.EVENT_MESSAGE_DELIVERED="EVENT_MESSAGE_DELIVERED",nE.EVENT_MESSAGE_REACTION_UPDATED="EVENT_MESSAGE_REACTION_UPDATED",nE.EVENT_MESSAGE_THREADINFO_UPDATED="EVENT_MESSAGE_THREADINFO_UPDATED",nE.EVENT_MESSAGE_OFFSET_UPDATED="EVENT_MESSAGE_OFFSET_UPDATED",nE.REQUEST_MESSAGE="REQUEST_MESSAGE",nE.EVENT_POLL_UPDATED="EVENT_POLL_UPDATED",nE.EVENT_POLL_VOTED="EVENT_POLL_VOTED",nE.SYNC_POLL_CHANGELOGS="SYNC_POLL_CHANGELOGS",nE.REQUEST_RESEND_MESSAGE="REQUEST_RESEND_MESSAGE",nE.REQUEST_THREADED_MESSAGE="REQUEST_THREADED_MESSAGE",nE.REQUEST_MESSAGE_CHANGELOGS="REQUEST_MESSAGE_CHANGELOGS",nE.SYNC_MESSAGE_FILL="SYNC_MESSAGE_FILL",nE.SYNC_MESSAGE_BACKGROUND="SYNC_MESSAGE_BACKGROUND",nE.SYNC_MESSAGE_CHANGELOGS="SYNC_MESSAGE_CHANGELOGS",nE.LOCAL_MESSAGE_PENDING_CREATED="LOCAL_MESSAGE_PENDING_CREATED",nE.LOCAL_MESSAGE_FAILED="LOCAL_MESSAGE_FAILED",nE.LOCAL_MESSAGE_CANCELED="LOCAL_MESSAGE_CANCELED",nE.LOCAL_MESSAGE_RESEND_STARTED="LOCAL_MESSAGE_RESEND_STARTED";var nE,nI,nT=function(e){return e.startsWith("EVENT_")||e===n_.SYNC_MESSAGE_FILL||e===n_.SYNC_MESSAGE_CHANGELOGS||e===n_.SYNC_POLL_CHANGELOGS},nS=function(e){function t(t){var n=t.messages,r=t.source,i=e.call(this)||this;return i.messages=n,i.source=r,i}return s(t,e),t}(q),nw=function(e){function t(t){var n=t.messageIds,r=t.source,i=e.call(this)||this;return i.messageIds=n,i.source=r,i}return s(t,e),t}(q),nC=function(e){function t(t){var n=t.reqId,r=t.source,i=e.call(this)||this;return i.reqId=n,i.source=r,i}return s(t,e),t}(q),nN=function(e){function t(t){var n=t.polls,r=t.source,i=e.call(this)||this;return i.polls=n,i.source=r,i}return s(t,e),t}(q),nk=function(e){function t(t){var n=t.event,r=t.source,i=e.call(this)||this;return i.event=n,i.source=r,i}return s(t,e),t}(q),nA=function(e){function t(t){var n=t.event,r=t.source,i=e.call(this)||this;return i.event=null,i.source=null,i.event=n,i.source=r,i}return s(t,e),t}(q),nO=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.messageId,s=t.includeMetaArray,o=t.includeReactions,a=t.includeThreadInfo,u=t.includeParentMessageInfo,c=e.call(this)||this;return c.method=v.GET,c.path="".concat(e4(n),"/").concat(encodeURIComponent(r),"/messages/").concat(encodeURIComponent(i)),c.params={is_sdk:!0,with_sorted_meta_array:s,include_reactions:o,include_thread_info:a,include_parent_message_info:u,include_poll_details:!0},c}return s(t,e),t}(B),nL=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=n?nu(t,o({},n)):null,r}return s(t,e),t}(Q),nR=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.timestamp,s=t.token,o=t.prevResultSize,a=t.nextResultSize,u=t.isInclusive,c=t.reverse,l=t.messageTypeFilter,d=t.customTypesFilter,h=t.senderUserIdsFilter,f=t.replyType,p=t.includeMetaArray,_=t.includeReactions,m=t.parentMessageId,g=t.includeThreadInfo,y=t.includeParentMessageInfo,b=t.showSubchannelMessagesOnly,E=e.call(this)||this;return E.method=v.GET,E.path="".concat(e4(n),"/").concat(encodeURIComponent(r),"/messages"),E.params=F({is_sdk:!0,prev_limit:o,next_limit:a,include:u,reverse:c,message_ts:void 0===i?null:i,message_id:void 0===s?null:s,message_type:null!=l?l:null,custom_types:d,sender_ids:h,include_reply_type:f,with_sorted_meta_array:p,include_reactions:_,parent_message_id:m,include_thread_info:g,include_parent_message_info:y,show_subchannel_message_only:b,include_poll_details:!0}),E}return s(t,e),t}(B),nM=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.messages=n.messages.map(function(e){return nu(t,e)}),r}return s(t,e),t}(Q),nU=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.timestamp,s=t.token,o=t.replyType,a=t.includeMetaArray,u=t.includeReactions,c=t.includeThreadInfo,l=t.includeParentMessageInfo,d=e.call(this)||this;return d.method=v.GET,d.path="".concat(e4(n),"/").concat(encodeURIComponent(r),"/messages/changelogs"),d.params={change_ts:i,token:s,with_sorted_meta_array:a,include_reactions:u,include_thread_info:c,include_reply_type:o,include_parent_message_info:l,include_poll_details:!0},d}return s(t,e),t}(B),nD=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.updatedMessages=n.updated.map(function(e){return nu(t,e)}),r.deletedMessagesInfo=n.deleted.map(function(e){return{messageId:e.message_id,deletedAt:e.deleted_at}}),r.hasMore=n.has_more,r.nextToken=n.next,r}return s(t,e),t}(Q),nP=function(e){function t(t){var n=t.channelUrl,r=t.scheduledMessageId,i=e.call(this)||this;return i.method=v.GET,i.path="".concat(eS,"/").concat(encodeURIComponent(n),"/scheduled_messages/").concat(encodeURIComponent(r)),i.params={},i}return s(t,e),t}(B),nx=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=n?nu(t,o({},n)):null,r}return s(t,e),t}(Q),nj={},nq=function(){function e(e,t){var n=t.sdkState,r=t.dispatcher,i=t.requestQueue,s=t.onlineDetector,o=t.cacheContext;this._iid=e,this._sdkState=n,this._requestQueue=i,this._dispatcher=r,this._onlineDetector=s,this._cacheContext=o,this.fileMessageQueue=new nv(e,{sdkState:n,dispatcher:r,requestQueue:i,onlineDetector:s,cacheContext:o}),nj[e]=this}return e.of=function(e){return nj[e]},e.prototype.buildMessageFromSerializedData=function(e){var t=tm(e);switch(t.messageType){case ef.USER:return new no(this._iid,no.payloadify(t));case ef.FILE:return new nc(this._iid,nc.payloadify(t));case ef.ADMIN:return new t7(this._iid,t7.payloadify(t))}return null},e.prototype.buildUserMessageCreateParamsFromSerializedData=function(e,t){return F({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,message:t.message,translationTargetLanguages:Object.keys(t.translations),pollId:e.pollId})},e.prototype.buildFileMessageCreateParamsFromSerializedData=function(e,t){return F({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,file:e.file,fileKey:e.fileKey,fileUrl:t.url,fileName:t.name,fileSize:t.size,mimeType:t.type,thumbnailSizes:t.thumbnails.map(function(e){return{maxWidth:e.width,maxHeight:e.height}}),fileType:e.fileType,requireAuth:t.requireAuth})},e.prototype.buildScheduledUserMessageCreateParamsFromSerializedData=function(e,t){return o(o({},this.buildUserMessageCreateParamsFromSerializedData(e,t)),{scheduledAt:e.scheduledAt})},e.prototype.buildScheduledFileMessageCreateParamsFromSerializedData=function(e,t){return o(o({},this.buildFileMessageCreateParamsFromSerializedData(e,t)),{scheduledAt:e.scheduledAt})},e.prototype.buildSenderFromSerializedData=function(e){var t=tm(e);return new t1(this._iid,t1.payloadify(t))},e.prototype.getMessage=function(e){return a(this,void 0,void 0,function(){var t;return u(this,function(n){switch(n.label){case 0:return t=new nO(e),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as(nL).message]}})})},e.prototype.getScheduledMessage=function(e){return a(this,void 0,void 0,function(){var t;return u(this,function(n){switch(n.label){case 0:return t=new nP(e),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as(nx).message]}})})},e.prototype.getMessagesByMessageId=function(e,t,n,r,i){return void 0===i&&(i=n_.REQUEST_MESSAGE),a(this,void 0,void 0,function(){var s,a;return u(this,function(u){switch(u.label){case 0:return s=new nR(o(o({channelType:t,channelUrl:e,token:String(n)},nm),r)),[4,this._requestQueue.send(s)];case 1:return a=u.sent().as(nM).messages,this._dispatcher.dispatch(new nS({messages:a,source:i})),[2,a]}})})},e.prototype.getMessagesByTimestamp=function(e,t,n,r,i){return void 0===i&&(i=n_.REQUEST_MESSAGE),a(this,void 0,void 0,function(){var s,a;return u(this,function(u){switch(u.label){case 0:return s=new nR(o(o({channelType:t,channelUrl:e,timestamp:n},nm),r)),[4,this._requestQueue.send(s)];case 1:return a=u.sent().as(nM).messages,this._dispatcher.dispatch(new nS({messages:a,source:i})),[2,a]}})})},e.prototype.getThreadedMessagesByTimestamp=function(e,t,n,r){return void 0===r&&(r=n_.REQUEST_THREADED_MESSAGE),a(this,void 0,void 0,function(){var i,s,a;return u(this,function(u){switch(u.label){case 0:return i=new nR(o(o(o({channelUrl:e.channelUrl,channelType:e.channelType,timestamp:t},t3),n),{replyType:em.ALL,parentMessageId:e.messageId,includeThreadInfo:!0})),[4,this._requestQueue.send(i)];case 1:return(a=(s=u.sent().as(nM).messages).slice(1)).forEach(function(t){t.parentMessage=e}),this._dispatcher.dispatch(new nS({messages:a,source:r})),[2,{parentMessage:s[0],threadedMessages:a}]}})})},e.prototype.getMessageChangelogs=function(e,t,n,r,i){return void 0===i&&(i=n_.REQUEST_MESSAGE_CHANGELOGS),a(this,void 0,void 0,function(){var s,a,c,l,d,h,f;return u(this,function(u){switch(u.label){case 0:return s=new nU(F(o(o({channelType:t,channelUrl:e,timestamp:"number"==typeof n?n:null,token:"string"==typeof n?n:null},ny),r))),[4,this._requestQueue.send(s)];case 1:return c=(a=u.sent().as(nD)).updatedMessages,l=a.deletedMessagesInfo,d=a.hasMore,h=a.nextToken,f=l.map(function(e){return e.messageId}),c.length>0&&this._dispatcher.dispatch(new nS({messages:c,source:i})),f.length>0&&this._dispatcher.dispatch(new nw({messageIds:f,source:i})),[2,{updatedMessages:c,deletedMessageIds:f,hasMore:d,token:h}]}})})},e}(),nF=function(){function e(){this._onPending=er,this._onFailed=er,this._onSucceeded=er}return e.prototype._trigger=function(e,t){switch(t.sendingStatus){case ey.PENDING:this._onPending(t);break;case ey.FAILED:case ey.CANCELED:this._onFailed(e,t.scheduledInfo?null:t);break;case ey.SCHEDULED:case ey.SUCCEEDED:this._onSucceeded(t)}},e.prototype.onPending=function(e){return this._onPending=e,this},e.prototype.onFailed=function(e){return this._onFailed=e,this},e.prototype.onSucceeded=function(e){return this._onSucceeded=e,this},e}(),nV=function(e){function t(t,n){var r=e.call(this,t)||this;r.threadInfo=null,r.targetMessageId=0,r.channelUrl=null,r.channelType=null;var i=n.thread_info,s=n.root_message_id,o=n.channel_url,a=n.channel_type;return i&&I("object",i)&&I("number",s)&&I("string",o)&&I("string",a)&&(r.threadInfo=new tF(t,i),r.targetMessageId=s,r.channelUrl=o,r.channelType=a),r}return s(t,e),t}(e1),nG={channelUrl:null,channelType:null,messageId:0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1},nB=function(){function e(e,t){var n;this._iid=null,this.limit=20,this._isLoading=!1,this._hasNext=!0,this._token="",this._iid=e,this.limit=null!==(n=t.limit)&&void 0!==n?n:20}return Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._isLoading},enumerable:!1,configurable:!0}),e.prototype._validate=function(){return I("number",this.limit)&&this.limit>0},e}(),nQ=function(e){function t(t){var n=t.channelCustomType,r=t.keyword,i=t.limit,s=t.reverse,o=t.exactMatch,a=t.channelUrl,u=t.order,c=t.messageTimestampFrom,l=t.messageTimestampTo,d=t.advancedQuery,h=t.targetFields,f=t.nextToken,p=e.call(this)||this;return p.method=v.GET,p.path="".concat(eN,"/messages"),p.params={custom_type:n,query:r,limit:i,reverse:s,exact_match:o,channel_url:a,message_ts_from:c,message_ts_to:l,sort_field:u,advanced_query:d,target_fields:h,after:f},p}return s(t,e),t}(B),nH=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.messages=n.results.map(function(e){return nu(t,e)}),r.hasNext=n.has_next,r.nextToken=n.end_cursor,r.totalCount=n.total_count,r}return s(t,e),t}(Q);(r=nI||(nI={})).SCORE="score",r.TIMESTAMP="ts";var nz=function(e){function t(t,n){var r,i,s,o,a,u,c,l,d,h=this;return(h=e.call(this,t,n)||this).keyword="",h.reverse=!1,h.exactMatch=!1,h.channelUrl="",h.channelCustomType="",h.messageTimestampFrom=null,h.messageTimestampTo=null,h.order=nI.SCORE,h.advancedQuery=!1,h.targetFields=null,h._nextToken="",h.totalCount=-1,h.keyword=n.keyword,h.reverse=null!==(r=n.reverse)&&void 0!==r&&r,h.exactMatch=null!==(i=n.exactMatch)&&void 0!==i&&i,h.channelUrl=null!==(s=n.channelUrl)&&void 0!==s?s:"",h.channelCustomType=null!==(o=n.channelCustomType)&&void 0!==o?o:"",h.messageTimestampFrom=null!==(a=n.messageTimestampFrom)&&void 0!==a?a:null,h.messageTimestampTo=null!==(u=n.messageTimestampTo)&&void 0!==u?u:null,h.order=null!==(c=n.order)&&void 0!==c?c:nI.SCORE,h.advancedQuery=null!==(l=n.advancedQuery)&&void 0!==l&&l,h.targetFields=null!==(d=n.targetFields)&&void 0!==d?d:null,h}return s(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&I("string",this.keyword)&&this.keyword.length>0&&I("boolean",this.reverse)&&I("boolean",this.exactMatch)&&I("string",this.channelUrl)&&I("string",this.channelCustomType)&&(I("number",this.messageTimestampFrom)||null===this.messageTimestampFrom)&&(I("number",this.messageTimestampTo)||null===this.messageTimestampTo)&&T(nI,this.order)&&I("boolean",this.advancedQuery)&&w("string",this.targetFields,!0)},t.prototype.next=function(){return a(this,void 0,void 0,function(){var e,t,n,r,i,s,a;return u(this,function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=tP.of(this._iid).requestQueue,t=new nQ(o(o({},this),{nextToken:this._nextToken?this._nextToken:null})),[4,e.send(t)]):[3,2]:[3,5];case 1:return r=(n=u.sent().as(nH)).messages,i=n.hasNext,s=n.nextToken,a=n.totalCount,this._nextToken=s,this._hasNext=i,this._isLoading=!1,this.totalCount=a,[2,r];case 2:return[2,[]];case 3:throw g.queryInProgress;case 4:return[3,6];case 5:throw g.invalidParameters;case 6:return[2]}})})},t}(nB),nK=function(e){function t(t,n,r,i){var s=e.call(this,t,i)||this;return s.channelUrl=n,s.channelType=r,s}return s(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&I("string",this.channelUrl)&&T(ed,this.channelType)},t}(nB),nW=function(e){function t(t,n,r,i){var s,o,a,u,c,l,d,h,f,p,_=this;return(_=e.call(this,t,n,r,i)||this).reverse=!1,_.messageTypeFilter=ep.ALL,_.customTypesFilter=null,_.senderUserIdsFilter=null,_.replyType=em.NONE,_.includeMetaArray=!1,_.includeReactions=!1,_.includeParentMessageInfo=!1,_.includeThreadInfo=!1,_.showSubchannelMessagesOnly=!1,_._edge=Number.MAX_SAFE_INTEGER,_.reverse=null!==(s=i.reverse)&&void 0!==s&&s,_.messageTypeFilter=null!==(o=i.messageTypeFilter)&&void 0!==o?o:ep.ALL,_.customTypesFilter=null!==(a=i.customTypesFilter)&&void 0!==a?a:null,_.senderUserIdsFilter=null!==(u=i.senderUserIdsFilter)&&void 0!==u?u:null,_.replyType=null!==(c=i.replyType)&&void 0!==c?c:em.NONE,_.includeMetaArray=null!==(l=i.includeMetaArray)&&void 0!==l&&l,_.includeReactions=null!==(d=i.includeReactions)&&void 0!==d&&d,_.includeParentMessageInfo=null!==(h=i.includeParentMessageInfo)&&void 0!==h&&h,_.includeThreadInfo=null!==(f=i.includeThreadInfo)&&void 0!==f&&f,_.showSubchannelMessagesOnly=null!==(p=i.showSubchannelMessagesOnly)&&void 0!==p&&p,_}return s(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&I("boolean",this.reverse)&&T(ep,this.messageTypeFilter)&&T(em,this.replyType)&&w("string",this.customTypesFilter,!0)&&w("string",this.senderUserIdsFilter,!0)&&I("boolean",this.includeMetaArray)&&I("boolean",this.includeReactions)&&I("boolean",this.includeParentMessageInfo)&&I("boolean",this.includeThreadInfo)&&I("boolean",this.showSubchannelMessagesOnly)},t.prototype.load=function(){return a(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,nq.of(this._iid).getMessagesByTimestamp(this.channelUrl,this.channelType,this._edge,{prevResultSize:this.limit,nextResultSize:0,isInclusive:!1,reverse:this.reverse,messageTypeFilter:this.messageTypeFilter,customTypesFilter:this.customTypesFilter,replyType:this.replyType,senderUserIdsFilter:this.senderUserIdsFilter,includeReactions:this.includeReactions,includeMetaArray:this.includeMetaArray,includeParentMessageInfo:this.includeParentMessageInfo,includeThreadInfo:this.includeThreadInfo,showSubchannelMessagesOnly:this.showSubchannelMessagesOnly})]):[3,2]:[3,5];case 1:return e=t.sent(),this._edge=Math.min.apply(Math,d([Number.MAX_SAFE_INTEGER],l(e.map(function(e){return e.createdAt})),!1)),this._hasNext=e.length>=this.limit,this._isLoading=!1,[2,e];case 2:return[2,[]];case 3:throw g.queryInProgress;case 4:return[3,6];case 5:throw g.invalidParameters;case 6:return[2]}})})},t}(nK),nZ={channelUrl:null,scheduledMessageId:0},nY=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="message",t}return s(t,e),t.prototype.init=function(t,n){var r=n.sdkState,i=n.dispatcher,s=n.sessionManager,o=n.requestQueue,a=n.logger,u=n.onlineDetector,c=n.cacheContext;e.prototype.init.call(this,t,{sdkState:r,dispatcher:i,sessionManager:s,requestQueue:o,logger:a,onlineDetector:u,cacheContext:c}),this._manager=new nq(t,{sdkState:r,dispatcher:i,requestQueue:o,onlineDetector:u,cacheContext:c})},t.prototype.buildMessageFromSerializedData=function(e){return this._manager.buildMessageFromSerializedData(e)},t.prototype.buildSenderFromSerializedData=function(e){return this._manager.buildSenderFromSerializedData(e)},t.prototype.getMessage=function(e){return a(this,void 0,void 0,function(){var t;return u(this,function(n){var r;return tg(I("string",(r=t=o(o({},nG),e)).channelUrl)&&I("string",r.channelType)&&T(ed,r.channelType)&&I("number",r.messageId)&&I("boolean",r.includeMetaArray)&&I("boolean",r.includeParentMessageInfo)&&I("boolean",r.includeThreadInfo)).throw(g.invalidParameters),[2,this._manager.getMessage(t)]})})},t.prototype.getScheduledMessage=function(e){return a(this,void 0,void 0,function(){var t;return u(this,function(n){var r;return tg(I("string",(r=t=o(o({},nZ),e)).channelUrl)&&I("number",r.scheduledMessageId)).throw(g.invalidParameters),[2,this._manager.getScheduledMessage(t)]})})},t}(tx)},24601:function(e,t,n){"use strict";n.d(t,{A:function(){return l},B:function(){return p},C:function(){return a},M:function(){return c},O:function(){return u},R:function(){return h},T:function(){return f},U:function(){return d},a:function(){return i}});var r,i,s=n(18998);(r=i||(i={}))[r.NONE=0]="NONE",r[r.CHANNEL_ENTER=10102]="CHANNEL_ENTER",r[r.CHANNEL_EXIT=10103]="CHANNEL_EXIT",r[r.USER_CHANNEL_MUTE=10201]="USER_CHANNEL_MUTE",r[r.USER_CHANNEL_UNMUTE=10200]="USER_CHANNEL_UNMUTE",r[r.USER_CHANNEL_BAN=10601]="USER_CHANNEL_BAN",r[r.USER_CHANNEL_UNBAN=10600]="USER_CHANNEL_UNBAN",r[r.CHANNEL_FREEZE=10701]="CHANNEL_FREEZE",r[r.CHANNEL_UNFREEZE=10700]="CHANNEL_UNFREEZE",r[r.TYPING_START=10900]="TYPING_START",r[r.TYPING_END=10901]="TYPING_END",r[r.CHANNEL_JOIN=1e4]="CHANNEL_JOIN",r[r.CHANNEL_LEAVE=10001]="CHANNEL_LEAVE",r[r.CHANNEL_OPERATOR_UPDATE=10002]="CHANNEL_OPERATOR_UPDATE",r[r.CHANNEL_INVITE=10020]="CHANNEL_INVITE",r[r.CHANNEL_ACCEPT_INVITE=10021]="CHANNEL_ACCEPT_INVITE",r[r.CHANNEL_DECLINE_INVITE=10022]="CHANNEL_DECLINE_INVITE",r[r.CHANNEL_PROP_CHANGED=11e3]="CHANNEL_PROP_CHANGED",r[r.CHANNEL_DELETED=12e3]="CHANNEL_DELETED",r[r.CHANNEL_META_DATA_CHANGED=11100]="CHANNEL_META_DATA_CHANGED",r[r.CHANNEL_META_COUNTERS_CHANGED=11200]="CHANNEL_META_COUNTERS_CHANGED",r[r.CHANNEL_HIDE=13e3]="CHANNEL_HIDE",r[r.CHANNEL_UNHIDE=13001]="CHANNEL_UNHIDE";var o=function(){function e(e){this.channelUrl=e.channel_url,this.channelType=e.channel_type,this.category=e.cat,this.data=e.data,this.ts=e.ts}return Object.defineProperty(e.prototype,"isGroupChannelEvent",{get:function(){return this.channelType===s.C.GROUP},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpenChannelEvent",{get:function(){return this.channelType===s.C.OPEN},enumerable:!1,configurable:!0}),e}(),a=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.event=new o(r),i}return(0,s._)(t,e),t}(s.W),u=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this,o=r.data.operators;return i.operators=(void 0===o?[]:o).map(function(e){return new s.U(i._iid,e)}),i}return(0,s._)(t,e),t}(a),c=function(e){function t(t,n,r){var i=e.call(this,t,"MCNT",r)||this;return i.groupChannelMemberCounts=r.group_channels.map(function(e){return{channelUrl:e.channel_url,memberCount:e.member_count,joinedMemberCount:e.joined_member_count,updatedAt:e.ts}}),i.openChannelMemberCounts=r.open_channels.map(function(e){return{channelUrl:e.channel_url,participantCount:e.participant_count,updatedAt:e.ts}}),i}return(0,s._)(t,e),t}(s.W),l=function(e){function t(t,n,r){var i,o,a,u=this;(u=e.call(this,t,"ADMM",r)||this).message=new s.b1(t,r);var c=s.V.of(t).sdkState;return u.isMentioned=(0,s.ao)(u.message.mentionType,null!==(i=u.message.mentionedUserIds)&&void 0!==i?i:null===(o=u.message.mentionedUsers)||void 0===o?void 0:o.map(function(e){return e.userId}),c.userId),u.forceUpdateLastMessage=null!==(a=r.force_update_last_message)&&void 0!==a&&a,u}return(0,s._)(t,e),t}(s.W),d=function(e){function t(t,n,r){var i,o,a,u,c,l,d=this;(d=e.call(this,t,"AEDI",r)||this).message=new s.b1(t,r);var h=s.V.of(t).sdkState;return d.mentionCountChange=(0,s.ap)({mentionType:null!==(o=null===(i=r.old_values)||void 0===i?void 0:i.mention_type)&&void 0!==o?o:null,mentionedUserIds:null!==(u=null===(a=r.old_values)||void 0===a?void 0:a.mentioned_user_ids)&&void 0!==u?u:[]},{mentionType:d.message.mentionType,mentionedUserIds:null!==(c=d.message.mentionedUserIds)&&void 0!==c?c:null===(l=d.message.mentionedUsers)||void 0===l?void 0:l.map(function(e){return e.userId})},h.userId),d}return(0,s._)(t,e),t}(s.W),h=function(e){function t(t,n,r){var i=e.call(this,t,"MRCT",r)||this;return i.channelUrl=r.channel_url,i.channelType=r.channel_type,i.event=new s.aq(r),i}return(0,s._)(t,e),t}(s.W),f=function(e){function t(t,n,r){var i=e.call(this,t,"MTHD",r)||this;return i.event=new s.b2(t,r),i}return(0,s._)(t,e),t}(s.W),p=function(){this.onUserMuted=s.r,this.onUserUnmuted=s.r,this.onUserBanned=s.r,this.onUserUnbanned=s.r,this.onChannelChanged=s.r,this.onChannelDeleted=s.r,this.onChannelFrozen=s.r,this.onChannelUnfrozen=s.r,this.onOperatorUpdated=s.r,this.onChannelMemberCountChanged=s.r,this.onMetaDataCreated=s.r,this.onMetaDataUpdated=s.r,this.onMetaDataDeleted=s.r,this.onMetaCounterCreated=s.r,this.onMetaCounterUpdated=s.r,this.onMetaCounterDeleted=s.r,this.onMessageReceived=s.r,this.onMessageUpdated=s.r,this.onMessageDeleted=s.r,this.onMentionReceived=s.r,this.onReactionUpdated=s.r,this.onThreadInfoUpdated=s.r}},29276:function(e,t,n){"use strict";n.d(t,{B:function(){return v},C:function(){return eG},D:function(){return eU},F:function(){return p},P:function(){return eH},U:function(){return y},a:function(){return w},b:function(){return m},c:function(){return T},e:function(){return ez},f:function(){return L},i:function(){return S},j:function(){return ed},k:function(){return ee},l:function(){return eT},m:function(){return eE},n:function(){return ey},o:function(){return e_},p:function(){return em},q:function(){return eO},r:function(){return eR},s:function(){return g},t:function(){return ek},u:function(){return R},v:function(){return b},w:function(){return M},x:function(){return U},y:function(){return D}});var r,i,s,o,a,u,c,l,d,h,f,p,_=n(18998),v={data:null,customType:null,mentionType:_.ah.USERS,mentionedUserIds:null,mentionedUsers:null,mentionedMessageTemplate:null,metaArrays:null,parentMessageId:null,isReplyToChannel:!1,pushNotificationDeliveryOption:null,appleCriticalAlertOptions:null},m=function(e){return(0,_.i)("string",e.data,!0)&&(0,_.i)("string",e.customType,!0)&&(0,_.h)(_.ah,e.mentionType)&&(0,_.T)("string",e.mentionedUserIds,!0)&&(0,_.T)(_.U,e.mentionedUsers,!0)&&(0,_.i)("string",e.mentionedMessageTemplate,!0)&&(0,_.T)(_.ai,e.metaArrays,!0)&&(0,_.i)("number",e.parentMessageId,!0)&&(0,_.i)("boolean",e.isReplyToChannel)&&(0,_.h)(_.aj,e.pushNotificationDeliveryOption,!0)&&(0,_.i)(_.ak,e.appleCriticalAlertOptions,!0)},g=function(e){return e?{isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,pollId:e.pollId}:null},y=(0,_.l)((0,_.l)({},v),{message:null,translationTargetLanguages:null,pollId:null}),b=function(e){return m(e)&&(0,_.i)("string",e.message)&&(0,_.T)("string",e.translationTargetLanguages,!0)&&(0,_.i)("number",e.pollId,!0)};(E=p||(p={})).FILE="file",E.BLOB="blob",E.BLOB_LIKE_OBJECT="blobLikeObject",E.URL="url";var E,I,T=function(e){return"undefined"!=typeof window&&"Blob"in window&&"undefined"!=typeof Blob&&e instanceof Blob},S=function(e){return e===p.BLOB||e===p.FILE},w=function(e){return e?{file:e.file,fileKey:e.fileKey,fileType:e.fileType,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption}:null},C=(0,_.l)((0,_.l)({},v),{file:null,fileKey:null,fileUrl:null,fileName:null,fileType:null,fileSize:null,mimeType:null,thumbnailSizes:null,requireAuth:!1}),N=function(e){return m(e)&&((0,_.q)(e.file)||(0,_.i)("string",e.fileUrl))&&(0,_.i)("string",e.fileName,!0)&&(0,_.i)("string",e.mimeType,!0)&&(0,_.i)("number",e.fileSize,!0)&&(null===e.thumbnailSizes||Array.isArray(e.thumbnailSizes)&&e.thumbnailSizes.every(function(e){return(0,_.i)("object",e)&&e.maxWidth>0&&e.maxHeight>0}))};(k=I||(I={})).MUTED="muted",k.BANNED="banned";var k,A,O=function(){function e(e){var t,n,r;this.restrictionType=null,this.description=null,this.endAt=-1,(0,_.h)(I,e.restriction_type)&&(this.restrictionType=e.restriction_type),this.description=null!==(t=e.description)&&void 0!==t?t:null,this.endAt=null!==(r=null!==(n=e.end_at)&&void 0!==n?n:e.muted_end_at)&&void 0!==r?r:-1}return e.payloadify=function(e){return e?(0,_.e)({restriction_type:e.restrictionType,description:e.description,end_at:e.endAt}):null},e}(),L=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.restrictionInfo=null,r.restrictionInfo=new O(n),r}return(0,_._)(t,e),t.payloadify=function(t){return t?(0,_.e)((0,_.l)((0,_.l)({},e.payloadify.call(this,t)),O.payloadify(t.restrictionInfo))):null},t}(_.U),R={data:null,customType:null,mentionType:_.ah.USERS,mentionedUserIds:null,mentionedUsers:null,mentionedMessageTemplate:null,metaArrays:null,pushNotificationDeliveryOption:null,appleCriticalAlertOptions:null},M=function(e){return(0,_.i)("string",e.data,!0)&&(0,_.i)("string",e.customType,!0)&&(0,_.h)(_.ah,e.mentionType)&&(0,_.T)("string",e.mentionedUserIds,!0)&&(0,_.T)(_.U,e.mentionedUsers,!0)&&(0,_.i)("string",e.mentionedMessageTemplate,!0)&&(0,_.T)(_.ai,e.metaArrays,!0)&&(0,_.h)(_.aj,e.pushNotificationDeliveryOption,!0)&&(0,_.i)(_.ak,e.appleCriticalAlertOptions,!0)},U=(0,_.l)((0,_.l)({},R),{message:null,translationTargetLanguages:null,pollId:null}),D=function(e){return M(e)&&(0,_.i)("string",e.message,!0)&&(0,_.T)("string",e.translationTargetLanguages,!0)&&(0,_.i)("number",e.pollId,!0)},P=(0,_.l)({},R),x=function(e){function t(t){var n=t.channelUrl,r=t.channelType,i=t.token,s=t.limit,o=e.call(this)||this;return o.method=_.A.GET,o.path="".concat((0,_.g)(r),"/").concat(encodeURIComponent(n),"/operators"),o.params={token:i,limit:s},o}return(0,_._)(t,e),t}(_.b),j=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.operators=n.operators.map(function(e){return new _.U(t,e)}),r.token=n.next,r}return(0,_._)(t,e),t}(_.c),q=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return(0,_._)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return(0,_.j)(this,void 0,void 0,function(){var e,t,n,r,i,s;return(0,_.k)(this,function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,t=_.V.of(this._iid).requestQueue,n=new x((0,_.l)((0,_.l)({},this),{channelUrl:this.channelUrl,token:this._token})),[4,t.send(n)]):[3,2]):[3,5];case 1:return i=(r=o.sent().as(j)).operators,s=r.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,e];case 3:throw _.S.queryInProgress;case 4:return[3,6];case 5:throw _.S.invalidParameters;case 6:return[2]}})})},t}(_.n),F=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.limit,o=t.token;return(n=e.call(this)||this).method=_.A.GET,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/mute"),n.params={limit:s,token:o},n}return(0,_._)(t,e),t}(_.b),V=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.token=null,r.mutedUsers=[];var i=n.next,s=n.muted_list;return r.token=i,s&&s.length>0&&(r.mutedUsers=s.map(function(e){return new L(t,e)})),r}return(0,_._)(t,e),t}(_.c),G=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return(0,_._)(t,e),t.prototype.next=function(){return(0,_.j)(this,void 0,void 0,function(){var e,t,n,r,i;return(0,_.k)(this,function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_.V.of(this._iid).requestQueue,t=new F((0,_.l)((0,_.l)({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return r=(n=s.sent().as(V)).mutedUsers,i=n.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,r];case 2:return[2,[]];case 3:throw _.S.queryInProgress;case 4:return[3,6];case 5:throw _.S.invalidParameters;case 6:return[2]}})})},t}(_.n),B=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.limit,o=t.token;return(n=e.call(this)||this).method=_.A.GET,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/ban"),n.params=(0,_.e)({limit:s,token:o}),n}return(0,_._)(t,e),t}(_.b),Q=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.token=null,r.bannedUsers=[];var i=n.next,s=n.banned_list;return r.token=i,s&&s.length>0&&(r.bannedUsers=s.map(function(e){return new L(t,e.user)})),r}return(0,_._)(t,e),t}(_.c),H=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return(0,_._)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return(0,_.j)(this,void 0,void 0,function(){var e,t,n,r,i;return(0,_.k)(this,function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_.V.of(this._iid).requestQueue,t=new B((0,_.l)((0,_.l)({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return r=(n=s.sent().as(Q)).bannedUsers,i=n.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,r];case 2:return[2,[]];case 3:throw _.S.queryInProgress;case 4:return[3,6];case 5:throw _.S.invalidParameters;case 6:return[2]}})})},t}(_.n);(r=A||(A={})).SPAM="spam",r.HARASSING="harassing",r.SUSPICIOUS="suspicious",r.INAPPROPRIATE="inappropriate";var z=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.operatorUserIds;return(n=e.call(this)||this).method=_.A.POST,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/operators"),n.params={operator_ids:s},n}return(0,_._)(t,e),t}(_.b);i=_.c,(0,_._)(function(){return null!==i&&i.apply(this,arguments)||this},i);var K=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.operatorUserIds;return(n=e.call(this)||this).method=_.A.DELETE,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/operators"),n.params={operator_ids:s},n}return(0,_._)(t,e),t}(_.b);s=_.c,(0,_._)(function(e,t){return s.call(this,e,t)||this},s);var W=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.userId;return(n=e.call(this)||this).method=_.A.GET,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/mute/").concat(s),n}return(0,_._)(t,e),t}(_.b),Z=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.isMuted=!1,r.startAt=null,r.endAt=null,r.remainingDuration=null,r.description=null;var i=n.is_muted,s=n.start_at,o=n.end_at,a=n.remaining_duration,u=n.description;return r.isMuted=i,r.startAt=s,r.endAt=o,r.remainingDuration=a,r.description=u,r}return(0,_._)(t,e),t}(_.c),Y=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.keys;return(n=e.call(this)||this).method=_.A.GET,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/metadata"),n.params={keys:s,include_ts:!0},n}return(0,_._)(t,e),t}(_.b),X=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var i=n.metadata,s=n.ts;return r.metadata=i,r.ts=null!=s?s:null,r}return(0,_._)(t,e),t}(_.c),J=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.metadata,o=t.upsert;return(n=e.call(this)||this).method=_.A.PUT,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/metadata"),n.params={metadata:s,include_ts:!0,upsert:null!=o&&o},n}return(0,_._)(t,e),t}(_.b),$=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var i=n.metadata,s=n.ts;return r.metadata=i,r.ts=null!=s?s:null,r}return(0,_._)(t,e),t}(_.c),ee=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.created=null,i.updated=null,i.deleted=null,r.data&&(i.created=r.data.created,i.updated=r.data.updated,i.deleted=r.data.deleted),i}return(0,_._)(t,e),t}(_.W),et=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.key;return(n=e.call(this)||this).method=_.A.DELETE,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/metadata/").concat(s),n.params={include_ts:!0},n}return(0,_._)(t,e),t}(_.b),en=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var i=n.ts;return r.ts=null!=i?i:null,r}return(0,_._)(t,e),t}(_.c),er=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType;return(n=e.call(this)||this).method=_.A.PUT,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/metadata"),n.params={include_ts:!0},n}return(0,_._)(t,e),t}(_.b),ei=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var i=n.ts;return r.ts=null!=i?i:null,r}return(0,_._)(t,e),t}(_.c),es=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.keys;return(n=e.call(this)||this).method=_.A.GET,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={keys:s},n}return(0,_._)(t,e),t}(_.b),eo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return(0,_._)(t,e),t}(_.c),ea=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.metaCounter;return(n=e.call(this)||this).method=_.A.POST,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={metacounter:s},n}return(0,_._)(t,e),t}(_.b),eu=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return(0,_._)(t,e),t}(_.c),ec=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.metaCounter,o=t.upsert,a=t.mode;return(n=e.call(this)||this).method=_.A.PUT,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={metacounter:s,upsert:void 0!==o&&o,mode:void 0===a?"set":a},n}return(0,_._)(t,e),t}(_.b),el=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return(0,_._)(t,e),t}(_.c),ed=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.created=null,i.updated=null,i.deleted=null,r.data&&(i.created=r.data.created,i.updated=r.data.updated,i.deleted=r.data.deleted),i}return(0,_._)(t,e),t}(_.W),eh=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.key;return(n=e.call(this)||this).method=_.A.DELETE,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/metacounter/").concat(s),n.params=null,n}return(0,_._)(t,e),t}(_.b);o=_.c,(0,_._)(function(e,t){return o.call(this,e,t)||this},o);var ef=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType;return(n=e.call(this)||this).method=_.A.DELETE,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/metacounter"),n.params=null,n}return(0,_._)(t,e),t}(_.b);a=_.c,(0,_._)(function(){return null!==a&&a.apply(this,arguments)||this},a);var ep=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.userId,o=t.seconds,a=t.description;return(n=e.call(this)||this).method=_.A.POST,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/mute"),n.params={user_id:s,seconds:o,description:a},n}return(0,_._)(t,e),t}(_.b);u=_.c,(0,_._)(function(e,t){return u.call(this,e,t)||this},u);var e_=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.user=new L(t,r.data),i}return(0,_._)(t,e),t}(_.W),ev=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.userId;return(n=e.call(this)||this).method=_.A.DELETE,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/mute/").concat(encodeURIComponent(s)),n}return(0,_._)(t,e),t}(_.b);c=_.c,(0,_._)(function(){return null!==c&&c.apply(this,arguments)||this},c);var em=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.user=new L(t,r.data),i}return(0,_._)(t,e),t}(_.W),eg=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.userId,o=t.seconds,a=t.description;return(n=e.call(this)||this).method=_.A.POST,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/ban"),n.params=(0,_.e)({user_id:s,seconds:o,description:a}),n}return(0,_._)(t,e),t}(_.b);l=_.c,(0,_._)(function(){return null!==l&&l.apply(this,arguments)||this},l);var ey=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.memberCount=null,i.joinedMemberCount=null,i.user=new L(t,r.data),r.data.member_count&&(i.memberCount=r.data.member_count),r.data.joined_member_count&&(i.joinedMemberCount=r.data.joined_member_count),i}return(0,_._)(t,e),t}(_.W),eb=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.userId;return(n=e.call(this)||this).method=_.A.DELETE,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/ban/").concat(encodeURIComponent(s)),n}return(0,_._)(t,e),t}(_.b);d=_.c,(0,_._)(function(){return null!==d&&d.apply(this,arguments)||this},d);var eE=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.user=new L(t,r.data),i}return(0,_._)(t,e),t}(_.W),eI=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.freezing;return(n=e.call(this)||this).method=_.A.PUT,n.path="".concat((0,_.g)(i),"/").concat(encodeURIComponent(r),"/freeze"),n.params={freeze:s},n}return(0,_._)(t,e),t}(_.b);h=_.c,(0,_._)(function(){return null!==h&&h.apply(this,arguments)||this},h);var eT=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.freeze=r.data.freeze,i}return(0,_._)(t,e),t}(_.W),eS=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.category,o=t.userId,a=t.description;return(n=e.call(this)||this).method=_.A.POST,n.path="".concat((0,_.al)(i),"/").concat(encodeURIComponent(r)),n.params={report_category:s,reporting_user_id:o,report_description:a},n}return(0,_._)(t,e),t}(_.b),ew=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.category,o=t.userId,a=t.offendingUserId,u=t.description;return(n=e.call(this)||this).method=_.A.POST,n.path="".concat(_.am,"/users/").concat(a),n.params={channel_url:r,channel_type:i===_.C.OPEN?"open_channels":"group_channels",report_category:s,reporting_user_id:o,report_description:u},n}return(0,_._)(t,e),t}(_.b),eC=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.category,o=t.userId,a=t.offendingUserId,u=t.messageId,c=t.description;return(n=e.call(this)||this).method=_.A.POST,n.path="".concat((0,_.al)(i),"/").concat(encodeURIComponent(r),"/messages/").concat(u),n.params={report_category:s,reporting_user_id:o,report_description:c,offending_user_id:a},n}return(0,_._)(t,e),t}(_.b),eN=function(e){function t(t){var n=[];return t.mentionType===_.ah.USERS&&(t.mentionedUserIds?n=t.mentionedUserIds:t.mentionedUsers&&(n=t.mentionedUsers.map(function(e){return e.userId}))),e.call(this,{code:"MESG",ackRequired:!0,payload:(0,_.e)({channel_url:t.channelUrl,message:t.message,data:t.data,custom_type:t.customType,metaarray:t.metaArrays,mention_type:t.mentionType,mentioned_user_ids:n,mentioned_message_template:t.mentionedMessageTemplate,target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption&&t.pushNotificationDeliveryOption!==_.aj.DEFAULT?t.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:t.appleCriticalAlertOptions,silent:t.silent,reply_to_channel:t.isReplyToChannel,parent_message_id:t.parentMessageId>0?t.parentMessageId:null,req_id:t.reqId,poll_id:t.pollId})})||this}return(0,_._)(t,e),t}(_.an),ek=function(e){function t(t,n,r){var i,s,o,a=this;(a=e.call(this,t,"MESG",r)||this).message=new _.x(t,r);var u=_.V.of(t).sdkState;return a.isMentioned=(0,_.ao)(a.message.mentionType,null!==(i=a.message.mentionedUserIds)&&void 0!==i?i:null===(s=a.message.mentionedUsers)||void 0===s?void 0:s.map(function(e){return e.userId}),u.userId),a.forceUpdateLastMessage=null!==(o=r.force_update_last_message)&&void 0!==o&&o,a}return(0,_._)(t,e),t}(_.W),eA=function(e){function t(t){var n=[];return t.mentionType===_.ah.USERS&&(t.mentionedUserIds?n=t.mentionedUserIds:t.mentionedUsers&&(n=t.mentionedUsers.map(function(e){return e.userId}))),e.call(this,{code:"MEDI",ackRequired:!0,payload:(0,_.e)({channel_url:t.channelUrl,msg_id:t.messageId,message:t.message,data:t.data,custom_type:t.customType,metaarray:t.metaArrayParams,mention_type:t.mentionType,mentioned_user_ids:n,mentioned_message_template:t.mentionedMessageTemplate,apple_critical_alert_options:t.appleCriticalAlertOptions,poll_id:t.pollId})})||this}return(0,_._)(t,e),t}(_.an),eO=function(e){function t(t,n,r){var i,s,o,a,u,c,l=this;(l=e.call(this,t,"MEDI",r)||this).message=new _.x(t,r);var d=_.V.of(t).sdkState;return l.mentionCountChange=(0,_.ap)({mentionType:null!==(s=null===(i=r.old_values)||void 0===i?void 0:i.mention_type)&&void 0!==s?s:null,mentionedUserIds:null!==(a=null===(o=r.old_values)||void 0===o?void 0:o.mentioned_user_ids)&&void 0!==a?a:[]},{mentionType:l.message.mentionType,mentionedUserIds:null!==(u=l.message.mentionedUserIds)&&void 0!==u?u:null===(c=l.message.mentionedUsers)||void 0===c?void 0:c.map(function(e){return e.userId})},d.userId),l}return(0,_._)(t,e),t}(_.W),eL=function(e){function t(t){var n=[];return t.mentionType===_.ah.USERS&&(t.mentionedUserIds?n=t.mentionedUserIds:t.mentionedUsers&&(n=t.mentionedUsers.map(function(e){return e.userId}))),e.call(this,{code:"FEDI",ackRequired:!0,payload:(0,_.e)({channel_url:t.channelUrl,msg_id:t.messageId,data:t.data,custom_type:t.customType,metaarray:t.metaArrayParams,mention_type:t.mentionType,mentioned_user_ids:n,apple_critical_alert_options:t.appleCriticalAlertOptions})})||this}return(0,_._)(t,e),t}(_.an),eR=function(e){function t(t,n,r){var i,s,o,a,u,c,l=this;(l=e.call(this,t,"FEDI",r)||this).message=new _.F(t,r);var d=_.V.of(t).sdkState;return l.mentionCountChange=(0,_.ap)({mentionType:null!==(s=null===(i=r.old_values)||void 0===i?void 0:i.mention_type)&&void 0!==s?s:null,mentionedUserIds:null!==(a=null===(o=r.old_values)||void 0===o?void 0:o.mentioned_user_ids)&&void 0!==a?a:[]},{mentionType:l.message.mentionType,mentionedUserIds:null!==(u=l.message.mentionedUserIds)&&void 0!==u?u:null===(c=l.message.mentionedUsers)||void 0===c?void 0:c.map(function(e){return e.userId})},d.userId),l}return(0,_._)(t,e),t}(_.W),eM=function(e){function t(t){var n=e.call(this)||this;return n.method=_.A.DELETE,n.path="".concat((0,_.g)(t.channelType),"/").concat(t.channelUrl,"/messages/").concat(t.messageId),n}return(0,_._)(t,e),t}(_.b);f=_.c,(0,_._)(function(){return null!==f&&f.apply(this,arguments)||this},f);var eU=function(e){function t(t,n,r){var i=e.call(this,t,"DELM",r)||this;return i.channelUrl=r.channel_url,i.channelType=r.channel_type,i.messageId=Number(r.msg_id),i}return(0,_._)(t,e),t}(_.W),eD=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.messageId,s=t.reactionKey,o=e.call(this)||this;return o.method=_.A.POST,o.path="".concat((0,_.g)(n),"/").concat(encodeURIComponent(r),"/messages/").concat(i,"/reactions"),o.params={reaction:s},o}return(0,_._)(t,e),t}(_.b),eP=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.reactionEvent=new _.aq(n),r}return(0,_._)(t,e),t}(_.c),ex=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.messageId,s=t.reactionKey,o=e.call(this)||this;return o.method=_.A.DELETE,o.path="".concat((0,_.g)(n),"/").concat(encodeURIComponent(r),"/messages/").concat(i,"/reactions"),o.params={reaction:s},o}return(0,_._)(t,e),t}(_.b),ej=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.reactionEvent=new _.aq((0,_.l)({},n)),r}return(0,_._)(t,e),t}(_.c),eq=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.messageId,s=t.translationTargetLanguages,o=e.call(this)||this;return o.method=_.A.POST,o.path="".concat((0,_.g)(n),"/").concat(encodeURIComponent(r),"/messages/").concat(encodeURIComponent(i),"/translation"),o.params={target_langs:s},o}return(0,_._)(t,e),t}(_.b),eF=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new _.x(t,n),r}return(0,_._)(t,e),t}(_.c),eV=function(e){function t(t){var n,r=this;r=e.call(this)||this;var i=[];t.mentionType===_.ah.USERS&&(t.mentionedUserIds?i=t.mentionedUserIds:t.mentionedUsers&&(i=t.mentionedUsers.map(function(e){return e.userId})));var s=t.channelType,o=t.channelUrl;return r.method=_.A.POST,r.path="".concat((0,_.g)(s),"/").concat(encodeURIComponent(o),"/scheduled_messages"),r.params={req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:_.ar.USER,message:t.message,custom_type:t.customType,data:t.data,mention_type:t.mentionType,mentioned_user_ids:i,sorted_metaarray:null===(n=t.metaArrays)||void 0===n?void 0:n.map(function(e){return _.ai.payloadify(e)}),apple_critical_alert_options:_.ak.payloadify(t.appleCriticalAlertOptions),target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption},r}return(0,_._)(t,e),t}(_.b),eG=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new _.x(t,n),r}return(0,_._)(t,e),t}(_.c),eB=function(e){function t(t){var n,r=this;r=e.call(this)||this;var i=[];t.mentionType===_.ah.USERS&&(t.mentionedUserIds?i=t.mentionedUserIds:t.mentionedUsers&&(i=t.mentionedUsers.map(function(e){return e.userId})));var s=t.channelType,o=t.channelUrl;return r.method=_.A.POST,r.path="".concat((0,_.g)(s),"/").concat(encodeURIComponent(o),"/scheduled_messages"),r.params={req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:_.ar.FILE,url:t.fileUrl,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,thumbnails:t.thumbnailSizes?t.thumbnailSizes.map(function(e){return _.as.payloadify(e)}):[],custom_type:t.customType,data:t.data,require_auth:t.requireAuth,mention_type:t.mentionType,mentioned_user_ids:i,sorted_metaarray:null===(n=t.metaArrays)||void 0===n?void 0:n.map(function(e){return _.ai.payloadify(e)}),apple_critical_alert_options:_.ak.payloadify(t.appleCriticalAlertOptions),push_option:t.pushNotificationDeliveryOption},r}return(0,_._)(t,e),t}(_.b),eQ=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new _.F(t,n),r}return(0,_._)(t,e),t}(_.c),eH=2,ez=function(e){function t(t,n){var r,i,s,o,a=this;return(a=e.call(this,t)||this).url="",a.channelType=_.C.BASE,a.name="",a.coverUrl="",a.customType="",a.data="",a.isFrozen=!1,a.isEphemeral=!1,a.creator=null,a.createdAt=0,a.url=n.channel_url,a.name=null!==(r=n.name)&&void 0!==r?r:"",a.coverUrl=null!==(i=n.cover_url)&&void 0!==i?i:"",a.customType=null!==(s=n.custom_type)&&void 0!==s?s:"",a.data=null!==(o=n.data)&&void 0!==o?o:"",a.isFrozen=!!(0,_.i)("boolean",n.freeze)&&n.freeze,a.isEphemeral=!!(0,_.i)("boolean",n.is_ephemeral)&&n.is_ephemeral,a.creator=n.created_by?new _.U(a._iid,n.created_by):null,a.createdAt=1e3*n.created_at,a._cachedMetaData=new Map,n.metadata&&n.ts&&Object.keys(n.metadata).forEach(function(e){a._cachedMetaData.set(e,{value:n.metadata[e],isRemoved:!1,updatedAt:n.ts})}),a}return(0,_._)(t,e),t.payloadify=function(t){return(0,_.e)((0,_.l)((0,_.l)({},e.payloadify.call(this,t)),{channel_url:t.url,name:t.name,cover_url:t.coverUrl,custom_type:t.customType,data:t.data,freeze:t.isFrozen,is_ephemeral:t.isEphemeral,created_by:_.U.payloadify(t.creator),created_at:t.createdAt/1e3}))},t.prototype.isGroupChannel=function(){return this.channelType===_.C.GROUP},t.prototype.isOpenChannel=function(){return this.channelType===_.C.OPEN},Object.defineProperty(t.prototype,"cachedMetaData",{get:function(){var e={};return this._cachedMetaData.forEach(function(t,n){t.isRemoved||(e[n]=t.value)}),e},enumerable:!1,configurable:!0}),t.prototype._upsertCachedMetaData=function(e,t){var n=this;Object.keys(e).forEach(function(r){var i=n._cachedMetaData.get(r);(!i||i.updatedAt<=t)&&n._cachedMetaData.set(r,{value:e[r],isRemoved:!1,updatedAt:t})})},t.prototype._removeFromCachedMetaData=function(e,t){var n=this;e.forEach(function(e){var r=n._cachedMetaData.get(e);r&&r.updatedAt<t&&(r.isRemoved=!1,r.updatedAt=t)})},t.prototype._generateRequestId=function(){return"rq-".concat((0,_.ab)())},t.prototype.isIdentical=function(e){return e&&this.url===e.url},t.prototype.isEqual=function(e){return(0,_.at)(this,e)},t.prototype.createOperatorListQuery=function(e){return void 0===e&&(e={}),new q(this._iid,this.url,this.channelType,e)},t.prototype.createMutedUserListQuery=function(e){return void 0===e&&(e={}),new G(this._iid,this.url,this.channelType,e)},t.prototype.createBannedUserListQuery=function(e){return void 0===e&&(e={}),new H(this._iid,this.url,this.channelType,e)},t.prototype.createPreviousMessageListQuery=function(e){return void 0===e&&(e={}),new _.au(this._iid,this.url,this.channelType,e)},t.prototype.addOperators=function(e){return(0,_.j)(this,void 0,void 0,function(){var t,n;return(0,_.k)(this,function(r){switch(r.label){case 0:return(0,_.u)((0,_.T)("string",e)).throw(_.S.invalidParameters),t=_.V.of(this._iid).requestQueue,n=new z({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(n)];case 1:return r.sent(),[2]}})})},t.prototype.removeOperators=function(e){return(0,_.j)(this,void 0,void 0,function(){var t,n;return(0,_.k)(this,function(r){switch(r.label){case 0:return(0,_.u)((0,_.T)("string",e)).throw(_.S.invalidParameters),t=_.V.of(this._iid).requestQueue,n=new K({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(n)];case 1:return r.sent(),[2]}})})},t.prototype.getMyMutedInfo=function(){return(0,_.j)(this,void 0,void 0,function(){var e,t,n,r,i,s,o;return(0,_.k)(this,function(a){switch(a.label){case 0:return t=(e=_.V.of(this._iid)).sdkState,n=e.requestQueue,r=new W({channelUrl:this.url,channelType:this.channelType,userId:t.userId}),[4,n.send(r)];case 1:return s=(i=a.sent().as(Z)).isMuted,o=i.startAt,[2,{isMuted:s,startAt:o,endAt:i.endAt,remainingDuration:i.remainingDuration,description:i.description}]}})})},t.prototype.getMetaData=function(e){return(0,_.j)(this,void 0,void 0,function(){var t,n,r,i,s;return(0,_.k)(this,function(o){switch(o.label){case 0:return(0,_.u)((0,_.T)("string",e)).throw(_.S.invalidParameters),t=_.V.of(this._iid).requestQueue,n=new Y({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(n)];case 1:return i=(r=o.sent().as(X)).metadata,s=r.ts,this._upsertCachedMetaData(i,s),[2,i]}})})},t.prototype.getAllMetaData=function(){return(0,_.j)(this,void 0,void 0,function(){var e,t,n,r,i;return(0,_.k)(this,function(s){switch(s.label){case 0:return e=_.V.of(this._iid).requestQueue,t=new Y({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return r=(n=s.sent().as(X)).metadata,i=n.ts,this._upsertCachedMetaData(r,i),[2,r]}})})},t.prototype.createMetaData=function(e){return(0,_.j)(this,void 0,void 0,function(){var t,n,r;return(0,_.k)(this,function(i){switch(i.label){case 0:return t=_.V.of(this._iid).requestQueue,n=new _.aA({channelUrl:this.url,channelType:this.channelType,metadata:e}),[4,t.send(n)];case 1:return r=i.sent().as(_.az).metaData,this._upsertCachedMetaData(r,0),[2,r]}})})},t.prototype.updateMetaData=function(e,t){return void 0===t&&(t=!1),(0,_.j)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,_.k)(this,function(a){switch(a.label){case 0:return n=_.V.of(this._iid).requestQueue,r=new J({channelUrl:this.url,channelType:this.channelType,metadata:e,upsert:t}),[4,n.send(r)];case 1:return s=(i=a.sent().as($)).metadata,o=i.ts,this._upsertCachedMetaData(s,o),[2,s]}})})},t.prototype.deleteMetaData=function(e){return(0,_.j)(this,void 0,void 0,function(){var t,n,r;return(0,_.k)(this,function(i){switch(i.label){case 0:return(0,_.u)((0,_.i)("string",e)).throw(_.S.invalidParameters),t=_.V.of(this._iid).requestQueue,n=new et({channelUrl:this.url,channelType:this.channelType,key:e}),[4,t.send(n)];case 1:return r=i.sent().as(en).ts,this._removeFromCachedMetaData([e],r),[2]}})})},t.prototype.deleteAllMetaData=function(){return(0,_.j)(this,void 0,void 0,function(){var e,t,n;return(0,_.k)(this,function(r){switch(r.label){case 0:return e=_.V.of(this._iid).requestQueue,t=new er({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return n=r.sent().as(ei).ts,this._removeFromCachedMetaData((0,_.Z)([],(0,_.Y)(this._cachedMetaData.keys()),!1),n),[2]}})})},t.prototype.getMetaCounters=function(e){return(0,_.j)(this,void 0,void 0,function(){var t,n;return(0,_.k)(this,function(r){switch(r.label){case 0:return(0,_.u)((0,_.T)("string",e)).throw(_.S.invalidParameters),t=_.V.of(this._iid).requestQueue,n=new es({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(n)];case 1:return[2,r.sent().as(eo).metaCounter]}})})},t.prototype.getAllMetaCounters=function(){return(0,_.j)(this,void 0,void 0,function(){var e,t;return(0,_.k)(this,function(n){switch(n.label){case 0:return e=_.V.of(this._iid).requestQueue,t=new es({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return[2,n.sent().as(eo).metaCounter]}})})},t.prototype.createMetaCounters=function(e){return(0,_.j)(this,void 0,void 0,function(){var t,n;return(0,_.k)(this,function(r){switch(r.label){case 0:return t=_.V.of(this._iid).requestQueue,n=new ea({channelUrl:this.url,channelType:this.channelType,metaCounter:e}),[4,t.send(n)];case 1:return[2,r.sent().as(eu).metaCounter]}})})},t.prototype.updateMetaCounters=function(e,t){return void 0===t&&(t=!1),(0,_.j)(this,void 0,void 0,function(){var n,r;return(0,_.k)(this,function(i){switch(i.label){case 0:return n=_.V.of(this._iid).requestQueue,r=new ec({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:t}),[4,n.send(r)];case 1:return[2,i.sent().as(el).metaCounter]}})})},t.prototype.increaseMetaCounters=function(e){return(0,_.j)(this,void 0,void 0,function(){var t,n;return(0,_.k)(this,function(r){switch(r.label){case 0:return t=_.V.of(this._iid).requestQueue,n=new ec({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"increase"}),[4,t.send(n)];case 1:return[2,r.sent().as(el).metaCounter]}})})},t.prototype.decreaseMetaCounters=function(e){return(0,_.j)(this,void 0,void 0,function(){var t,n;return(0,_.k)(this,function(r){switch(r.label){case 0:return t=_.V.of(this._iid).requestQueue,n=new ec({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"decrease"}),[4,t.send(n)];case 1:return[2,r.sent().as(el).metaCounter]}})})},t.prototype.deleteMetaCounter=function(e){return(0,_.j)(this,void 0,void 0,function(){var t,n;return(0,_.k)(this,function(r){switch(r.label){case 0:return(0,_.u)((0,_.i)("string",e)).throw(_.S.invalidParameters),t=_.V.of(this._iid).requestQueue,n=new eh({channelUrl:this.url,channelType:this.channelType,key:e}),[4,t.send(n)];case 1:return r.sent(),[2]}})})},t.prototype.deleteAllMetaCounters=function(){return(0,_.j)(this,void 0,void 0,function(){var e,t;return(0,_.k)(this,function(n){switch(n.label){case 0:return e=_.V.of(this._iid).requestQueue,t=new ef({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return n.sent(),[2]}})})},t.prototype.muteUser=function(e,t,n){return(0,_.j)(this,void 0,void 0,function(){return(0,_.k)(this,function(r){return[2,this.muteUserWithUserId(e.userId,t,n)]})})},t.prototype.muteUserWithUserId=function(e,t,n){return(0,_.j)(this,void 0,void 0,function(){var r,i;return(0,_.k)(this,function(s){switch(s.label){case 0:return(0,_.u)((0,_.i)("string",e)&&(0,_.i)("number",t,!0)&&(0,_.i)("string",n,!0)).throw(_.S.invalidParameters),r=_.V.of(this._iid).requestQueue,i=new ep({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:t,description:n}),[4,r.send(i)];case 1:return s.sent(),[2]}})})},t.prototype.unmuteUser=function(e){return(0,_.j)(this,void 0,void 0,function(){return(0,_.k)(this,function(t){return[2,this.unmuteUserWithUserId(e.userId)]})})},t.prototype.unmuteUserWithUserId=function(e){return(0,_.j)(this,void 0,void 0,function(){var t,n;return(0,_.k)(this,function(r){switch(r.label){case 0:return(0,_.u)((0,_.i)("string",e)).throw(_.S.invalidParameters),t=_.V.of(this._iid).requestQueue,n=new ev({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}})})},t.prototype.banUser=function(e,t,n){return(0,_.j)(this,void 0,void 0,function(){return(0,_.k)(this,function(r){return[2,this.banUserWithUserId(e.userId,t,n)]})})},t.prototype.banUserWithUserId=function(e,t,n){return(0,_.j)(this,void 0,void 0,function(){var r,i;return(0,_.k)(this,function(s){switch(s.label){case 0:return(0,_.u)((0,_.i)("string",e)&&(0,_.i)("number",t,!0)&&(0,_.i)("string",n,!0)).throw(_.S.invalidParameters),r=_.V.of(this._iid).requestQueue,i=new eg({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:t,description:n}),[4,r.send(i)];case 1:return s.sent(),[2]}})})},t.prototype.unbanUser=function(e){return(0,_.j)(this,void 0,void 0,function(){return(0,_.k)(this,function(t){return[2,this.unbanUserWithUserId(e.userId)]})})},t.prototype.unbanUserWithUserId=function(e){return(0,_.j)(this,void 0,void 0,function(){var t,n;return(0,_.k)(this,function(r){switch(r.label){case 0:return(0,_.u)((0,_.i)("string",e)).throw(_.S.invalidParameters),t=_.V.of(this._iid).requestQueue,n=new eb({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}})})},t.prototype.freeze=function(){return(0,_.j)(this,void 0,void 0,function(){var e,t;return(0,_.k)(this,function(n){switch(n.label){case 0:return e=_.V.of(this._iid).requestQueue,t=new eI({channelUrl:this.url,channelType:this.channelType,freezing:!0}),[4,e.send(t)];case 1:return n.sent(),this.isFrozen=!0,[2]}})})},t.prototype.unfreeze=function(){return(0,_.j)(this,void 0,void 0,function(){var e,t;return(0,_.k)(this,function(n){switch(n.label){case 0:return e=_.V.of(this._iid).requestQueue,t=new eI({channelUrl:this.url,channelType:this.channelType,freezing:!1}),[4,e.send(t)];case 1:return n.sent(),this.isFrozen=!1,[2]}})})},t.prototype.getMessagesByMessageId=function(e,t){return(0,_.j)(this,void 0,void 0,function(){var n;return(0,_.k)(this,function(r){switch(r.label){case 0:return n=(0,_.l)((0,_.l)({},_.aB),t),(0,_.u)((0,_.i)("number",e)&&(0,_.aC)(n)).throw(_.S.invalidParameters),[4,_.y.of(this._iid).getMessagesByMessageId(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}})})},t.prototype.getMessagesByTimestamp=function(e,t){return(0,_.j)(this,void 0,void 0,function(){var n;return(0,_.k)(this,function(r){switch(r.label){case 0:return n=(0,_.l)((0,_.l)({},_.aB),t),(0,_.u)((0,_.i)("number",e)&&(0,_.aC)(n)).throw(_.S.invalidParameters),[4,_.y.of(this._iid).getMessagesByTimestamp(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}})})},t.prototype.getMessageChangeLogsSinceTimestamp=function(e,t){return(0,_.j)(this,void 0,void 0,function(){var n;return(0,_.k)(this,function(r){switch(r.label){case 0:return n=(0,_.l)((0,_.l)({},_.aD),t),(0,_.u)((0,_.i)("number",e)&&(0,_.aE)(n)).throw(_.S.invalidParameters),[4,_.y.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}})})},t.prototype.getMessageChangeLogsSinceToken=function(e,t){return(0,_.j)(this,void 0,void 0,function(){var n;return(0,_.k)(this,function(r){switch(r.label){case 0:return n=(0,_.l)((0,_.l)({},_.aD),t),(0,_.u)((0,_.i)("string",e)&&(0,_.aE)(n)).throw(_.S.invalidParameters),[4,_.y.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}})})},t.prototype._createPendingSendableMessagePayload=function(e,t,n){var r=_.V.of(this._iid).sessionManager;return(0,_.e)({channel_url:this.url,channel_type:this.channelType,msg_id:0,parent_message_id:e.parentMessageId,data:e.data,custom_type:e.customType,mention_type:e.mentionType,sorted_metaarray:e.metaArrays?e.metaArrays.map(function(e){return _.ai.payloadify(e)}):null,apple_critical_alert_options:e.appleCriticalAlertOptions?_.ak.payloadify(e.appleCriticalAlertOptions):null,created_at:n,user:_.av.payloadify(r.currentUser),req_id:t,request_state:_.D.PENDING,mentioned_user_ids:e.mentionedUserIds,mentioned_users:e.mentionedUsers})},t.prototype._createPendingUserMessage=function(e,t,n){var r,i,s={};if(e.translationTargetLanguages)try{for(var o=(0,_.z)(e.translationTargetLanguages),a=o.next();!a.done;a=o.next())s[a.value]=""}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}var u=(0,_.e)((0,_.l)((0,_.l)({},this._createPendingSendableMessagePayload(e,t,n)),{type:_.t.USER,message:e.message,translations:s})),c=new _.x(this._iid,u);return c.messageParams=e,c},t.prototype._createPendingScheduledUserMessage=function(e,t,n){var r=this._createPendingUserMessage(e,t,n);return r.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},r},t.prototype._createPendingFileMessage=function(e,t,n){var r=(0,_.e)((0,_.l)((0,_.l)({},this._createPendingSendableMessagePayload(e,t,n)),{type:_.t.FILE,url:e.fileUrl,file:{name:e.fileName,size:e.fileSize,type:e.mimeType,data:e.data},thumbnails:e.thumbnailSizes?e.thumbnailSizes.map(function(e){return{url:"",width:e.maxWidth,height:e.maxHeight}}):[]})),i=new _.F(this._iid,r);return i.messageParams=e,i},t.prototype._createPendingScheduledFileMessage=function(e,t,n){var r=this._createPendingFileMessage(e,t,n);return r.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},r},t.prototype._markMessageAsFailed=function(e,t,n){void 0===n&&(n=!1),e.errorCode=t.code,t.code===_.K.REQUEST_CANCELED?e.sendingStatus=_.D.CANCELED:n||(e.sendingStatus=_.D.FAILED)},t.prototype.sendUserMessage=function(e){var t=(0,_.l)((0,_.l)({},y),e);return(0,_.u)(b(t)).throw(_.S.invalidParameters),this._sendUserMessage(t)},t.prototype._sendUserMessage=function(e,t){var n=this;void 0===t&&(t=null);var r=_.V.of(this._iid),i=r.dispatcher,s=r.requestQueue,o=t,a=Date.now(),u=new _.ay;if(!o){o=this._generateRequestId();var c=_.V.of(this._iid).dispatcher;(0,_.aw)(2).then(function(){var t=n._createPendingUserMessage(e,o,a);c.dispatch(new _.L({messages:[t],source:_.M.EVENT_MESSAGE_SENT_PENDING})),(0,_.a6)(function(){return(0,_.j)(n,void 0,void 0,function(){return(0,_.k)(this,function(e){return[2,u._trigger(null,t)]})})})})}var l=new eN((0,_.l)({channelUrl:this.url,channelType:this.channelType,reqId:o},e));return s.send(l).then(function(e){var t=e.as(ek).message;i.dispatch(new _.L({messages:[t],source:_.M.EVENT_MESSAGE_SENT_SUCCESS})),(0,_.a6)(function(){return(0,_.j)(n,void 0,void 0,function(){return(0,_.k)(this,function(e){return[2,u._trigger(null,t)]})})})}).catch(function(t){if((0,_.ax)(t))throw t;(0,_.aw)(2).then(function(){var r=n._createPendingUserMessage(e,o,a),s=_.V.of(n._iid).cacheContext.localCacheEnabled&&(0,_.G)(t.code);n._markMessageAsFailed(r,t,s),i.dispatch(new _.L({messages:[r],source:r.sendingStatus===_.D.PENDING?_.M.REQUEST_RESEND_MESSAGE:_.M.EVENT_MESSAGE_SENT_FAILED})),(0,_.a6)(function(){return(0,_.j)(n,void 0,void 0,function(){return(0,_.k)(this,function(e){return[2,u._trigger(t,r)]})})})})}),u},t.prototype._autoResendUserMessage=function(e){return(0,_.u)(e instanceof _.x).throw(_.S.invalidParameters),this._sendUserMessage(e.messageParams,e.reqId)},t.prototype.resendUserMessage=function(e){var t;return(0,_.j)(this,void 0,void 0,function(){var n,r;return(0,_.k)(this,function(i){var s;return(0,_.u)(e instanceof _.x&&!e.scheduledInfo).throw(_.S.invalidParameters),n=new _.aF,r=null!==(t=e.messageParams)&&void 0!==t?t:(0,_.e)({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUsers:e.mentionedUsers,mentionedUserIds:e.mentionedUserIds,mentionedMessageTemplate:e.mentionedMessageTemplate,metaArrays:e.metaArrays,pollId:null===(s=e.poll)||void 0===s?void 0:s.id,parentMessageId:e.parentMessageId,appleCriticalAlertOptions:e.appleCriticalAlertOptions,message:e.message,translationTargetLanguages:Object.keys(e.translations)}),this._sendUserMessage(r,e.reqId).onFailed(function(e){return n.reject(e)}).onSucceeded(function(e){return n.resolve(e)}),[2,n.promise]})})},t.prototype.updateUserMessage=function(e,t){return(0,_.j)(this,void 0,void 0,function(){var n,r,i;return(0,_.k)(this,function(s){switch(s.label){case 0:return n=(0,_.l)((0,_.l)({},U),t),(0,_.u)((0,_.i)("number",e)&&D(n)).throw(_.S.invalidParameters),r=_.V.of(this._iid).requestQueue,i=new eA((0,_.l)({channelType:this.channelType,channelUrl:this.url,messageId:e},n)),[4,r.send(i)];case 1:return[2,s.sent().as(eO).message]}})})},t.prototype.copyUserMessage=function(e,n){var r,i,s;return(0,_.j)(this,void 0,void 0,function(){var o,a;return(0,_.k)(this,function(u){return(0,_.u)(e instanceof t&&n instanceof _.x&&n.sendingStatus===_.D.SUCCEEDED&&e.url===n.channelUrl&&!n.scheduledInfo).throw(_.S.invalidParameters),(0,_.u)(!n.poll).throw(_.S.notSupportedError),o=new _.aF,a=null!==(r=n.messageParams)&&void 0!==r?r:(0,_.l)((0,_.l)({},n),{mentionType:n.mentionType,mentionedUserIds:null!==(i=n.mentionedUserIds)&&void 0!==i?i:null===(s=n.mentionedUsers)||void 0===s?void 0:s.map(function(e){return e.userId}),translationTargetLanguages:Object.keys(n.translations),pushNotificationDeliveryOption:_.aj.DEFAULT,parentMessageId:null,isReplyToChannel:!1}),e._sendUserMessage(a).onSucceeded(function(e){return o.resolve(e)}).onFailed(function(e){return o.reject(e)}),[2,o.promise]})})},t.prototype.translateUserMessage=function(e,t){return(0,_.j)(this,void 0,void 0,function(){var n,r;return(0,_.k)(this,function(i){switch(i.label){case 0:return(0,_.u)(e instanceof _.x&&e.messageId>0&&(0,_.T)("string",t)).throw(_.S.invalidParameters),n=_.V.of(this._iid).requestQueue,r=new eq({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,translationTargetLanguages:t}),[4,n.send(r)];case 1:return[2,i.sent().as(eF).message]}})})},t.prototype._createScheduledUserMessage=function(e,t){var n=this,r=_.V.of(this._iid).requestQueue,i=Date.now(),s=this._generateRequestId();(0,_.aw)(2).then(function(){var r=n._createPendingScheduledUserMessage(e,s,i);(0,_.a6)(function(){return(0,_.j)(n,void 0,void 0,function(){return(0,_.k)(this,function(e){return[2,t._trigger(null,r)]})})})});var o=new eV((0,_.l)({reqId:s,channelType:this.channelType,channelUrl:this.url},e));r.send(o).then(function(e){var r=e.as(eG).message;(0,_.a6)(function(){return(0,_.j)(n,void 0,void 0,function(){return(0,_.k)(this,function(e){return[2,t._trigger(null,r)]})})})}).catch(function(r){if((0,_.ax)(r))throw r;(0,_.aw)(2).then(function(){var o=n._createPendingScheduledUserMessage(e,s,i);n._markMessageAsFailed(o,r),(0,_.a6)(function(){return(0,_.j)(n,void 0,void 0,function(){return(0,_.k)(this,function(e){return[2,t._trigger(r,o)]})})})})})},t.prototype.sendFileMessage=function(e){var t=(0,_.l)((0,_.l)({},C),e);return(0,_.u)(N(t)).throw(_.S.invalidParameters),this._sendFileMessage(t)},t.prototype._sendFileMessage=function(e,t){var n=this;void 0===t&&(t=null);var r=_.V.of(this._iid).dispatcher,i=_.y.of(this._iid).fileMessageQueue,s=t,o=Date.now(),a=new _.ay;return s||(s=this._generateRequestId(),(0,_.aw)(2).then(function(){var t=n._createPendingFileMessage(e,s,o);r.dispatch(new _.L({messages:[t],source:_.M.EVENT_MESSAGE_SENT_PENDING})),(0,_.a6)(function(){return(0,_.j)(n,void 0,void 0,function(){return(0,_.k)(this,function(e){return[2,a._trigger(null,t)]})})})})),i.request(this,s,e).then(function(e){r.dispatch(new _.L({messages:[e],source:_.M.EVENT_MESSAGE_SENT_SUCCESS})),(0,_.a6)(function(){return(0,_.j)(n,void 0,void 0,function(){return(0,_.k)(this,function(t){return[2,a._trigger(null,e)]})})})}).catch(function(t){if((0,_.ax)(t))throw t;(0,_.aw)(2).then(function(){var i=n._createPendingFileMessage(e,s,o),u=_.V.of(n._iid).cacheContext.localCacheEnabled&&(0,_.G)(t.code);n._markMessageAsFailed(i,t,u),r.dispatch(new _.L({messages:[i],source:i.sendingStatus===_.D.PENDING?_.M.REQUEST_RESEND_MESSAGE:_.M.EVENT_MESSAGE_SENT_FAILED})),(0,_.a6)(function(){return(0,_.j)(n,void 0,void 0,function(){return(0,_.k)(this,function(e){return[2,a._trigger(t,i)]})})})})}),a},t.prototype._autoResendFileMessage=function(e){(0,_.u)(e instanceof _.F).throw(_.S.invalidParameters);var t=_.V.of(this._iid).logger;return t.debug("autoResendFileMessage pending",e),this._sendFileMessage(e.messageParams,e.reqId).onFailed(function(e){t.debug("autoResendFileMessage failed",e)}).onSucceeded(function(e){t.debug("autoResendFileMessage success",e)})},t.prototype._createScheduledFileMessage=function(e,t,n,r){var i=this,s=_.V.of(this._iid).requestQueue,o=new eB((0,_.l)((0,_.l)({reqId:n,channelType:this.channelType,channelUrl:this.url},e),{fileUrl:e.fileUrl,requireAuth:e.requireAuth}));s.send(o).then(function(e){var n=e.as(eQ).message;(0,_.a6)(function(){return(0,_.j)(i,void 0,void 0,function(){return(0,_.k)(this,function(e){return[2,t._trigger(null,n)]})})})}).catch(function(s){if((0,_.ax)(s))throw s;(0,_.aw)(2).then(function(){var o=i._createPendingScheduledFileMessage(e,n,r);i._markMessageAsFailed(o,s),(0,_.a6)(function(){return(0,_.j)(i,void 0,void 0,function(){return(0,_.k)(this,function(e){return[2,t._trigger(s,o)]})})})})})},t.prototype.sendFileMessages=function(e){(0,_.u)(e.every(function(e){return N((0,_.l)((0,_.l)({},C),e))})).throw(_.S.invalidParameters);var t,n,r=new _.ay;try{for(var i=(0,_.z)(e),s=i.next();!s.done;s=i.next()){var o=s.value;this.sendFileMessage(o).onPending(function(e){return r._trigger(null,e)}).onFailed(function(e,t){return r._trigger(e,t)}).onSucceeded(function(e){return r._trigger(null,e)})}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},t.prototype.resendFileMessage=function(e,t){var n;return(0,_.j)(this,void 0,void 0,function(){var r,i,s;return(0,_.k)(this,function(o){var a,u;return r=!!e.url||(0,_.q)(t)||(0,_.q)(null===(n=e.messageParams)||void 0===n?void 0:n.file),(0,_.u)(e instanceof _.F&&r&&!e.scheduledInfo).throw(_.S.invalidParameters),i=new _.aF,void 0===(a=t)&&(a=null),s=e.messageParams?(!e.url&&(0,_.q)(a)&&(e.messageParams.file=a),e.messageParams):(0,_.e)({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUsers:e.mentionedUsers,mentionedUserIds:e.mentionedUserIds,metaArrays:e.metaArrays,parentMessageId:e.parentMessageId,appleCriticalAlertOptions:e.appleCriticalAlertOptions,file:null!=a?a:null===(u=e.messageParams)||void 0===u?void 0:u.file,fileUrl:e.url,fileName:e.name,fileSize:e.size,mimeType:e.type,thumbnailSizes:e.thumbnails.map(function(e){return{maxWidth:e.width,maxHeight:e.height}})}),this._sendFileMessage(s,e.reqId).onFailed(function(e){return i.reject(e)}).onSucceeded(function(e){return i.resolve(e)}),[2,i.promise]})})},t.prototype.updateFileMessage=function(e,t){return(0,_.j)(this,void 0,void 0,function(){var n,r,i;return(0,_.k)(this,function(s){switch(s.label){case 0:return n=(0,_.l)((0,_.l)({},P),t),(0,_.u)((0,_.i)("number",e)&&M(n)).throw(_.S.invalidParameters),r=_.V.of(this._iid).requestQueue,i=new eL((0,_.l)({channelType:this.channelType,channelUrl:this.url,messageId:e},n)),[4,r.send(i)];case 1:return[2,s.sent().as(eR).message]}})})},t.prototype.cancelUploadingFileMessage=function(e){return(0,_.j)(this,void 0,void 0,function(){return(0,_.k)(this,function(t){return(0,_.u)((0,_.i)("string",e)).throw(_.S.invalidParameters),_.y.of(this._iid).fileMessageQueue.cancel(this,e),[2,!0]})})},t.prototype.copyFileMessage=function(e,n){var r,i;return(0,_.j)(this,void 0,void 0,function(){var s,o;return(0,_.k)(this,function(a){return(0,_.u)(e instanceof t&&n instanceof _.F&&n.sendingStatus===_.D.SUCCEEDED&&e.url===n.channelUrl&&!n.scheduledInfo).throw(_.S.invalidParameters),s=new _.aF,o=(0,_.l)((0,_.l)({},n),{fileUrl:n.url,fileName:n.name,fileSize:n.size,mimeType:n.type,mentionType:n.mentionType,mentionedUserIds:null!==(r=n.mentionedUserIds)&&void 0!==r?r:null===(i=n.mentionedUsers)||void 0===i?void 0:i.map(function(e){return e.userId}),pushNotificationDeliveryOption:_.aj.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:n.thumbnails.map(function(e){return{maxWidth:e.width,maxHeight:e.height}}),requireAuth:n.requireAuth}),e._sendFileMessage(o).onSucceeded(function(e){return s.resolve(e)}).onFailed(function(e){return s.reject(e)}),[2,s.promise]})})},t.prototype.deleteMessage=function(e){return(0,_.j)(this,void 0,void 0,function(){var t,n;return(0,_.k)(this,function(r){switch(r.label){case 0:return(0,_.u)(e instanceof _.aG).throw(_.S.invalidParameters),e.messageId>0?(t=_.V.of(this._iid).requestQueue,n=new eM({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId}),[4,t.send(n)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.addReaction=function(e,t){return(0,_.j)(this,void 0,void 0,function(){var n,r;return(0,_.k)(this,function(i){switch(i.label){case 0:return(0,_.u)(e instanceof _.aG&&e.messageId>0&&(0,_.i)("string",t)).throw(_.S.invalidParameters),n=_.V.of(this._iid).requestQueue,r=new eD({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:t}),[4,n.send(r)];case 1:return[2,i.sent().as(eP).reactionEvent]}})})},t.prototype.deleteReaction=function(e,t){return(0,_.j)(this,void 0,void 0,function(){var n,r;return(0,_.k)(this,function(i){switch(i.label){case 0:return(0,_.u)(e instanceof _.aG&&e.messageId>0&&(0,_.i)("string",t)).throw(_.S.invalidParameters),n=_.V.of(this._iid).requestQueue,r=new ex({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:t}),[4,n.send(r)];case 1:return[2,i.sent().as(ej).reactionEvent]}})})},t.prototype._updateMessageMetaArray=function(e,t,n,r){return(0,_.j)(this,void 0,void 0,function(){var i,s,o,a,u;return(0,_.k)(this,function(c){switch(c.label){case 0:return s=(i=_.V.of(this._iid)).dispatcher,o=i.requestQueue,a=new eA({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{array:t,mode:n,upsert:r}}),[4,o.send(a)];case 1:return u=c.sent().as(eO).message,s.dispatch(new _.L({messages:[u],source:_.M.EVENT_MESSAGE_UPDATED})),[2,u]}})})},t.prototype.createMessageMetaArrayKeys=function(e,t){return(0,_.j)(this,void 0,void 0,function(){var n;return(0,_.k)(this,function(r){return(0,_.u)(e instanceof _.aG&&e.messageId>0&&(0,_.T)("string",t)).throw(_.S.invalidParameters),n=t.map(function(e){return new _.ai({key:e})}),[2,this._updateMessageMetaArray(e.messageId,n,"add",!0)]})})},t.prototype.deleteMessageMetaArrayKeys=function(e,t){return(0,_.j)(this,void 0,void 0,function(){var n;return(0,_.k)(this,function(r){return(0,_.u)(e instanceof _.aG&&e.messageId>0&&(0,_.T)("string",t)).throw(_.S.invalidParameters),n=t.map(function(e){return new _.ai({key:e})}),[2,this._updateMessageMetaArray(e.messageId,n,"remove",!0)]})})},t.prototype.addMessageMetaArrayValues=function(e,t){return(0,_.j)(this,void 0,void 0,function(){return(0,_.k)(this,function(n){return(0,_.u)(e instanceof _.aG&&e.messageId>0&&t.every(function(e){return e instanceof _.ai})).throw(_.S.invalidParameters),[2,this._updateMessageMetaArray(e.messageId,t,"add",!0)]})})},t.prototype.removeMessageMetaArrayValues=function(e,t){return(0,_.j)(this,void 0,void 0,function(){return(0,_.k)(this,function(n){return(0,_.u)(e instanceof _.aG&&e.messageId>0&&t.every(function(e){return e instanceof _.ai})).throw(_.S.invalidParameters),[2,this._updateMessageMetaArray(e.messageId,t,"remove",!0)]})})},t.prototype.report=function(e,t){return(0,_.j)(this,void 0,void 0,function(){var n,r,i,s;return(0,_.k)(this,function(o){switch(o.label){case 0:return(0,_.u)((0,_.h)(A,e)&&(0,_.i)("string",t)).throw(_.S.invalidParameters),r=(n=_.V.of(this._iid)).sdkState,i=n.requestQueue,s=new eS({channelUrl:this.url,channelType:this.channelType,userId:r.userId,category:e,description:t}),[4,i.send(s)];case 1:return o.sent(),[2]}})})},t.prototype.reportUser=function(e,t,n){return(0,_.j)(this,void 0,void 0,function(){var r,i,s,o;return(0,_.k)(this,function(a){switch(a.label){case 0:return(0,_.u)(e instanceof _.U&&(0,_.h)(A,t)&&(0,_.i)("string",n)).throw(_.S.invalidParameters),i=(r=_.V.of(this._iid)).sdkState,s=r.requestQueue,o=new ew({channelUrl:this.url,channelType:this.channelType,userId:i.userId,offendingUserId:e.userId,category:t,description:n}),[4,s.send(o)];case 1:return a.sent(),[2]}})})},t.prototype.reportMessage=function(e,t,n){return(0,_.j)(this,void 0,void 0,function(){var r,i,s,o;return(0,_.k)(this,function(a){switch(a.label){case 0:return(0,_.u)(e instanceof _.w&&(0,_.h)(A,t)&&(0,_.i)("string",n)).throw(_.S.invalidParameters),i=(r=_.V.of(this._iid)).sdkState,s=r.requestQueue,o=new eC({channelUrl:this.url,channelType:this.channelType,userId:i.userId,offendingUserId:e.sender.userId,messageId:e.messageId,category:t,description:n}),[4,s.send(o)];case 1:return a.sent(),[2]}})})},t}(_.I)},3273:function(e,t,n){"use strict";n.d(t,{A:function(){return ev},D:function(){return z},G:function(){return p},M:function(){return ef},N:function(){return K},P:function(){return M},S:function(){return eo},U:function(){return ed},a:function(){return eb},b:function(){return U},c:function(){return eE},d:function(){return ei},e:function(){return ey},f:function(){return W},g:function(){return et},h:function(){return R},i:function(){return en},j:function(){return eg},k:function(){return eu},l:function(){return ec},m:function(){return x},n:function(){return F},o:function(){return d},p:function(){return Z},q:function(){return Y},r:function(){return _},s:function(){return v},u:function(){return nk},v:function(){return ea}});var r,i=n(18998),s=n(29276);(o=l||(l={})).SUCCESS="success",o.PENDING="pending",o.ERROR="error",(a=d||(d={})).DEFAULT="default",a.ALL="all",a.MENTION_ONLY="mention_only",a.OFF="off",(u=h||(h={})).FCM="gcm",u.APNS="apns",u.UNKNOWN="unknown",(c=f||(f={})).ALTERNATIVE="alternative",c.DEFAULT="default";var o,a,u,c,l,d,h,f,p,_,v,m=function(e){function t(t){var n=t.title,r=t.optionTexts,s=t.data,o=t.allowUserSuggestion,a=t.allowMultipleVotes,u=t.closeAt,c=e.call(this)||this;return c.method=i.A.POST,c.path=i.a,c.params={title:n,options:r,data:s,allow_user_suggestion:o,allow_multiple_votes:a,close_at:u},c}return(0,i._)(t,e),t}(i.b),g=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new i.P(t,n),r}return(0,i._)(t,e),t}(i.c),y=function(e){function t(t){var n=t.channelUrl,r=t.channelType,s=t.pollId,o=e.call(this)||this;return o.method=i.A.GET,o.path="".concat(i.a,"/").concat(encodeURIComponent(s)),o.params={channel_url:n,channel_type:r},o}return(0,i._)(t,e),t}(i.b),b=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new i.P(t,n),r}return(0,i._)(t,e),t}(i.c),E=function(e){function t(t){var n=t.channelUrl,r=t.channelType,s=t.pollId,o=t.pollOptionId,a=e.call(this)||this;return a.method=i.A.GET,a.path="".concat(i.a,"/").concat(encodeURIComponent(s),"/options/").concat(encodeURIComponent(o)),a.params={channel_url:n,channel_type:r},a}return(0,i._)(t,e),t}(i.b),I=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pollOption=new i.d(t,n),r}return(0,i._)(t,e),t}(i.c),T=function(e){function t(t){var n=t.channelType,r=t.channelUrl,s=t.timestamp,o=t.token,a=e.call(this)||this;return a.method=i.A.GET,a.path="".concat((0,i.g)(n),"/").concat(encodeURIComponent(r),"/polls/changelogs"),a.params=(0,i.e)({change_ts:s,token:o}),a}return(0,i._)(t,e),t}(i.b),S=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.updatedPolls=n.updated.map(function(e){return e?new i.P(t,e):null}),r.deletedPollIds=n.deleted.map(function(e){return e}),r.hasMore=n.has_more,r.nextToken=n.next,r}return(0,i._)(t,e),t}(i.c),w={title:null,optionTexts:null,data:null,allowUserSuggestion:null,allowMultipleVotes:null,closeAt:-1},C=function(e){return(0,i.i)("string",e.title)&&(0,i.v)(e.optionTexts)&&(0,i.f)(e.data)&&(0,i.i)("boolean",e.allowUserSuggestion,!0)&&(0,i.i)("boolean",e.allowMultipleVotes,!0)&&(0,i.i)("number",e.closeAt,!0)},N={channelUrl:null,channelType:null,pollId:null,pollOptionId:null},k=function(e){return(0,i.i)("string",e.channelUrl)&&(0,i.h)(i.C,e.channelType)&&(0,i.i)("number",e.pollId)&&(0,i.i)("number",e.pollOptionId)},A={channelUrl:null,channelType:null,pollId:null},O=function(e){return(0,i.i)("string",e.channelUrl)&&""!==e.channelUrl&&(0,i.h)(i.C,e.channelType)&&(0,i.i)("number",e.pollId)},L={},R=function(){function e(e,t){var n=t.sdkState,r=t.dispatcher,i=t.sessionManager,s=t.requestQueue,o=t.logger;this._iid=e,this._sdkState=n,this._sessionManager=i,this._requestQueue=s,this._dispatcher=r,this._logger=o,L[e]=this}return e.of=function(e){return L[e]},e.prototype.get=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:return(0,i.u)(O(e)).throw(i.S.invalidParameters),t=new y((0,i.l)({},e)),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as(b).poll]}})})},e.prototype.create=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n;return(0,i.k)(this,function(r){switch(r.label){case 0:return(0,i.u)(C(e)).throw(i.S.invalidParameters),t=e.data,n=new m((0,i.l)((0,i.l)({},e),{data:t})),[4,this._requestQueue.send(n)];case 1:return[2,r.sent().as(g).poll]}})})},e.prototype.getOption=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:return(0,i.u)(k(e)).throw(i.S.invalidParameters),t=new E((0,i.l)({},e)),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as(I).pollOption]}})})},e.prototype.getPollChangeLogs=function(e,t,n,r){return void 0===r&&(r=i.M.SYNC_POLL_CHANGELOGS),(0,i.j)(this,void 0,void 0,function(){var s,o,a,u,c,l;return(0,i.k)(this,function(d){switch(d.label){case 0:return s=new T((0,i.e)({channelType:t,channelUrl:e,timestamp:"number"==typeof n?n:null,token:"string"==typeof n?n:null})),[4,this._requestQueue.send(s)];case 1:return a=(o=d.sent().as(S)).updatedPolls,u=o.deletedPollIds,c=o.hasMore,l=o.nextToken,a.length>0&&this._dispatcher.dispatch(new i.m({polls:a,source:r})),[2,{updatedPolls:a,deletedPollIds:u,hasMore:c,token:l}]}})})},e}(),M=function(e,t){this.pollId=0,this.messageId=0,this.pollId=t.poll.id,this.messageId=t.poll.message_id,this._iid=e,this._payload=t},U=function(e){this.pollId=0,this.messageId=0,this.pollId=e.poll_id,this.messageId=e.message_id,this._payload=e},D=function(e){function t(t){var n=t.channelUrl,r=t.channelType,s=t.token,o=t.limit,a=e.call(this)||this;return a.method=i.A.GET,a.path=i.a,a.params={channel_url:n,channel_type:r,token:s,limit:o},a}return(0,i._)(t,e),t}(i.b),P=function(e){function t(t,n){var r,s=this;return(s=e.call(this,t,n)||this).polls=(null!==(r=n.polls)&&void 0!==r?r:[]).map(function(e){return new i.P(t,e)}),s.token=n.next,s}return(0,i._)(t,e),t}(i.c),x=function(e){function t(t,n){return e.call(this,t,n.channelUrl,n.channelType,n)||this}return(0,i._)(t,e),t.prototype.next=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=i.V.of(this._iid).requestQueue,t=new D((0,i.l)((0,i.l)({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return r=(n=o.sent().as(P)).polls,s=n.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,r];case 2:return[2,[]];case 3:throw i.S.queryInProgress;case 4:return[3,6];case 5:throw i.S.invalidParameters;case 6:return[2]}})})},t}(i.n),j=function(e){function t(t){var n=t.channelUrl,r=t.channelType,s=t.pollId,o=t.pollOptionId,a=t.token,u=t.limit,c=e.call(this)||this;return c.method=i.A.GET,c.path="".concat(i.a,"/").concat(encodeURIComponent(s),"/options/").concat(encodeURIComponent(o),"/voters"),c.params={channel_url:n,channel_type:r,token:a,limit:u},c}return(0,i._)(t,e),t}(i.b),q=function(e){function t(t,n){var r,s=this;return(s=e.call(this,t,n)||this).voters=(null!==(r=n.voters)&&void 0!==r?r:[]).map(function(e){return new i.U(t,e)}),s.token=n.next,s}return(0,i._)(t,e),t}(i.c),F=function(e){function t(t,n){var r=e.call(this,t,n.channelUrl,n.channelType,n)||this;return r.pollId=n.pollId,r.pollOptionId=n.pollOptionId,r}return(0,i._)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&(0,i.i)("number",this.pollId)&&(0,i.i)("number",this.pollOptionId)},t.prototype.next=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=i.V.of(this._iid).requestQueue,t=new j((0,i.l)((0,i.l)({},this),{pollId:this.pollId,pollOptionId:this.pollOptionId,token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return r=(n=o.sent().as(q)).voters,s=n.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,r];case 2:return[2,[]];case 3:throw i.S.queryInProgress;case 4:return[3,6];case 5:throw i.S.invalidParameters;case 6:return[2]}})})},t}(i.n),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="poll",t}return(0,i._)(t,e),t.prototype.init=function(t,n){var r=n.sdkState,i=n.dispatcher,s=n.sessionManager,o=n.requestQueue,a=n.logger,u=n.onlineDetector,c=n.cacheContext;e.prototype.init.call(this,t,{sdkState:r,dispatcher:i,sessionManager:s,requestQueue:o,logger:a,onlineDetector:u,cacheContext:c}),this._manager=new R(t,{sdkState:r,dispatcher:i,sessionManager:s,requestQueue:o,logger:a,onlineDetector:u,cacheContext:c})},t.prototype.create=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){return t=(0,i.l)((0,i.l)({},w),e),(0,i.u)(C(t)).throw(i.S.invalidParameters),[2,this._manager.create(t)]})})},t.prototype.get=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){return t=(0,i.l)((0,i.l)({},A),e),(0,i.u)(O(t)).throw(i.S.invalidParameters),[2,this._manager.get(t)]})})},t.prototype.getOption=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){return t=(0,i.l)((0,i.l)({},N),e),(0,i.u)(k(t)).throw(i.S.invalidParameters),[2,this._manager.getOption(t)]})})},t}(i.o),G={profileImage:null,profileUrl:null,nickname:null},B=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach(function(e){n.hasOwnProperty(e)&&(n[e]=t[e])}),n}return(0,i._)(t,e),t}(function(){this.onSessionExpired=i.r,this.onSessionTokenRequired=function(e){return e(null)},this.onSessionError=i.r,this.onSessionRefreshed=i.r,this.onSessionClosed=i.r}),Q=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach(function(e){n.hasOwnProperty(e)&&(n[e]=t[e])}),n}return(0,i._)(t,e),t}(function(){this.onConnected=i.r,this.onReconnectStarted=i.r,this.onReconnectSucceeded=i.r,this.onReconnectFailed=i.r,this.onDisconnected=i.r}),H=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach(function(e){n.hasOwnProperty(e)&&(n[e]=t[e])}),n}return(0,i._)(t,e),t}(function(){this.onFriendsDiscovered=i.r,this.onTotalUnreadMessageCountUpdated=i.r}),z=100,K="GroupChannel",W=100,Z=10,Y=20;(X=p||(p={})).LATEST_LAST_MESSAGE="latest_last_message",X.CHRONOLOGICAL="chronological",X.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",X.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical",(J=_||(_={})).CHRONOLOGICAL="chronological",J.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",J.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical",($=v||(v={})).CREATED_AT="created_at",$.SCHEDULED_AT="scheduled_at";var X,J,$,ee,et=function(e){switch(e){case p.LATEST_LAST_MESSAGE:return["-lastMessageUpdatedAt","-createdAt","syncIndex"];case p.CHRONOLOGICAL:return["-createdAt","syncIndex"];case p.CHANNEL_NAME_ALPHABETICAL:return["name"]}},en=function(){function e(){this.messageTypeFilter=i.s.ALL,this.customTypesFilter=null,this.senderUserIdsFilter=null,this.replyType=i.R.NONE}return e.prototype.clone=function(){var t=new e,n=JSON.parse(JSON.stringify(this));return Object.keys(n).forEach(function(e){t[e]=n[e]}),t},e.prototype.match=function(e){switch(this.messageTypeFilter){case i.s.USER:if(e.messageType!==i.t.USER)return!1;break;case i.s.FILE:if(e.messageType!==i.t.FILE)return!1;break;case i.s.ADMIN:if(e.messageType!==i.t.ADMIN)return!1}if(this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes(e.customType)||this.senderUserIdsFilter&&this.senderUserIdsFilter.length>0&&(!(e instanceof i.w)||!this.senderUserIdsFilter.includes(e.sender.userId)))return!1;switch(this.replyType){case i.R.NONE:if(e.parentMessageId>0)return!1;break;case i.R.ONLY_REPLY_TO_CHANNEL:if(e instanceof i.w&&e.parentMessageId>0&&!e.replyToChannel)return!1}return!0},e}();(er=ee||(ee={})).CHANNEL_LATEST="channel_latest",er.NEWEST_CHILD_MESSAGE="newest_child_message";var er,ei,es=function(e){switch(e){case ee.CHANNEL_LATEST:return["channelUrl","-createdAt","-messageId"];case ee.NEWEST_CHILD_MESSAGE:return["channelUrl","-parentMessageId","-createdAt","-messageId"]}},eo=(0,i.l)((0,i.l)({},s.U),{scheduledAt:null}),ea=function(e){return(0,s.v)(e)&&(0,i.i)("number",e.scheduledAt,!0)},eu=(0,i.l)((0,i.l)({},s.B),{scheduledAt:null,file:null,fileUrl:null,fileName:null,mimeType:null,fileSize:null,thumbnailSizes:null,requireAuth:!1}),ec=function(e){return(0,s.b)(e)&&(0,i.i)("number",e.scheduledAt)&&((0,i.q)(e.file)||(0,i.i)("string",e.fileUrl))&&(0,i.i)("string",e.fileName,!0)&&(0,i.i)("string",e.mimeType,!0)&&(0,i.i)("number",e.fileSize,!0)&&(null===e.thumbnailSizes||e.thumbnailSizes.every(function(e){return(0,i.i)("object",e)&&e.maxWidth>0&&e.maxHeight>0}))},el={},ed=function(e){function t(t,n){var r=n.sdkState,i=n.cacheContext,s=e.call(this,t)||this;return s._sdkState=r,s._cacheContext=i,el[t]=s,s}return(0,i._)(t,e),t.of=function(e){return el[e]},Object.defineProperty(t.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return e&&e.collection("UnsentMessage")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),t.prototype._serialize=function(e){if(e.messageId>0)throw i.S.invalidParameters;var t,n,r=(0,i.l)({},e.serialize());return e instanceof i.x?(e.messageParams&&(r.messageParams=(0,s.s)(e.messageParams)),e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(r.scheduledInfo.scheduledMessageParams=(n=e.scheduledInfo.scheduledMessageParams,(0,i.l)((0,i.l)({},(0,s.s)(n)),{scheduledAt:n.scheduledAt})))):e instanceof i.F&&(e.messageParams&&(r.messageParams=(0,s.a)(e.messageParams)),e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(r.scheduledInfo.scheduledMessageParams=(t=e.scheduledInfo.scheduledMessageParams,(0,i.l)((0,i.l)({},(0,s.a)(t)),{scheduledAt:t.scheduledAt})))),r},t.prototype._deserialize=function(e){return e?(e=(0,i.l)((0,i.l)({},e),{messageId:parseInt(e.messageId)}),i.y.of(this._iid).buildMessageFromSerializedData(e)):null},t.prototype._deserializeWithMessageCreateParams=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,o,a,u;return(0,i.k)(this,function(c){switch(c.label){case 0:return t=i.y.of(this._iid),n=this._deserialize(e),e.messageParams?n instanceof i.x?(r=e.messageParams,n.messageParams=t.buildUserMessageCreateParamsFromSerializedData(r,n),[3,4]):[3,1]:[3,4];case 1:return n instanceof i.F?(r=e.messageParams).fileKey&&"string"==typeof r.fileKey&&(0,s.i)(r.fileType)?(o=r,[4,this.collection.getBlob(r.fileKey)]):[3,3]:[3,4];case 2:o.file=c.sent(),c.label=3;case 3:n.messageParams=t.buildFileMessageCreateParamsFromSerializedData(r,n),c.label=4;case 4:return n.scheduledInfo&&e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams?n instanceof i.x?(a=e.scheduledInfo.scheduledMessageParams,n.scheduledInfo.scheduledMessageParams=t.buildScheduledUserMessageCreateParamsFromSerializedData(a,n),[3,8]):[3,5]:[3,8];case 5:return n instanceof i.F?(a=e.scheduledInfo.scheduledMessageParams).fileKey&&"string"==typeof a.fileKey&&(0,s.i)(a.fileType)?(u=a,[4,this.collection.getBlob(a.fileKey)]):[3,7]:[3,8];case 6:u.file=c.sent(),c.label=7;case 7:n.scheduledInfo.scheduledMessageParams=t.buildScheduledFileMessageCreateParamsFromSerializedData(a,n),c.label=8;case 8:return[2,n]}})})},t.prototype.get=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(e))]:[3,2];case 1:if(t=n.sent())return[2,this._deserializeWithMessageCreateParams(t)];n.label=2;case 2:return[2,null]}})})},t.prototype.fetch=function(e){var t=e.channelUrl,n=void 0===t?null:t,r=e.filter,s=void 0===r?new en:r,o=e.order,a=void 0===o?ee.CHANNEL_LATEST:o,u=e.sendingStatus,c=void 0===u?null:u,l=e.backward,d=void 0!==l&&l,h=e.parentMessageId,f=void 0===h?null:h;return(0,i.j)(this,void 0,void 0,function(){var e,t,r,o=this;return(0,i.k)(this,function(u){switch(u.label){case 0:return this.localCacheEnabled?(e=es(a),t={"/where":function(e){return!!(a!==ee.NEWEST_CHILD_MESSAGE||f&&0!==e.parentMessageId&&e.parentMessageId===f)&&s.match(o._deserialize(e))}},n&&(t.channelUrl=n),c&&(t.sendingStatus=c),r={where:t,index:e,backward:d},[4,this.collection.query(r)]):[3,3];case 1:return[4,u.sent().fetch({})];case 2:return[2,Promise.all(u.sent().map(function(e){return(0,i.j)(o,void 0,void 0,function(){return(0,i.k)(this,function(t){switch(t.label){case 0:return[4,this._deserializeWithMessageCreateParams(e)];case 1:return[2,t.sent()]}})})}))];case 3:return[2,[]]}})})},t.prototype.getAllChildMessages=function(e,t){return void 0===t&&(t=new en),(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(n){switch(n.label){case 0:return[4,this.fetch({filter:t,order:ee.NEWEST_CHILD_MESSAGE,channelUrl:e.channelUrl,backward:!1,parentMessageId:e.messageId})];case 1:return[2,n.sent()]}})})},t.prototype.upsert=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n=this;return(0,i.k)(this,function(r){switch(r.label){case 0:return this.localCacheEnabled?[4,this.saveBlobs(e)]:[3,3];case 1:return r.sent(),t=e.map(function(e){return n._serialize(e)}),[4,this.collection.upsertMany(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.upsertChildMessages=function(e){return(0,i.j)(this,void 0,void 0,function(){var t=this;return(0,i.k)(this,function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map(function(e){return(0,i.j)(t,void 0,void 0,function(){var t,n;return(0,i.k)(this,function(r){switch(r.label){case 0:return t=[],(null===(n=e.threadInfo)||void 0===n?void 0:n.replyCount)>0?[4,this.getAllChildMessages(e)]:[3,2];case 1:t=r.sent(),r.label=2;case 2:return t.length>0?(t.forEach(function(t){return t.applyParentMessage(e)}),[4,this.upsert(t)]):[3,4];case 3:r.sent(),r.label=4;case 4:return[2]}})})}))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.remove=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o;return(0,i.k)(this,function(a){switch(a.label){case 0:if(!this.localCacheEnabled)return[3,8];a.label=1;case 1:a.trys.push([1,6,7,8]),n=(t=(0,i.z)(e)).next(),a.label=2;case 2:return n.done?[3,5]:(r=n.value,[4,this.collection.remove(r)]);case 3:a.sent(),a.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return s={error:a.sent()},[3,8];case 7:try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(s)throw s.error}return[7];case 8:return[2]}})})},t.prototype.removeMessagesOfChannel=function(e){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(t){switch(t.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e}})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.clear=function(){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.saveBlobs=function(e){return(0,i.j)(this,void 0,void 0,function(){var t=this;return(0,i.k)(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(e){return(0,i.j)(t,void 0,void 0,function(){var t,n,r;return(0,i.k)(this,function(o){switch(o.label){case 0:return e instanceof i.F?e.messageParams&&(t=e.messageParams).file&&(0,s.c)(t.file)?[4,this.collection.saveBlob(t.file,e.reqId)]:[3,2]:[3,4];case 1:r=o.sent(),t.fileKey=r,t.fileType=s.F.BLOB,o.label=2;case 2:return e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(n=e.scheduledInfo.scheduledMessageParams).file&&(0,s.c)(n.file)?[4,this.collection.saveBlob(n.file,e.reqId)]:[3,4];case 3:r=o.sent(),n.fileKey=r,n.fileType=s.F.BLOB,o.label=4;case 4:return[2]}})})}))];case 1:return n.sent(),[2]}})})},t}(i.I),eh={},ef=function(e){function t(t,n){var r=n.sdkState,i=n.cacheContext,s=n.unsentMessageCache,o=e.call(this,t)||this;return o._sdkState=r,o._cacheContext=i,o._unsentMessageCache=s,eh[t]=o,o}return(0,i._)(t,e),t.of=function(e){return eh[e]},Object.defineProperty(t.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return e?e.collection("Message"):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),t.prototype._serialize=function(e){return(0,i.l)((0,i.l)({},e.serialize()),{messageId:"".concat(e.messageId)})},t.prototype._deserialize=function(e){return e=(0,i.l)((0,i.l)({},e),{messageId:parseInt(e.messageId)}),i.y.of(this._iid).buildMessageFromSerializedData(e)},t.prototype.get=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(e))]:[3,2];case 1:if(t=n.sent())return[2,this._deserialize(t)];n.label=2;case 2:return[2,null]}})})},t.prototype.fetch=function(e){var t=e.channelUrl,n=e.token,r=e.limit,s=void 0===r?100:r,o=e.filter,a=void 0===o?new en:o,u=e.order,c=void 0===u?ee.CHANNEL_LATEST:u,l=e.backward,d=void 0!==l&&l,h=e.parentMessageId,f=void 0===h?null:h,p=e.isPollOnly,_=void 0!==p&&p;return(0,i.j)(this,void 0,void 0,function(){var e,r=this;return(0,i.k)(this,function(o){switch(o.label){case 0:return this.localCacheEnabled?(e={where:{channelUrl:t,"/where":function(e){if(n)switch(c){case ee.CHANNEL_LATEST:if(!d&&e.createdAt>n||d&&e.createdAt<n)return!1;break;case ee.NEWEST_CHILD_MESSAGE:if(!f||0===e.parentMessageId||e.parentMessageId!==f)return!1}return!(_&&!e._poll)&&a.match(r._deserialize(e))}},index:es(c),backward:d},[4,this.collection.query(e)]):[3,3];case 1:return[4,o.sent().fetch({limit:s})];case 2:return[2,Promise.all(o.sent().map(function(e){return(0,i.j)(r,void 0,void 0,function(){return(0,i.k)(this,function(t){return[2,this._deserialize(e)]})})}))];case 3:return[2,[]]}})})},t.prototype.getAllChildMessages=function(e,t){return void 0===t&&(t=new en),(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(n){switch(n.label){case 0:return[4,this.fetch({channelUrl:e.channelUrl,token:Date.now(),limit:null,backward:!1,filter:t,order:ee.NEWEST_CHILD_MESSAGE,parentMessageId:e.messageId})];case 1:return[2,n.sent()]}})})},t.prototype.upsert=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n=this;return(0,i.k)(this,function(r){switch(r.label){case 0:return this.localCacheEnabled?[4,this.saveBlobs(e)]:[3,5];case 1:return r.sent(),t=e.map(function(e){return n._serialize(e)}),[4,this.collection.upsertMany(t)];case 2:return r.sent(),[4,this.upsertChildMessages(e)];case 3:return r.sent(),[4,this._unsentMessageCache.upsertChildMessages(e)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},t.prototype.upsertChildMessages=function(e){return(0,i.j)(this,void 0,void 0,function(){var t=this;return(0,i.k)(this,function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map(function(e){return(0,i.j)(t,void 0,void 0,function(){var t,n;return(0,i.k)(this,function(r){switch(r.label){case 0:return t=[],(null===(n=e.threadInfo)||void 0===n?void 0:n.replyCount)>0?[4,this.getAllChildMessages(e)]:[3,2];case 1:t=r.sent(),r.label=2;case 2:return t.length>0?(t.forEach(function(t){return t.applyParentMessage(e)}),[4,this.upsert(t)]):[3,4];case 3:r.sent(),r.label=4;case 4:return[2]}})})}))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.remove=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o;return(0,i.k)(this,function(a){switch(a.label){case 0:if(!this.localCacheEnabled)return[3,8];a.label=1;case 1:a.trys.push([1,6,7,8]),n=(t=(0,i.z)(e)).next(),a.label=2;case 2:return n.done?[3,5]:(r=n.value,[4,this.collection.remove("".concat(r))]);case 3:a.sent(),a.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return s={error:a.sent()},[3,8];case 7:try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(s)throw s.error}return[7];case 8:return[2]}})})},t.prototype.removeMessagesOfChannel=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e},index:es(ee.CHANNEL_LATEST)})]:[3,6];case 1:return n.sent(),[4,(t=this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 2:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 3:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 4:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 5:n.sent(),n.label=6;case 6:return[2]}})})},t.prototype.removeUnderOffset=function(e,t){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e,createdAt:{"<":t}},index:es(ee.CHANNEL_LATEST)})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.clear=function(){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.countBetween=function(e,t,n){return(0,i.j)(this,void 0,void 0,function(){var r,s=this;return(0,i.k)(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?(r=es(ee.CHANNEL_LATEST),[4,this.collection.query({where:{channelUrl:e,"/where":function(e){var r=s._deserialize(e);return n.includes(r.createdAt)&&t.match(r)}},index:r}).count()]):[3,2];case 1:return[2,i.sent()];case 2:return[2,0]}})})},t.prototype.saveBlobs=function(e){return(0,i.j)(this,void 0,void 0,function(){var t=this;return(0,i.k)(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(e){return(0,i.j)(t,void 0,void 0,function(){var t,n;return(0,i.k)(this,function(r){switch(r.label){case 0:return e instanceof i.F&&e.messageParams&&(t=e.messageParams).file&&(0,s.c)(t.file)?[4,this.collection.saveBlob(t.file,e.reqId)]:[3,2];case 1:n=r.sent(),t.fileKey=n,r.label=2;case 2:return[2]}})})}))];case 1:return n.sent(),[2]}})})},t}(i.I),ep=function(e){function t(){var t=e.call(this)||this;return t._pauseDelayTimer=null,t._currentState="visible",t._toggleState=t._toggleState.bind(t),t}return(0,i._)(t,e),Object.defineProperty(t.prototype,"isAvailable",{get:function(){return"undefined"!=typeof window&&!!window.addEventListener&&!!window.removeEventListener},enumerable:!1,configurable:!0}),t.prototype._toggleState=function(){var e=this;"hidden"!==document.visibilityState?"hidden"===this._currentState&&(this._pauseDelayTimer&&(clearTimeout(this._pauseDelayTimer),this._pauseDelayTimer=null),this.dispatch("resume")):"hidden"!==this._currentState&&(this._pauseDelayTimer=setTimeout(function(){e._pauseDelayTimer=null,e.dispatch("pause")},3e4)),this._currentState=document.visibilityState},t.prototype.start=function(){this.isAvailable&&window.addEventListener("visibilitychange",this._toggleState,{capture:!0})},t.prototype.stop=function(){this.isAvailable&&window.removeEventListener("visibilitychange",this._toggleState,{capture:!0})},t}(i.E),e_=function(){function e(e){var t=e.logger,n=e.connectionDelegate,r=void 0===n?null:n,i=this;this._onlineWorker=function(){var e;return null===(e=i.connectionDelegate)||void 0===e?void 0:e.reconnect()},this._offlineWorker=function(){var e;return null===(e=i.connectionDelegate)||void 0===e?void 0:e.disconnect()},this.unsubscribes=[],this._onlineListener=function(e){if(i.isAvailableOnWeb)return window.addEventListener("online",e),function(){return window.removeEventListener("online",e,!1)}},this._offlineListener=function(e){if(i.isAvailableOnWeb)return window.addEventListener("offline",e),function(){return window.removeEventListener("offline",e,!1)}},this.logger=t,r&&(this.connectionDelegate=r)}return Object.defineProperty(e.prototype,"isAvailableOnWeb",{get:function(){return"undefined"!=typeof window&&window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&void 0!==navigator.onLine},enumerable:!1,configurable:!0}),e.prototype.setOnlineListener=function(e){e&&"function"==typeof e&&(this._onlineListener=e)},e.prototype.setOfflineListener=function(e){e&&"function"==typeof e&&(this._offlineListener=e)},e.prototype.start=function(){this.unsubscribes=[this._onlineListener(this._onlineWorker),this._offlineListener(this._offlineWorker)]},e.prototype.stop=function(){var e=this;this.unsubscribes.forEach(function(t){try{null==t||t()}catch(t){e.logger.warn(t.message)}}),this.unsubscribes=[]},e.prototype.isOnline=function(){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(e){return this.isAvailableOnWeb?[2,navigator.onLine]:[2,new Promise(function(e){fetch("https://www.google.com",{method:i.A.GET,mode:"no-cors"}).then(function(){return e(!0)}).catch(function(){return e(!1)})})]})})},e}(),ev=function(e){function t(t){var n=t.message,r=e.call(this)||this;return r.message=n,r}return(0,i._)(t,e),t}(i.B),em={},eg=function(){function e(e,t){var n=t.localCacheEnabled,r=t.dispatcher,s=t.sdkState,o=t.logger,a=this;em[e]=this,this._iid=e,em[e]=this,this._localCacheEnabled=n,this._isProcessingAutoResend=!1,this._autoResendQueue=[],this._dispatcher=r,this._logger=o,this._sdkState=s,this._localCacheEnabled&&r.on(function(e){if(e instanceof i.H)switch(e.stateType){case i.J.CONNECTED:a._isProcessingAutoResend||a.processAutoResendRegisteredPendingMessages().then(function(){return a._processNextAutoResend()});break;case i.J.DISCONNECTED:a._isProcessingAutoResend=!1}})}return e.of=function(e){return em[e]},e.prototype.processNonAutoResendRegisteredPendingMessages=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r,s,o;return(0,i.k)(this,function(a){switch(a.label){case 0:return[4,this._fetchAllCachedPendingMessages()];case 1:e=a.sent();try{for(n=(t=(0,i.z)(e)).next();!n.done;n=t.next())0===(r=n.value).errorCode&&(this._logger.debug("cached pending message is not auto-resend registered. changing its sending status to failed: ",r.reqId),r.sendingStatus=i.D.FAILED,r.errorCode=i.K.ACK_TIMEOUT,this._dispatcher.dispatch(new i.L({messages:[r],source:i.M.LOCAL_MESSAGE_FAILED})))}catch(e){s={error:e}}finally{try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(s)throw s.error}}return[2]}})})},e.prototype.processAutoResendRegisteredPendingMessages=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r,s,o,a,u;return(0,i.k)(this,function(c){switch(c.label){case 0:return[4,this._fetchAllCachedPendingMessages()];case 1:e=c.sent();try{for(n=(t=(0,i.z)(e)).next();!n.done;n=t.next())(r=n.value).errorCode&&(0,i.G)(r.errorCode)&&(s=(new Date).getTime(),o=r.createdAt+2592e5,s<=o?0>this._autoResendQueue.map(function(e){return e.reqId}).indexOf(r.reqId)&&this._autoResendQueue.push(r):(this._logger.debug("auto-resend registered pending messaged expired. expiration date: ",new Date(o).toLocaleString()),r.sendingStatus=i.D.FAILED,this._dispatcher.dispatch(new i.L({messages:[r],source:i.M.LOCAL_MESSAGE_FAILED}))))}catch(e){a={error:e}}finally{try{n&&!n.done&&(u=t.return)&&u.call(t)}finally{if(a)throw a.error}}return[2]}})})},e.prototype.completeCurrentAndProcessNextAutoResend=function(e){if(this._localCacheEnabled&&(e.sendingStatus===i.D.SUCCEEDED||e.sendingStatus===i.D.FAILED&&!(0,i.G)(e.errorCode))){var t=this.indexOf(e);t>=0&&this._autoResendQueue.splice(t,1),0===t&&this._processNextAutoResend()}},e.prototype._fetchAllCachedPendingMessages=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t;return(0,i.k)(this,function(n){switch(n.label){case 0:return(e=ed.of(this._iid))?[4,e.fetch({sendingStatus:i.D.PENDING,backward:!0})]:[3,2];case 1:return t=n.sent(),[3,3];case 2:t=[],n.label=3;case 3:return[2,t]}})})},e.prototype.indexOf=function(e){return this._autoResendQueue.length>0?this._autoResendQueue.map(function(e){return e.reqId}).indexOf(e.reqId):-1},e.prototype._isNotInQueue=function(e){return -1===this._autoResendQueue.map(function(e){return e.reqId}).indexOf(e.reqId)},e.prototype._processNextAutoResend=function(){return(0,i.j)(this,void 0,void 0,function(){var e;return(0,i.k)(this,function(t){if(this._localCacheEnabled&&"foreground"===this._sdkState.appState)try{this._autoResendQueue.length>0?(this._isProcessingAutoResend||(this._logger.debug("auto-resend queue started."),this._isProcessingAutoResend=!0),e=this._autoResendQueue[0],this._dispatcher.dispatch(new ev({message:e})),this._logger.debug("processing auto-resend for message request id: ",e.reqId)):(this._logger.debug("auto-resend queue finished."),this._isProcessingAutoResend=!1)}catch(e){this._logger.warn("process auto-resend error: ",e),this._isProcessingAutoResend=!1}return[2]})})},e}();(tt=ei||(ei={}))[tt.USER_BLOCK=20001]="USER_BLOCK",tt[tt.USER_UNBLOCK=2e4]="USER_UNBLOCK",tt[tt.FRIEND_DISCOVERED=20900]="FRIEND_DISCOVERED";var ey=function(){function e(e){this.category=e.cat,this.data=e.data}return e.getDataAsUserBlockEvent=function(e,t){var n=t.data,r=n.blocker,s=n.blockee;return{blocker:new i.U(e,r),blockee:new i.U(e,s)}},e.getDataAsFriendDiscoveredEvent=function(e,t){var n=t.data.friend_discoveries;return{friendDiscoveries:Array.isArray(n)?n.map(function(t){return new i.U(e,t)}):[]}},e}(),eb=function(e){function t(t,n){var r=n.userId,i=e.call(this)||this;return i._iid=t,i.userId=r,i}return(0,i._)(t,e),t}(i.B),eE=function(e){function t(t,n,r){var i=e.call(this,t,"USEV",r)||this;return i.event=new ey(r),i}return(0,i._)(t,e),t}(i.W),eI=function(e){function t(t){var n=t.userId,r=t.nickname,s=t.profileUrl,o=t.profileImage,a=t.preferredLanguages,u=e.call(this)||this;return u.method=i.A.PUT,u.path="".concat(i.N,"/").concat(encodeURIComponent(n)),u.params=(0,i.e)({nickname:void 0===r?null:r,profile_url:void 0===s?null:s,profile_file:void 0===o?null:o,preferred_languages:void 0===a?null:a}),u}return(0,i._)(t,e),t}(i.b),eT=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.user=null,r.user=new i.U(t,(0,i.l)({},n)),r}return(0,i._)(t,e),t}(i.c),eS=function(e){function t(t){var n=t.userId,r=t.token,s=e.call(this)||this;return s.method=i.A.POST,s.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/push/apns"),s.params={apns_device_token:r,always_push:!0},s}return(0,i._)(t,e),t}(i.b);tn=i.c,(0,i._)(function(e,t){var n=tn.call(this,e,t)||this;return n.token=t.token,n.type=t.type?h[t.type.toLowerCase()]:h.UNKNOWN,n.user=new i.U(e,t.user),n},tn);var ew=function(e){function t(t){var n=t.userId,r=t.token,s=e.call(this)||this;return s.method=i.A.POST,s.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/push/gcm"),s.params={gcm_reg_token:r,always_push:!0},s}return(0,i._)(t,e),t}(i.b);tr=i.c,(0,i._)(function(e,t){var n=tr.call(this,e,t)||this;return n.token=t.token,n.type=t.type?h[t.type.toLowerCase()]:h.UNKNOWN,n.user=new i.U(e,t.user),n},tr);var eC=function(e){function t(t){var n=t.userId,r=t.token,s=e.call(this)||this;return s.method=i.A.DELETE,s.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/push/apns/").concat(encodeURIComponent(r)),s}return(0,i._)(t,e),t}(i.b);ti=i.c,(0,i._)(function(e,t){var n=ti.call(this,e,t)||this;return n.token=t.token,n.user=new i.U(e,t.user),n},ti);var eN=function(e){function t(t){var n=t.userId,r=t.token,s=e.call(this)||this;return s.method=i.A.DELETE,s.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/push/gcm/").concat(encodeURIComponent(r)),s}return(0,i._)(t,e),t}(i.b);ts=i.c,(0,i._)(function(e,t){var n=ts.call(this,e,t)||this;return n.token=t.token,n.user=new i.U(e,t.user),n},ts);var ek=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=i.A.DELETE,r.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/push/apns"),r}return(0,i._)(t,e),t}(i.b);to=i.c,(0,i._)(function(e,t){var n=to.call(this,e,t)||this;return n.type=t.type?h[t.type.toLowerCase()]:h.UNKNOWN,n.user=new i.U(e,t.user),n},to);var eA=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=i.A.DELETE,r.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/push/gcm"),r}return(0,i._)(t,e),t}(i.b);ta=i.c,(0,i._)(function(e,t){var n=ta.call(this,e,t)||this;return n.type=t.type?h[t.type.toLowerCase()]:h.UNKNOWN,n.user=new i.U(e,t.user),n},ta);var eO=function(e){function t(t){var n=t.userId,r=t.type,s=t.token,o=t.ts,a=e.call(this)||this;return a.method=i.A.GET,a.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/push/").concat(encodeURIComponent(r),"/device_tokens"),a.params={created_ts:o,token:s},a}return(0,i._)(t,e),t}(i.b),eL=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTokens={type:n.type?h[n.type.toLowerCase()]:h.UNKNOWN,deviceTokens:n.device_tokens,hasMore:n.has_more,token:n.token},r}return(0,i._)(t,e),t}(i.c),eR=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=i.A.GET,r.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/channel_invitation_preference"),r}return(0,i._)(t,e),t}(i.b),eM=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.autoAccept=n.auto_accept,r}return(0,i._)(t,e),t}(i.c),eU=function(e){function t(t){var n=t.userId,r=t.willAutoAccept,s=e.call(this)||this;return s.method=i.A.PUT,s.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/channel_invitation_preference"),s.params={auto_accept:r},s}return(0,i._)(t,e),t}(i.b),eD=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.autoAccept=n.auto_accept,r}return(0,i._)(t,e),t}(i.c),eP=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=i.A.GET,r.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/push_preference"),r}return(0,i._)(t,e),t}(i.b),ex=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.preference={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone},r}return(0,i._)(t,e),t}(i.c),ej=function(e){function t(t){var n=t.userId,r=t.doNotDisturbOn,s=t.startHour,o=t.startMin,a=t.endHour,u=t.endMin,c=t.timezone,l=e.call(this)||this;return l.method=i.A.PUT,l.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/push_preference"),l.params={do_not_disturb:r,start_hour:s,start_min:o,end_hour:a,end_min:u,timezone:c},l}return(0,i._)(t,e),t}(i.b),eq=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.preference={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone},r}return(0,i._)(t,e),t}(i.c),eF=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=i.A.GET,r.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/push_preference"),r}return(0,i._)(t,e),t}(i.b),eV=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.snoozePeriod={isSnoozeOn:n.snooze_enabled},"number"==typeof n.snooze_start_ts&&(r.snoozePeriod.startTs=n.snooze_start_ts),"number"==typeof n.snooze_end_ts&&(r.snoozePeriod.endTs=n.snooze_end_ts),r}return(0,i._)(t,e),t}(i.c),eG=function(e){function t(t){var n=t.userId,r=t.snoozeOn,s=t.startTs,o=t.endTs,a=e.call(this)||this;return a.method=i.A.PUT,a.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/push_preference"),a.params={snooze_enabled:r,snooze_start_ts:s,snooze_end_ts:o},a}return(0,i._)(t,e),t}(i.b),eB=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.snoozePeriod={isSnoozeOn:n.snooze_enabled},"number"==typeof n.snooze_start_ts&&(r.snoozePeriod.startTs=n.snooze_start_ts),"number"==typeof n.snooze_end_ts&&(r.snoozePeriod.endTs=n.snooze_end_ts),r}return(0,i._)(t,e),t}(i.c),eQ=function(e){function t(t){var n=t.userId,r=t.blockedUserId,s=e.call(this)||this;return s.method=i.A.POST,s.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/block"),s.params={target_id:r},s}return(0,i._)(t,e),t}(i.b);tu=i.c,(0,i._)(function(e,t){var n=tu.call(this,e,t)||this;return n.user=new i.U(e,t),n},tu);var eH=function(e){function t(t){var n=t.userId,r=t.unblockedUserId,s=e.call(this)||this;return s.method=i.A.DELETE,s.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/block/").concat(encodeURIComponent(r)),s}return(0,i._)(t,e),t}(i.b);tc=i.c,(0,i._)(function(){return null!==tc&&tc.apply(this,arguments)||this},tc);var ez=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=i.A.GET,r.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/push_preference"),r}return(0,i._)(t,e),t}(i.b),eK=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r}return(0,i._)(t,e),t}(i.c),eW=function(e){function t(t){var n=t.userId,r=t.pushTriggerOption,s=e.call(this)||this;return s.method=i.A.PUT,s.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/push_preference"),s.params={push_trigger_option:r},s}return(0,i._)(t,e),t}(i.b),eZ=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r}return(0,i._)(t,e),t}(i.c),eY=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=i.A.GET,r.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/push/template"),r}return(0,i._)(t,e),t}(i.b),eX=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name=n.name,r}return(0,i._)(t,e),t}(i.c),eJ=function(e){function t(t){var n=t.userId,r=t.templateName,s=e.call(this)||this;return s.method=i.A.PUT,s.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/push/template"),s.params={name:r},s}return(0,i._)(t,e),t}(i.b),e$=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name=n.name,r}return(0,i._)(t,e),t}(i.c),e0=function(e){function t(t){var n=t.userId,r=t.token,s=e.call(this)||this;return s.method=i.A.GET,s.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/friends/changelogs"),s.params={token:r},s}return(0,i._)(t,e),t}(i.b),e1=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.changelogs={addedUsers:n.added.map(function(e){return new i.U(t,e)}),updatedUsers:n.updated.map(function(e){return new i.U(t,e)}),deletedUserIds:n.deleted,hasMore:n.has_more,token:n.next},r}return(0,i._)(t,e),t}(i.c),e2=function(e){function t(t){var n=t.userId,r=t.discoveries,s=e.call(this)||this;return s.method=i.A.PUT,s.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/friend_discoveries"),s.params={friend_discoveries:r.map(function(e){return{friend_discovery_key:e.friendDiscoveryKey,friend_name:e.friendName}})},s}return(0,i._)(t,e),t}(i.b),e4=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.friendDiscoveryRequestId=n.friend_discovery_request_id,r}return(0,i._)(t,e),t}(i.c),e3=function(e){function t(t){var n=t.userId,r=t.discoveryKeys,s=e.call(this)||this;return s.method=i.A.DELETE,s.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/friend_discoveries"),s.params={friend_discovery_keys:r},s}return(0,i._)(t,e),t}(i.b);tl=i.c,(0,i._)(function(){return null!==tl&&tl.apply(this,arguments)||this},tl);var e5=function(e){function t(t){var n=t.userId,r=t.userIds,s=e.call(this)||this;return s.method=i.A.POST,s.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/friends"),s.params={user_ids:r},s}return(0,i._)(t,e),t}(i.b),e7=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map(function(e){return new i.U(t,e)}),r}return(0,i._)(t,e),t}(i.c),e6=function(e){function t(t){var n=t.userId,r=t.userIds,s=e.call(this)||this;return s.method=i.A.DELETE,s.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/friends"),s.params={user_ids:r},s}return(0,i._)(t,e),t}(i.b);td=i.c,(0,i._)(function(){return null!==td&&td.apply(this,arguments)||this},td);var e8=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=i.A.GET,r.path="".concat(i.N,"/").concat(n,"/allow_friend_discovery"),r.params={},r}return(0,i._)(t,e),t}(i.b),e9=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.allowFriendDiscovery=n.allow_friend_discovery,r}return(0,i._)(t,e),t}(i.c),te=function(e){function t(t){var n=t.userId,r=t.allowFriendDiscovery,s=e.call(this)||this;return s.method=i.A.PUT,s.path="".concat(i.N,"/").concat(n,"/allow_friend_discovery"),s.params={allow_friend_discovery:r},s}return(0,i._)(t,e),t}(i.b);th=i.c,(0,i._)(function(){return null!==th&&th.apply(this,arguments)||this},th);var tt,tn,tr,ti,ts,to,ta,tu,tc,tl,td,th,tf,tp=function(e){this.key=null,this.url=null,this.key=e.key,this.url=e.url},t_=function(e){var t,n,r;this.id=0,this.name=null,this.url=null,this.emojis=[],this.id=null!==(t=e.id)&&void 0!==t?t:0,this.name=null!==(n=e.name)&&void 0!==n?n:"",this.url=null!==(r=e.url)&&void 0!==r?r:"",this.emojis=e.emojis?e.emojis.map(function(e){return new tp(e)}):[]},tv=function(e){this.emojiHash=null,this.emojiCategories=[],this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map(function(e){return new t_(e)}):[]},tm=function(e){function t(){var t=e.call(this)||this;return t.method=i.A.GET,t.path=i.O,t}return(0,i._)(t,e),t}(i.b),tg=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emojiContainer=new tv(n),r}return(0,i._)(t,e),t}(i.c),ty=function(e){function t(t){var n=t.categoryId,r=e.call(this)||this;return r.method=i.A.GET,r.path="".concat(i.O,"/").concat(n),r}return(0,i._)(t,e),t}(i.b),tb=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emojiCategory=new t_(n),r}return(0,i._)(t,e),t}(i.c),tE=function(e){function t(t){var n=t.key,r=e.call(this)||this;return r.method=i.A.GET,r.path="".concat(i.Q,"/").concat(n),r}return(0,i._)(t,e),t}(i.b),tI=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emoji=new tp(n),r}return(0,i._)(t,e),t}(i.c),tT=function(e){function t(t){var n=t.limit,r=t.token,s=t.userIdsFilter,o=t.metaDataKeyFilter,a=t.metaDataValuesFilter,u=t.nicknameStartsWithFilter,c=e.call(this)||this;return c.method=i.A.GET,c.path=i.N,c.params=(0,i.e)({limit:n,token:r,user_ids:s,metadatakey:o,metadatavalues_in:a,nickname_startswith:u}),c}return(0,i._)(t,e),t}(i.b),tS=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map(function(e){return new i.U(t,e)}),r.next=n.next,r}return(0,i._)(t,e),t}(i.c),tw=function(e){function t(t,n){var r,i,s,o=this;return(o=e.call(this,t,n)||this).userIdsFilter=null,o.metaDataKeyFilter=null,o.metaDataValuesFilter=null,o.nicknameStartsWithFilter=null,o.userIdsFilter=null!==(r=n.userIdsFilter)&&void 0!==r?r:null,o.metaDataKeyFilter=null!==(i=n.metaDataKeyFilter)&&void 0!==i?i:null,o.metaDataValuesFilter=null!==(s=n.metaDataValuesFilter)&&void 0!==s?s:null,o.nicknameStartsWithFilter=n.nicknameStartsWithFilter||null,o}return(0,i._)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&(0,i.T)("string",this.userIdsFilter,!0)&&(0,i.i)("string",this.metaDataKeyFilter,!0)&&(0,i.T)("string",this.metaDataValuesFilter,!0)&&(0,i.i)("string",this.metaDataKeyFilter,!0)},t.prototype.next=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=i.V.of(this._iid).requestQueue,t=new tT((0,i.l)((0,i.l)({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return r=(n=o.sent().as(tS)).users,s=n.next,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,r];case 2:return[2,[]];case 3:throw i.S.queryInProgress;case 4:return[3,6];case 5:throw i.S.invalidParameters;case 6:return[2]}})})},t}(i.X),tC=function(e){function t(t){var n=t.userId,r=t.limit,s=t.token,o=t.userIdsFilter,a=e.call(this)||this;return a.method=i.A.GET,a.path="".concat(i.N,"/").concat(n,"/block"),a.params=(0,i.e)({limit:r,token:s,user_ids:o}),a}return(0,i._)(t,e),t}(i.b),tN=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map(function(e){return new i.U(t,e)}),r.next=n.next,r}return(0,i._)(t,e),t}(i.c),tk=function(e){function t(t,n){var r,i=this;return(i=e.call(this,t,n)||this).userIdsFilter=null,i.userIdsFilter=null!==(r=n.userIdsFilter)&&void 0!==r?r:null,i}return(0,i._)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&(0,i.T)("string",this.userIdsFilter,!0)},t.prototype.next=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r,s,o,a;return(0,i.k)(this,function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=(e=i.V.of(this._iid)).sdkState,n=e.requestQueue,r=new tC((0,i.l)((0,i.l)({},this),{userId:t.userId,token:this._token})),[4,n.send(r)]):[3,2]:[3,5];case 1:return o=(s=u.sent().as(tN)).users,a=s.next,this._token=a,this._hasNext=!!a,this._isLoading=!1,[2,o];case 2:return[2,[]];case 3:throw i.S.queryInProgress;case 4:return[3,6];case 5:throw i.S.invalidParameters;case 6:return[2]}})})},t}(i.X),tA=function(e){function t(t){var n=t.userId,r=t.limit,s=t.token,o=e.call(this)||this;return o.method=i.A.GET,o.path="".concat(i.N,"/").concat(encodeURIComponent(n),"/friends"),o.params={limit:r,token:s},o}return(0,i._)(t,e),t}(i.b),tO=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.hasMore=n.has_more,r.users=n.users.map(function(e){return new i.U(t,e)}),r.next=n.next,r}return(0,i._)(t,e),t}(i.c),tL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i._)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r,s,o,a,u;return(0,i.k)(this,function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=(e=i.V.of(this._iid)).sdkState,n=e.requestQueue,r=new tA((0,i.l)((0,i.l)({},this),{userId:t.userId,token:this._token})),[4,n.send(r)]):[3,2]:[3,5];case 1:return o=(s=c.sent().as(tO)).users,a=s.hasMore,u=s.next,this._token=u,this._hasNext=a,this._isLoading=!1,[2,o];case 2:return[2,[]];case 3:throw i.S.queryInProgress;case 4:return[3,6];case 5:throw i.S.invalidParameters;case 6:return[2]}})})},t}(i.X),tR={},tM=function(){function e(e){var t=e.dbname,n=e.itemSizeLimit,r=e.cacheLimit,i=e.blockHashBase,s=e.blockHashMultiplier,o=e.blockHashConstant,a=e.transactionApplyDelay,u=e.disableLogger;return tR[t]||(this.itemSizeLimit=void 0===n?1048576:n,this.cacheLimit=void 0===r?256:r,this.blockHashBase=void 0===i?2:i,this.blockHashMultiplier=void 0===s?10:s,this.blockHashConstant=void 0===o?11:o,this.transactionApplyDelay=void 0===a?200:a,this.disableLogger=void 0!==u&&u,tR[t]=this),tR[t]}return e.get=function(e){return tR[e]},e}();(tU=tf||(tf={}))[tU.UNKNOWN_ERROR=6e7]="UNKNOWN_ERROR",tU[tU.STORE_NOT_DEFINED=61001e3]="STORE_NOT_DEFINED",tU[tU.STORE_NOT_AVAILABLE=61001001]="STORE_NOT_AVAILABLE",tU[tU.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING=61001002]="STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING",tU[tU.STORE_IS_FULL=61001003]="STORE_IS_FULL",tU[tU.STORE_INVALID_KEY_TYPE=61002e3]="STORE_INVALID_KEY_TYPE",tU[tU.STORE_BROKEN_INTEGRITY=61002001]="STORE_BROKEN_INTEGRITY",tU[tU.STORE_BROKEN_BLOB=61002002]="STORE_BROKEN_BLOB",tU[tU.STORE_ENCRYPTION_INVALID=61002003]="STORE_ENCRYPTION_INVALID",tU[tU.STORE_ITEM_SIZE_LIMIT_EXCEEDED=61017e3]="STORE_ITEM_SIZE_LIMIT_EXCEEDED",tU[tU.STORE_READ_FAILED=61017001]="STORE_READ_FAILED",tU[tU.STORE_WRITE_FAILED=61017002]="STORE_WRITE_FAILED",tU[tU.DATABASE_SCHEMA_NOT_ON_UPGRADE=62002e3]="DATABASE_SCHEMA_NOT_ON_UPGRADE",tU[tU.COLLECTION_NOT_READY=63001e3]="COLLECTION_NOT_READY",tU[tU.COLLECTION_KEY_NOT_MATCH=63002e3]="COLLECTION_KEY_NOT_MATCH",tU[tU.COLLECTION_QUERY_NOT_VALID=63002001]="COLLECTION_QUERY_NOT_VALID",tU[tU.COLLECTION_KEY_NOT_FOUND=63004e3]="COLLECTION_KEY_NOT_FOUND",tU[tU.COLLECTION_KEY_NOT_GIVEN=63004001]="COLLECTION_KEY_NOT_GIVEN",tU[tU.COLLECTION_INSERT_DUPLICATE=63009e3]="COLLECTION_INSERT_DUPLICATE",tU[tU.COLLECTION_WRITE_FAILED=63017e3]="COLLECTION_WRITE_FAILED",tU[tU.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED=63017001]="COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED",tU[tU.INDEX_TABLE_IS_REQUIRED=65001e3]="INDEX_TABLE_IS_REQUIRED",tU[tU.INDEX_TYPE_NOT_MATCH=65002e3]="INDEX_TYPE_NOT_MATCH",tU[tU.COMPARE_TYPE_NOT_MATCH=69002001]="COMPARE_TYPE_NOT_MATCH",tU[tU.CIRCULAR_REFERENCE_FOUND=69002002]="CIRCULAR_REFERENCE_FOUND";var tU,tD,tP=function(e){function t(n){var r=n.code,i=void 0===r?tf.UNKNOWN_ERROR:r,s=n.message,o=e.call(this,void 0===s?"Unknown error occurred.":s)||this;return o.code=i,Object.setPrototypeOf(o,t.prototype),o}return(0,i._)(t,e),Object.defineProperty(t,"storeNotDefined",{get:function(){return new t({code:tf.STORE_NOT_DEFINED,message:"Store is not defined. Specify the store on NestDB()"})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailable",{get:function(){return new t({code:tf.STORE_NOT_AVAILABLE,message:"Store is not available. Check your environment settings."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailableInPrivateBrowsing",{get:function(){return new t({code:tf.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,message:"Store is not available because it is in private browsing."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeIsFull",{get:function(){return new t({code:tf.STORE_IS_FULL,message:"Store is full."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeKeyTypeIsInvalid",{get:function(){return new t({code:tf.STORE_INVALID_KEY_TYPE,message:"Store key should be string type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenIntegrity",{get:function(){return new t({code:tf.STORE_BROKEN_INTEGRITY,message:"Data should be in a store but it does not. Integrity is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenBlob",{get:function(){return new t({code:tf.STORE_BROKEN_BLOB,message:"Data should be in a store but it does not. Blob data is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeEncryptionInvalid",{get:function(){return new t({code:tf.STORE_ENCRYPTION_INVALID,message:"Encryption algorithm has changed. All the store should reset."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeItemSizeExceeded",{get:function(){return new t({code:tf.STORE_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that the store allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeReadFailed",{get:function(){return new t({code:tf.STORE_READ_FAILED,message:"Failed to read from store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeWriteFailed",{get:function(){return new t({code:tf.STORE_WRITE_FAILED,message:"Failed to write to store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"databaseSchemaNotOnUpgrade",{get:function(){return new t({code:tf.DATABASE_SCHEMA_NOT_ON_UPGRADE,message:"Committing schema is not allowed when upgrade is not running."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionNotReady",{get:function(){return new t({code:tf.COLLECTION_NOT_READY,message:"Collection is not ready due to an error during initialization."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotMatch",{get:function(){return new t({code:tf.COLLECTION_KEY_NOT_MATCH,message:"keyName of collection could not change."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionQueryNotValid",{get:function(){return new t({code:tf.COLLECTION_QUERY_NOT_VALID,message:"Query parameter is not a valid format."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionInsertDuplicate",{get:function(){return new t({code:tf.COLLECTION_INSERT_DUPLICATE,message:"The key already exists."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotFound",{get:function(){return new t({code:tf.COLLECTION_KEY_NOT_FOUND,message:"The key is not found."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotGiven",{get:function(){return new t({code:tf.COLLECTION_KEY_NOT_GIVEN,message:"The item should contain [keyName] property."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionWriteFailed",{get:function(){return new t({code:tf.COLLECTION_WRITE_FAILED,message:"Failed to write an item."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionItemSizeExceeded",{get:function(){return new t({code:tf.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that a collection allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTableIsRequired",{get:function(){return new t({code:tf.INDEX_TABLE_IS_REQUIRED,message:"Index table is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTypesNotMatch",{get:function(){return new t({code:tf.INDEX_TYPE_NOT_MATCH,message:"Indexed column should have primitive type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"compareTypesNotMatch",{get:function(){return new t({code:tf.COMPARE_TYPE_NOT_MATCH,message:"Values to compare have different types."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"circularReferenceFound",{get:function(){return new t({code:tf.CIRCULAR_REFERENCE_FOUND,message:"Cannot handle circular referenced object."})},enumerable:!1,configurable:!0}),t}(Error);(tx=tD||(tD={})).INIT="init",tx.READY="ready",tx.CLOSED="closed";var tx,tj,tq=function(e,t){if(void 0===t&&(t=new WeakMap),"object"==typeof e&&null!==e){if(t.has(e))throw tP.circularReferenceFound;t.set(e,!0);var n=null;if(Array.isArray(e))n=e.map(function(e){return tq(e,t)});else if(e instanceof RegExp)n=e;else if(e instanceof Date)n=e;else for(var r in n={},e)n[r]=tq(e[r],t);return t.delete(e),n}return e},tF=function(e,t){if(null==t)return 1;if(null==e)return -1;if(typeof e!=typeof t)throw tP.compareTypesNotMatch;var n=0;switch(typeof e){case"boolean":case"number":n=e-t;break;case"string":n=e.localeCompare(t)}return n},tV=function(e,t){for(var n=0,r=0;r<e.length;r++)n=e.charCodeAt(r)+(n<<6)+(n<<16)-n;return(n>>>0)%t},tG=function(e){return new Promise(function(t){setTimeout(function(){return t()},e)})},tB=function(e,t){if(!t)return!1;if("function"!=typeof e){for(var n in e)if(["/and","&&"].includes(n)){if(e[n].some(function(e){return!tB(e,t)}))return!1}else if(["/or","||"].includes(n)){if(e[n].every(function(e){return!tB(e,t)}))return!1}else if("/where"===n){if(!(0,e[n])(t))return!1}else if("object"==typeof e[n]){var r=e[n];for(var i in r)switch(i){case"/eq":case"=":if((s=t[n])!==(o=r[i]))return!1;break;case"/neq":case"!=":if((s=t[n])===(o=r[i]))return!1;break;case"/gt":case">":var s=t[n],o=r[i];if(!(tF(s,o)>0))return!1;break;case"/gte":case">=":if(!(tF(s=t[n],o=r[i])>=0))return!1;break;case"/lt":case"<":if(!(0>tF(s=t[n],o=r[i])))return!1;break;case"/lte":case"<=":if(!(0>=tF(s=t[n],o=r[i])))return!1;break;case"/in":if(s=t[n],!(o=r[i]).includes(s))return!1;break;case"/nin":if(s=t[n],(o=r[i]).includes(s))return!1;break;case"/contain":if(s=t[n],o=r[i],!s.includes(o))return!1;break;case"/regex":if(s=t[n],!(o=r[i]).test(s))return!1;break;case"/where":if(s=t[n],!(0,r[i])(s))return!1}}else if("function"==typeof e[n]){if(!e[n](t[n]))return!1}else if(e[n]!==t[n])return!1;return!0}return e(t)},tQ=function(){},tH=function(){return Promise.resolve()},tz=function(e){return e},tK=function(e,t){t(null)};(tW=tj||(tj={}))[tW.FORWARD=0]="FORWARD",tW[tW.BACKWARD=1]="BACKWARD";var tW,tZ,tY,tX,tJ=function(){function e(e){var t=e.initialPrevValue,n=e.initialNextValue,r=e.iterator,i=e.map,s=e.backward,o=e.forward,a=e.complete;this._prevValue=void 0===t?null:t,this._nextValue=void 0===n?null:n,this._error=null,this._map=void 0===i?tz:i,this._backward=void 0===s?tH:s,this._forward=void 0===o?tH:o,this._iterator=r,this._complete=void 0===a?tQ:a}return Object.defineProperty(e.prototype,"prevValue",{get:function(){return this._map(this._prevValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextValue",{get:function(){return this._map(this._nextValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return!!this._prevValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return!!this._nextValue},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n;return(0,i.k)(this,function(r){switch(r.label){case 0:if(!this.hasPrevious)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._prevValue,t=this,[4,this._backward()];case 2:return t._prevValue=r.sent()||null,this._nextValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}})})},e.prototype.next=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n;return(0,i.k)(this,function(r){switch(r.label){case 0:if(!this.hasNext)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._nextValue,t=this,[4,this._forward()];case 2:return t._nextValue=r.sent()||null,this._prevValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}})})},e.prototype.stop=function(){this._prevValue=null,this._nextValue=null,this._complete()},e}(),t$=function(){function e(e){var t=e.condition,n=e.backward,r=e.blockManager,i=e.indexer;this.condition=void 0===t?{}:t,this.backward=void 0!==n&&n,this._blockManager=r,this._indexer=i}return e.prototype.findOptimizedStartPosition=function(){var e=this,t=["=","/eq",">",">=","/gt","/gte"],n=["=","/eq","<","<=","/lt","/lte"];if(this.backward){var r=this._indexer.origin.length-1;if("function"!=typeof this.condition)for(var i in this._indexer.fields){var s=this._indexer.fields[i],o=1;if("-"===s[0]&&(s=s.slice(1),o=-1),this.condition[s]){if("object"==typeof this.condition[s]){var a=o>0?n:t;for(var u in this.condition[s])if(a.includes(u)){for(var c=r;c>=0;c--)if(o*tF(this._indexer.origin[c].columnValues[i],this.condition[s][u])<=0){r=c;break}}}else for(c=r;c>=0;c--)if(o*tF(this._indexer.origin[c].columnValues[i],this.condition[s])<=0){r=c;break}}}return Math.min(r+1,this._indexer.origin.length-1)}var l=0;if("function"!=typeof this.condition)for(var d=function(r){var i=h._indexer.fields[r],s=1;if("-"===i[0]&&(i=i.slice(1),s=-1),h.condition[i]){if("object"==typeof h.condition[i])Object.keys(h.condition[i]).forEach(function(o){if((s>0?t:n).includes(o)){for(var a=l;a<e._indexer.origin.length;a++)if(s*tF(e._indexer.origin[a].columnValues[r],e.condition[i][o])>=0){l=a;break}}});else for(var o=l;o<h._indexer.origin.length;o++)if(s*tF(h._indexer.origin[o].columnValues[r],h.condition[i])>=0){l=o;break}}},h=this,i=0;i<this._indexer.fields.length;i++)d(i);return Math.max(l-1,0)},e.prototype.each=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o,a,u,c=this;return(0,i.k)(this,function(l){switch(l.label){case 0:if(t=this.findOptimizedStartPosition(),n=0,this.backward&&this._indexer.origin[t]&&(n=this._indexer.origin[t].keys.length-1),r=function(){if(c._indexer.origin[t]){if(!c._indexer.origin[t].keys[++n]){if(!c._indexer.origin[++t])return!1;n=0}return!0}return!1},s=function(){if(c._indexer.origin[t]){if(!c._indexer.origin[t].keys[--n]){if(!c._indexer.origin[--t])return!1;n=c._indexer.origin[t].keys.length-1}return!0}return!1},o=null,!this._indexer.origin[t])return[3,4];a=this.backward?s:r,l.label=1;case 1:return[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])];case 2:if(u=l.sent(),tB(this.condition,u))return o=u,[3,4];l.label=3;case 3:if(a())return[3,1];l.label=4;case 4:return[4,new Promise(function(a){var u=new tJ({initialNextValue:tq(o),iterator:e,forward:function(){return(0,i.j)(c,void 0,void 0,function(){var e,o;return(0,i.k)(this,function(i){switch(i.label){case 0:e=this.backward?s:r,i.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return o=i.sent(),tB(this.condition,o)?[2,tq(o)]:[3,1];case 3:return[2,null]}})})},backward:function(){return(0,i.j)(c,void 0,void 0,function(){var e,o;return(0,i.k)(this,function(i){switch(i.label){case 0:e=this.backward?r:s,i.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return o=i.sent(),tB(this.condition,o)?[2,tq(o)]:[3,1];case 3:return[2,null]}})})},complete:a});e(u)})];case 5:return[2,l.sent()]}})})},e}(),t0=function(){function e(e){var t=e.condition,n=e.backward,r=e.mutex,i=e.blockManager,s=e.indexer;this._mutex=r,this._iterator=new t$({condition:void 0===t?{}:t,backward:void 0!==n&&n,blockManager:i,indexer:s})}return e.prototype.fetch=function(e){return void 0===e&&(e={}),(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o=this;return(0,i.k)(this,function(a){switch(a.label){case 0:if(t=Math.max(e.offset||0,0),0===(n="number"==typeof e.limit?e.limit:Number.MAX_SAFE_INTEGER))return[2,[]];if(n<0)throw tP.collectionQueryNotValid;a.label=1;case 1:return a.trys.push([1,4,,5]),r=[],[4,this._mutex.lock()];case 2:return a.sent(),[4,this._iterator.each(function(e){return(0,i.j)(o,void 0,void 0,function(){return(0,i.k)(this,function(i){return e.error?e.stop():e.hasNext?0===t?(r.push(e.nextValue),0<n&&n<=r.length?e.stop():e.next()):(t--,e.next()):e.stop(),[2]})})})];case 3:return a.sent(),this._mutex.unlock(),[2,r];case 4:throw s=a.sent(),this._mutex.unlock(),s;case 5:return[2]}})})},e.prototype.count=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n=this;return(0,i.k)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e=0,[4,this._mutex.lock()];case 1:return r.sent(),[4,this._iterator.each(function(t){return(0,i.j)(n,void 0,void 0,function(){return(0,i.k)(this,function(n){return t.error?t.stop():t.hasNext?(e++,t.next()):t.stop(),[2]})})})];case 2:return r.sent(),this._mutex.unlock(),[2,e];case 3:throw t=r.sent(),this._mutex.unlock(),t;case 4:return[2]}})})},e}(),t1=function(e){return"".concat("nest","@").concat(e)},t2=function(e,t){return"".concat(t1(e),"/").concat(t)},t4=function(e,t){return"".concat(t2(e,t),".metadata")},t3=function(e,t){return"".concat(t2(e,t),"/block.")},t5=function(e,t){return"".concat(t2(e,t),"/blob.")},t7=function(e,t,n,r){return void 0===r&&(r=0),"".concat(t5(e,t)).concat(n,".").concat(r)},t6=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this.dbname=t,this.collectionName=n,this._store=r}return e.prototype._makeShards=function(e,t){var n=Math.max(this._store.itemSizeLimit-1024,0);if(n>0){for(var r=Math.ceil(e.data.length/n),i="".concat(r,".").concat(e.type,".").concat(t),s=[],o=0;o<e.data.length;o+=n){var a=e.data.slice(o,o+n);s.push(a)}return{blobId:i,shards:s}}return{blobId:null,shards:null}},e.prototype._encode=function(e){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){var n=new FileReader;n.onload=function(){t({data:n.result,type:e.type})},n.readAsDataURL(e)})];case 1:return[2,t.sent()]}})})},e.prototype._decode=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o,a;return(0,i.k)(this,function(i){switch(i.label){case 0:return"undefined"==typeof fetch?[3,3]:[4,fetch(e.data)];case 1:return[4,i.sent().blob()];case 2:return[2,i.sent()];case 3:for(t=[],n=atob(e.data.split(",")[1]),r=0;r<n.length;r+=512){for(o=Array((s=n.slice(r,r+512)).length),a=0;a<s.length;a++)o[a]=s.charCodeAt(a);t.push(new Uint8Array(o))}return[2,new Blob(t,{type:e.type})]}})})},e.prototype.get=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o,a,u,c;return(0,i.k)(this,function(l){switch(l.label){case 0:if(t=[],r=(n=(0,i.Y)(e.split("."),2))[0],s=n[1],!((o=parseInt(r))>0))return[3,6];a=0,l.label=1;case 1:return a<o?(u=t7(this.dbname,this.collectionName,e,a),[4,this._store.get(u)]):[3,4];case 2:if(!(c=l.sent())||!c.d)throw tP.storeBrokenBlob;t.push(c.d),l.label=3;case 3:return a++,[3,1];case 4:return[4,this._decode({data:t.join(""),type:s})];case 5:return[2,l.sent()];case 6:return[2,null]}})})},e.prototype.save=function(e,t){return void 0===t&&(t="".concat(Date.now())),(0,i.j)(this,void 0,void 0,function(){var n,r,s,o,a,u,c;return(0,i.k)(this,function(i){switch(i.label){case 0:return n=[],[4,this._encode(e)];case 1:if(r=i.sent(),o=(s=this._makeShards(r,t)).blobId,a=s.shards,!o)return[3,3];for(u=0;u<a.length;u++)c=t7(this.dbname,this.collectionName,o,u),n.push({key:c,value:{d:a[u]},generation:1});return[4,this._store.setMany(n)];case 2:if(i.sent().some(function(e){return e instanceof Error}))throw tP.storeWriteFailed;return[2,o];case 3:return[2,null]}})})},e.prototype.remove=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r;return(0,i.k)(this,function(s){switch(s.label){case 0:if(t=[],!((n=parseInt((0,i.Y)(e.split("."),1)[0]))>0))return[3,2];for(r=0;r<n;r++)t.push(t7(this.dbname,this.collectionName,e,r));return[4,this._store.removeMany(t)];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.clear=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r,s,o,a,u;return(0,i.k)(this,function(c){switch(c.label){case 0:return e=t5(this.dbname,this.collectionName),t=[],[4,this._store.getAllKeys()];case 1:n=c.sent();try{for(s=(r=(0,i.z)(n)).next();!s.done;s=r.next())(o=s.value).startsWith(e)&&t.push(o)}catch(e){a={error:e}}finally{try{s&&!s.done&&(u=r.return)&&u.call(r)}finally{if(a)throw a.error}}return[4,this._store.removeMany(n)];case 2:return c.sent(),[2]}})})},e}();(na=tZ||(tZ={}))[na.COMMIT=0]="COMMIT",na[na.WRITE=1]="WRITE",na[na.ERROR=2]="ERROR",(nu=tY||(tY={})).PENDING="pending",nu.PERSISTENT="persistent",nu.VOLATILE="volatile",(nc=tX||(tX={}))[nc.NO_CACHE=0]="NO_CACHE",nc[nc.DEFAULT=1]="DEFAULT",nc[nc.PERSISTENT=2]="PERSISTENT";var t8=[tY.PENDING,tY.VOLATILE],t9={},ne=function(){function e(e){var t=e.dbname,n=e.limit;return t9[t]||(this.dbname=t,this._items=[],this._limit=void 0===n?256:n,t9[t]=this),t9[t]}return e.get=function(e){return t9[e]},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.find=function(e,t,n){return void 0===n&&(n=tX.DEFAULT),(0,i.j)(this,void 0,void 0,function(){var r,s;return(0,i.k)(this,function(i){switch(i.label){case 0:return(r=this.get(t))?[3,2]:[4,e.get(t)];case 1:return(s=i.sent())&&(r={key:t,value:s,generation:1,state:n===tX.PERSISTENT?tY.PERSISTENT:tY.VOLATILE},this.put(r)),[3,3];case 2:n===tX.PERSISTENT&&(r.state=tY.PERSISTENT),i.label=3;case 3:return[2,r]}})})},e.prototype.get=function(e,t){void 0===t&&(t=tX.DEFAULT);var n=this._items.map(function(e){return e.key}).indexOf(e);if(n>-1){var r=this._items[n];return t===tX.PERSISTENT&&(r.state=tY.PERSISTENT),t!==tX.NO_CACHE&&this.put(r),r}return null},e.prototype.put=function(e){var t,n;if(this._limit>0){var r=this._items.map(function(e){return e.key}).indexOf(e.key);if(r>-1)t8.includes(this._items[r].state)&&t8.includes(e.state)?(this._items.splice(r,1),this._items.push(e)):(this._items[r].state=e.state,this._items[r].generation=e.generation,this._items[r].value=e.value);else{this._items.push(e);var s=this._items.filter(function(e){return e.state===tY.VOLATILE}).length-this._limit;if(s>0){var o=[];try{for(var a=(0,i.z)(this._items),u=a.next();!u.done;u=a.next()){var c=u.value;c.state===tY.VOLATILE&&s>0?s--:o.push(c)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}this._items=o}}}},e.prototype.remove=function(e){var t=this._items.map(function(e){return e.key}).indexOf(e);t>-1&&this._items.splice(t,1)},e.prototype.clearByCondition=function(e){this._items=this._items.filter(function(t){return!e(t)})},e.prototype.clear=function(e){void 0===e&&(e=!1),this._items=e?[]:this._items.filter(function(e){return e.state!==tY.VOLATILE})},e}(),nt=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this._metadata=null,this._requests=[],this._onCommit=new Map,this._onWrite=new Map,this._onError=new Map,this.dbname=t,this.collectionName=n,this.metadataKey="".concat(t2(t,n),"/trans.metadata"),this.recordsetKey="".concat(t2(t,n),"/trans.recordset"),this._store=r}return Object.defineProperty(e.prototype,"generation",{get:function(){return this._metadata?this._metadata.generation:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestCount",{get:function(){return this._requests.length},enumerable:!1,configurable:!0}),e.prototype._getReducedRecordset=function(e){return void 0===e&&(e=[]),(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:return[4,this._store.get(this.recordsetKey)];case 1:return(t=n.sent()||[]).push.apply(t,(0,i.Z)([],(0,i.Y)(e),!1)),[2,this._reduceRecordSet(t)]}})})},e.prototype._reduceRecordSet=function(e){for(var t=[],n={},r=e.length-1;r>=0;r--){for(var i=e[r],s=[],o=i.requests.length-1;o>=0;o--){var a=i.requests[o],u=a.data;n[u.key]||(s.unshift(a),n[u.key]=!0)}s.length>0&&(i.requests=s,t.unshift(i))}return t},e.prototype._applyRecord=function(e,t){return(0,i.j)(this,void 0,void 0,function(){var n,r,s,o,a,u,c,l;return(0,i.k)(this,function(d){switch(d.label){case 0:n=ne.get(this.dbname),r=t.generation,s=t.requests,o=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this._store.setMany(s.map(function(e){return(0,i.l)((0,i.l)({},e.data),{generation:r})}))];case 2:for(a=d.sent(),u=0;u<s.length;u++)a[u]instanceof Error&&(o||(o=a[u]),c=s[u].data,n.put((0,i.l)((0,i.l)({},c),{generation:r,state:tY.PERSISTENT})));return[3,4];case 3:return o=d.sent(),[3,4];case 4:return o?[3,6]:(l=e.filter(function(e){return e.generation!==r}),[4,this._store.set({key:this.recordsetKey,value:l,generation:r})]);case 5:return d.sent(),this._onWrite.forEach(function(e){e(s.map(function(e){return e.data}))}),[3,7];case 6:this._onError.forEach(function(e){return e(o)}),d.label=7;case 7:return[2]}})})},e.prototype.init=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r,s,o,a;return(0,i.k)(this,function(u){switch(u.label){case 0:return e=this,[4,this._store.get(this.metadataKey)];case 1:return e._metadata=u.sent()||{generation:1},[4,this._getReducedRecordset()];case 2:t=u.sent(),u.label=3;case 3:u.trys.push([3,8,9,10]),r=(n=(0,i.z)(t)).next(),u.label=4;case 4:return r.done?[3,7]:(s=r.value,[4,this._applyRecord(t,s)]);case 5:u.sent(),u.label=6;case 6:return r=n.next(),[3,4];case 7:return[3,10];case 8:return o={error:u.sent()},[3,10];case 9:try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(o)throw o.error}return[7];case 10:return[2]}})})},e.prototype.on=function(e,t,n){switch(e){case tZ.COMMIT:this._onCommit.set(t,n);break;case tZ.WRITE:this._onWrite.set(t,n);break;case tZ.ERROR:this._onError.set(t,n)}},e.prototype.requestWrite=function(e,t){void 0===t&&(t=null),this._requests.push({data:e,options:t}),ne.get(this.dbname).put((0,i.l)({state:tY.PENDING,generation:this.generation},e))},e.prototype.requestMultipleWrite=function(e,t){void 0===t&&(t=null);var n,r,s=ne.get(this.dbname);try{for(var o=(0,i.z)(e),a=o.next();!a.done;a=o.next()){var u=a.value;this._requests.push({data:u,options:t}),s.put((0,i.l)({state:tY.PENDING,generation:this.generation},u))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.clear=function(){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(e){return ne.get(this.dbname).clearByCondition(function(e){return e.state===tY.PENDING}),this._requests=[],[2]})})},e.prototype.commit=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r,s,o,a,u,c,l,d,h=this;return(0,i.k)(this,function(f){switch(f.label){case 0:if(!((e=this._requests).length>0))return[3,4];for(t=[],n={},u=e.length-1;u>=0;u--)n[(l=(r=e[u]).data).key]||(n[l.key]=!0,t.unshift(r));return s={generation:this.generation,requests:t},[4,this._getReducedRecordset([s])];case 1:return o=f.sent(),[4,this._store.set({key:this.recordsetKey,value:o,generation:this.generation})];case 2:return f.sent(),this._metadata.generation++,[4,this._store.set({key:this.metadataKey,value:this._metadata,generation:1})];case 3:for(f.sent(),a=ne.get(this.dbname),u=0;u<t.length;u++)l=(c=t[u]).data,d=c.options,a.put((0,i.l)((0,i.l)({},l),{generation:s.generation,state:d&&d.persistent?tY.PERSISTENT:tY.VOLATILE}));this._requests=[],this._onCommit.forEach(function(t){t(e.map(function(e){return e.data}))}),setTimeout(function(){try{h._applyRecord(o,s)}catch(e){h._onError.forEach(function(t){return t(e)})}},tM.get(this.dbname).transactionApplyDelay),f.label=4;case 4:return[2]}})})},e}(),nn=function(){function e(e){var t=e.blockId,n=e.keyName,r=e.items,s=e.limit;this.blockId=t,this.keyName=n,this.limit=s,this._items=(0,i.Z)([],(0,i.Y)(void 0===r?[]:r),!1)}return e.createFromCacheItem=function(t){return t?new e(t.value):null},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.serialize=function(){return{blockId:this.blockId,keyName:this.keyName,limit:this.limit,items:this._items}},e.prototype.getItemByKey=function(e){var t=this;return this._items.find(function(n){return e===n[t.keyName]})},e.prototype.has=function(e){var t=this;return this._items.map(function(e){return e[t.keyName]}).includes(e)},e.prototype.add=function(e){var t=this,n=this._items.map(function(e){return e[t.keyName]}).indexOf(e[this.keyName]);return n<0?this._items.length<this.limit&&(this._items.push(e),!0):(this._items[n]=e,!0)},e.prototype.remove=function(e){for(var t in this._items)if(this._items[t][this.keyName]===e)return this._items.splice(parseInt(t),1),!0;return!1},e.prototype.clear=function(){this._items=[]},e}(),nr=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.metadata,i=e.hashFunction,s=void 0===i?tV:i,o=e.transaction,a=e.store;this.dbname=t,this.collectionName=n,this.hashFunction=s,this.metadata=r,this._transaction=o,this._store=a}return Object.defineProperty(e.prototype,"keyName",{get:function(){return this.metadata.keyName},enumerable:!1,configurable:!0}),e.prototype.createBlockId=function(e,t){var n,r,i,s,o,a,u;return void 0===t&&(t=this.metadata.blockLevel),n=this.dbname,r=this.collectionName,i=t,s="".concat((o=t,u=(a={hashFunction:this.hashFunction,base:this.metadata.blockHashBase,multiplier:this.metadata.blockHashMultiplier,constant:this.metadata.blockHashConstant}).base*Math.pow(a.multiplier,o)+a.constant,(a.hashFunction||tV)(e,u))),"".concat(t3(n,r)).concat(i,".").concat(s)},e.prototype._findBlock=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o;return(0,i.k)(this,function(i){switch(i.label){case 0:t=ne.get(this.dbname),n=this.metadata.blockLevel,i.label=1;case 1:return n>0?(r=this.createBlockId(e,n),[4,t.find(this._store,r)]):[3,4];case 2:if((s=i.sent())&&(o=nn.createFromCacheItem(s)).getItemByKey(e))return[2,o];i.label=3;case 3:return n--,[3,1];case 4:return[2,null]}})})},e.prototype.getFromBlock=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return[2,(t=n.sent())?t.getItemByKey(e):null]}})})},e.prototype.putToBlock=function(e,t){return(0,i.j)(this,void 0,void 0,function(){var n,r,s,o,a;return(0,i.k)(this,function(i){switch(i.label){case 0:return n=tM.get(this.dbname),r=this.createBlockId(e),s=Math.floor(this._store.itemSizeLimit/n.itemSizeLimit),[4,ne.get(this.dbname).find(this._store,r)];case 1:return(a=(o=i.sent())?nn.createFromCacheItem(o):new nn({blockId:r,keyName:this.keyName,items:[],limit:s})).add(t)?(this._transaction.requestWrite({key:a.blockId,value:a.serialize()}),[2,!0]):[2,!1]}})})},e.prototype.removeFromBlock=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return(t=n.sent())&&t.remove(e)?(this._transaction.requestWrite({key:t.blockId,value:t.serialize()}),[2,!0]):[2,!1]}})})},e.prototype.clearAllBlocks=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r,s,o,a,u;return(0,i.k)(this,function(c){switch(c.label){case 0:return e=t3(this.dbname,this.collectionName),[4,this._store.getAllKeys()];case 1:return t=c.sent().filter(function(t){return t.startsWith(e)}),[4,this._store.removeMany(t)];case 2:c.sent(),n=ne.get(this.dbname);try{for(s=(r=(0,i.z)(t)).next();!s.done;s=r.next())o=s.value,n.remove(o)}catch(e){a={error:e}}finally{try{s&&!s.done&&(u=r.return)&&u.call(r)}finally{if(a)throw a.error}}return[2]}})})},e}(),ni=function(){function e(e){var t,n,r,i=e.dbname,s=e.collectionName,o=e.keyName,a=e.fields,u=e.transaction,c=e.store,l=this;this._origin=[],this._table=[],this.dbname=i,this.collectionName=s,this.keyName=o,this.fields=a,this.indexerKey=(t=this.dbname,n=this.collectionName,r=this.fields.join(">"),"".concat(t2(t,n),"/index.").concat(r)),this._transaction=u,this._store=c,this._transaction.on(tZ.COMMIT,this.indexerKey,function(){return l.commit()}),this._transaction.on(tZ.ERROR,this.indexerKey,function(){return l.abort()})}return e.createKey=function(e){return e.join(">")},e.parseKey=function(e){return e.split(">")},e.prototype._addItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=(0,i.Y)(this.indexOf(n),2),s=r[0];return r[1]?!this._table[s].keys.includes(t)&&(this._table[s].keys.push(t),!0):(this._table.splice(s,0,{columnValues:n,keys:[t]}),!0)},e.prototype._removeItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=(0,i.Y)(this.indexOf(n),2),s=r[0];if(r[1]){var o=this._table[s].keys.indexOf(t);if(o>-1)return this._table[s].keys.splice(o,1),0===this._table[s].keys.length&&this._table.splice(s,1),!0}return!1},Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),e.prototype.getColumnValues=function(e){var t,n,r,s,o=[];try{for(var a=(0,i.z)(this.fields),u=a.next();!u.done;u=a.next()){var c=u.value;if("-"===c[0]&&(c=c.slice(1)),r=e[c],s=void 0,s=typeof r,null!==r&&"undefined"!==s&&"boolean"!==s&&"number"!==s&&"string"!==s)throw tP.indexTypesNotMatch;o.push(e[c])}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},e.prototype.diff=function(e,t){for(var n in this.fields){var r="-"===this.fields[n][0]?-1:1,i=tF(e[n],t[n]);if(0!==i)return r*i}return 0},e.prototype.indexOf=function(e){if(this._table.length>0){for(var t=0,n=this._table.length-1;t<=n;){var r=Math.floor((t+n)/2),i=this.diff(e,this._table[r].columnValues);if(i>0)t=r+1;else{if(!(i<0))return[r,!0];n=r-1}}return[t,!1]}return[0,!1]},e.prototype.ensure=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r,s,o,a,u,c,l,d,h,f,p,_,v;return(0,i.k)(this,function(m){switch(m.label){case 0:return[4,(e=ne.get(this.dbname)).find(this._store,this.indexerKey,tX.PERSISTENT)];case 1:return(t=m.sent())?[3,11]:(n=t3(this.dbname,this.collectionName),[4,this._store.getAllKeys()]);case 2:r=m.sent(),m.label=3;case 3:m.trys.push([3,8,9,10]),o=(s=(0,i.z)(r)).next(),m.label=4;case 4:return o.done?[3,7]:(a=o.value).startsWith(n)?[4,e.find(this._store,a,tX.NO_CACHE)]:[3,6];case 5:u=m.sent(),c=nn.createFromCacheItem(u);try{for(_=void 0,d=(l=(0,i.z)(c.items)).next();!d.done;d=l.next())h=d.value,this._addItem(h)}catch(e){_={error:e}}finally{try{d&&!d.done&&(v=l.return)&&v.call(l)}finally{if(_)throw _.error}}m.label=6;case 6:return o=s.next(),[3,4];case 7:return[3,10];case 8:return f={error:m.sent()},[3,10];case 9:try{o&&!o.done&&(p=s.return)&&p.call(s)}finally{if(f)throw f.error}return[7];case 10:return this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[3,12];case 11:this._origin=t.value,this._table=tq(this._origin),m.label=12;case 12:return[2]}})})},e.prototype.drop=function(){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(e){switch(e.label){case 0:return ne.get(this.dbname).remove(this.indexerKey),[4,this._store.remove(this.indexerKey)];case 1:return e.sent(),[2]}})})},e.prototype.addItem=function(e){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(t){return this._addItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.removeItem=function(e){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(t){return this._removeItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.clear=function(){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(e){return this._table=[],this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.commit=function(){this._origin=this._table,this._table=tq(this._origin)},e.prototype.abort=function(){this._table=tq(this._origin)},e}(),ns="undefined"!=typeof document&&"undefined"!=typeof navigator;ns&&navigator.userAgent&&navigator.userAgent.includes("Chrome/")&&navigator.userAgent.includes("Chromium/");var no=ns&&navigator.userAgent&&navigator.userAgent.includes("Firefox/")&&!navigator.userAgent.includes("Seamonkey/");ns&&navigator.userAgent&&navigator.userAgent.includes("Safari/")&&!navigator.userAgent.includes("Chrome/")&&navigator.userAgent.includes("Chromium/"),ns&&navigator.userAgent&&(navigator.userAgent.includes("OPR/")||navigator.userAgent.includes("Opera/")),ns&&navigator.userAgent&&navigator.userAgent.includes("Trident/7.0");var na,nu,nc,nl,nd,nh=ns&&navigator.userAgent&&navigator.userAgent.includes("Edge/"),nf=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})};(np=nl||(nl={}))[np.PROCESSING=0]="PROCESSING",np[np.DONE=1]="DONE",(n_=nd||(nd={})).NEWNODE="newnode",n_.REMOVENODE="removenode",n_.CLAIM_HOST="claimhost",n_.SYNC_HOST="synchost",n_.REQUEST_LOCK="requestlock",n_.ACQUIRE_LOCK="acquirelock",n_.RELEASE_LOCK="releaselock";var np,n_,nv,nm={},ng=function(){function e(e,t){void 0===t&&(t={});var n=this;return this._state=nl.PROCESSING,this._hostId=null,this._queue=[],this._currentItem=null,this._activationTimeout=null,this._activationQueue=[],nm[e]&&!t.forceCreate||(this.nodeId=nf(),this.key=e,ns&&(t.startAsInvisible?this.registerNode():"visible"===document.visibilityState?this.claimHost():this.registerNode(),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState&&n.claimHost()}),window.addEventListener("message",function(e){var t,r,s=e.data,o=s.nodeId,a=s.requestId,u=s.key,c=s.op,l=s.data;if(o!==n.nodeId&&u===n.key)switch(c){case nd.NEWNODE:n._sendSync();break;case nd.CLAIM_HOST:n._sendSync(),n._hostId=o;break;case nd.SYNC_HOST:if(!n.isInSync){n._activationTimeout&&clearTimeout(n._activationTimeout);var d=l.currentItemRequestId,h=l.queue,f=function(e){0>n._queue.findIndex(function(t){return t.requestId===e.requestId})&&n._requestLock({nodeId:e.nodeId,requestId:e.requestId,key:n.key,op:nd.REQUEST_LOCK,ts:e.ts})};try{for(var p=(0,i.z)(h),_=p.next();!_.done;_=p.next())f(_.value)}catch(e){t={error:e}}finally{try{_&&!_.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}n._currentItem=n._queue.find(function(e){return e.requestId===d}),n._completeSync()}break;case nd.REMOVENODE:n._queue=n._queue.filter(function(e){return e.nodeId!==s.nodeId}),n._currentItem&&n._currentItem.nodeId===s.nodeId&&(n._currentItem=null,n._acquire(n._queue[0]));break;case nd.REQUEST_LOCK:n._requestLock(s);break;case nd.ACQUIRE_LOCK:var v=n._queue.find(function(e){return e.requestId===a});n._acquire(v);break;case nd.RELEASE_LOCK:n._release(a)}}),window.addEventListener("beforeunload",function(){n._send(nd.REMOVENODE)})),nm[e]=this),nm[e]}return Object.defineProperty(e.prototype,"locked",{get:function(){return!!this._currentItem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHost",{get:function(){return this._hostId===this.nodeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInSync",{get:function(){return this._state==nl.DONE},enumerable:!1,configurable:!0}),e.prototype._send=function(e,t){void 0===t&&(t={});var n,r,i={nodeId:this.nodeId,requestId:null!==(n=null==t?void 0:t.requestId)&&void 0!==n?n:nf(),key:this.key,op:e,data:null!==(r=t.data)&&void 0!==r?r:null,ts:Date.now()};return ns&&window.postMessage(i,"*"),i},e.prototype._acquire=function(e){void 0===e&&(e=null),e?(this._currentItem=e,this._currentItem.onAcquired(e.requestId)):this._currentItem=null},e.prototype._release=function(e){if(this._currentItem&&this._currentItem.requestId===e){var t=this._currentItem;this._currentItem=null,t.nodeId===this.nodeId&&this._send(nd.RELEASE_LOCK,{requestId:t.requestId});var n=this._queue.findIndex(function(t){return t.requestId===e});n>-1&&this._queue.splice(n,1),t.onReleased(e)}},e.prototype._requestLock=function(e){var t=this;return new Promise(function(n){var r={nodeId:e.nodeId,requestId:e.requestId,ts:e.ts,onAcquired:function(e){t.isHost&&t._send(nd.ACQUIRE_LOCK,{requestId:e}),n()},onReleased:function(){t._acquire(t._queue[0])}},i=!1;for(var s in t._queue)if(t._queue[s].ts>r.ts){t._queue.splice(parseInt(s),0,r),i=!0;break}i||t._queue.push(r),t._currentItem||t._acquire(t._queue[0])})},e.prototype._sendSync=function(){var e;this.isHost&&this._send(nd.SYNC_HOST,{data:{currentItemRequestId:null===(e=this._currentItem)||void 0===e?void 0:e.requestId,queue:this._queue.map(function(e){return{nodeId:e.nodeId,requestId:e.requestId,ts:e.ts}})}})},e.prototype._waitUntilSyncCompleted=function(){return(0,i.j)(this,void 0,void 0,function(){var e=this;return(0,i.k)(this,function(t){return this.isHost&&!this.isInSync?[2,new Promise(function(t){e._activationQueue.push(t)})]:[2]})})},e.prototype._waitSync=function(){var e=this;this.isInSync||(this._activationTimeout=setTimeout(function(){e._completeSync()},8))},e.prototype._completeSync=function(){this.isInSync||(this._state=nl.DONE,this._activationQueue.forEach(function(e){return e()}),this._activationQueue=[])},e.prototype.registerNode=function(){this._send(nd.NEWNODE),this._waitSync()},e.prototype.claimHost=function(){this._hostId=this.nodeId,this._send(nd.CLAIM_HOST),this._waitSync()},e.prototype.lock=function(){return(0,i.j)(this,void 0,void 0,function(){var e;return(0,i.k)(this,function(t){switch(t.label){case 0:return[4,this._waitUntilSyncCompleted()];case 1:return t.sent(),e=this._send(nd.REQUEST_LOCK),[4,this._requestLock(e)];case 2:return t.sent(),[2]}})})},e.prototype.unlock=function(){var e;this._release(null===(e=this._currentItem)||void 0===e?void 0:e.requestId)},e}(),ny=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.keyName,s=e.keyHash,o=e.indexes,a=e.store,u=this;this._state=tD.INIT,this._metadata=null,this._indexers=[],this.dbname=t,this.name=n,this.keyName=r,this.indexes=(0,i.Z)([[r]],(0,i.Y)(o.filter(function(e){return ni.createKey(e)!==u.keyName})),!1),this._keyHash=s,this._store=a,this._mutex=new ng("".concat(t2(t,n),".lock")),this._blobContainer=new t6({dbname:t,collectionName:n,store:a}),this._transaction=new nt({dbname:t,collectionName:n,store:a})}return e.metadataOf=function(e,t,n){return(0,i.j)(this,void 0,void 0,function(){var r;return(0,i.k)(this,function(i){switch(i.label){case 0:return r=t4(e,t),[4,n.get(r)];case 1:return[2,i.sent()]}})})},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReady",{get:function(){return this._state===tD.READY},enumerable:!1,configurable:!0}),e.prototype.init=function(){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o,a,u,c,l,d,h,f,p,_,v=this;return(0,i.k)(this,function(m){switch(m.label){case 0:return[4,this._mutex.lock()];case 1:m.sent(),m.label=2;case 2:return m.trys.push([2,9,,10]),t=tM.get(this.dbname),[4,e.metadataOf(this.dbname,this.name,this._store)];case 3:return n=m.sent(),this._metadata=n||{keyName:this.keyName,blockLevel:1,blockHashBase:t.blockHashBase,blockHashMultiplier:t.blockHashMultiplier,blockHashConstant:t.blockHashConstant,indexes:this.indexes},[4,this._transaction.init()];case 4:m.sent(),this._blockManager=new nr({dbname:this.dbname,collectionName:this.name,hashFunction:this._keyHash,metadata:this._metadata,transaction:this._transaction,store:this._store}),r=(0,i.Z)([],(0,i.Y)(this.indexes),!1),s=[],o=r.map(function(e){return ni.createKey(e)}),a=n?n.indexes.map(function(e){return ni.createKey(e)}):[];try{for(c=(u=(0,i.z)(a)).next();!c.done;c=u.next())l=c.value,o.includes(l)||s.push(ni.parseKey(l))}catch(e){p={error:e}}finally{try{c&&!c.done&&(_=u.return)&&_.call(u)}finally{if(p)throw p.error}}return(d=[]).push.apply(d,(0,i.Z)([],(0,i.Y)(r.map(function(e){var t=new ni({dbname:v.dbname,collectionName:v.name,keyName:v.keyName,fields:e,transaction:v._transaction,store:v._store});return v._indexers.push(t),t.ensure()})),!1)),d.push.apply(d,(0,i.Z)([],(0,i.Y)(s.map(function(e){return new ni({dbname:v.dbname,collectionName:v.name,keyName:v.keyName,fields:e,transaction:v._transaction,store:v._store}).drop()})),!1)),[4,Promise.all(d)];case 5:return m.sent(),[4,this._transaction.commit()];case 6:return m.sent(),o.sort().join(",")===a.sort().join(",")?[3,8]:(h=t4(this.dbname,this.name),this._metadata.indexes=r,[4,this._store.set({key:h,value:this._metadata,generation:1})]);case 7:m.sent(),m.label=8;case 8:return this._state=tD.READY,this._mutex.unlock(),[3,10];case 9:throw f=m.sent(),this._mutex.unlock(),f;case 10:return[2]}})})},e.prototype.close=function(){this._state=tD.CLOSED},e.prototype._hasPropertyOfKeyName=function(e){var t=e[this.keyName];return"string"==typeof t&&!!t},e.prototype._getIndexerBy=function(e){void 0===e&&(e=null),e||(e=[this.keyName]);var t,n,r=ni.createKey(e);try{for(var s=(0,i.z)(this._indexers),o=s.next();!o.done;o=s.next()){var a=o.value;if(r===ni.createKey(a.fields))return a}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return null},e.prototype._upgradeBlockLevel=function(){return(0,i.j)(this,void 0,void 0,function(){var e;return(0,i.k)(this,function(t){switch(t.label){case 0:return e=t4(this.dbname,this.name),this._metadata.blockLevel++,[4,this._store.set({key:e,value:this._metadata,generation:1})];case 1:return t.sent(),[2]}})})},e.prototype._requestInsert=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o;return(0,i.k)(this,function(a){switch(a.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return a.sent()?[3,13]:[4,this._blockManager.putToBlock(t,e)];case 2:return a.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return a.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:a.sent(),a.label=5;case 5:a.trys.push([5,10,11,12]),r=(n=(0,i.z)(this._indexers)).next(),a.label=6;case 6:return r.done?[3,9]:[4,r.value.addItem(e)];case 7:a.sent(),a.label=8;case 8:return r=n.next(),[3,6];case 9:return[3,12];case 10:return s={error:a.sent()},[3,12];case 11:try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(s)throw s.error}return[7];case 12:return[3,14];case 13:throw tP.collectionInsertDuplicate;case 14:return[2]}})})},e.prototype._requestUpsert=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o,a,u,c,l,d,h;return(0,i.k)(this,function(f){switch(f.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=f.sent())?[3,13]:[4,this._blockManager.putToBlock(t,e)];case 2:return f.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return f.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:f.sent(),f.label=5;case 5:f.trys.push([5,10,11,12]),s=(r=(0,i.z)(this._indexers)).next(),f.label=6;case 6:return s.done?[3,9]:[4,(u=s.value).addItem(e)];case 7:f.sent(),f.label=8;case 8:return s=r.next(),[3,6];case 9:return[3,12];case 10:return c={error:f.sent()},[3,12];case 11:try{s&&!s.done&&(l=r.return)&&l.call(r)}finally{if(c)throw c.error}return[7];case 12:return[3,23];case 13:return[4,this._blockManager.putToBlock(t,e)];case 14:f.sent(),f.label=15;case 15:f.trys.push([15,21,22,23]),a=(o=(0,i.z)(this._indexers)).next(),f.label=16;case 16:return a.done?[3,20]:0===(u=a.value).diff(u.getColumnValues(n),u.getColumnValues(e))?[3,19]:[4,u.removeItem(n)];case 17:return f.sent(),[4,u.addItem(e)];case 18:f.sent(),f.label=19;case 19:return a=o.next(),[3,16];case 20:return[3,23];case 21:return d={error:f.sent()},[3,23];case 22:try{a&&!a.done&&(h=o.return)&&h.call(o)}finally{if(d)throw d.error}return[7];case 23:return[2]}})})},e.prototype._requestUpdate=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o,a,u;return(0,i.k)(this,function(c){switch(c.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=c.sent())?[4,this._blockManager.putToBlock(t,e)]:[3,11];case 2:c.sent(),c.label=3;case 3:c.trys.push([3,9,10,11]),s=(r=(0,i.z)(this._indexers)).next(),c.label=4;case 4:return s.done?[3,8]:0===(o=s.value).diff(o.getColumnValues(n),o.getColumnValues(e))?[3,7]:[4,o.removeItem(n)];case 5:return c.sent(),[4,o.addItem(e)];case 6:c.sent(),c.label=7;case 7:return s=r.next(),[3,4];case 8:return[3,11];case 9:return a={error:c.sent()},[3,11];case 10:try{s&&!s.done&&(u=r.return)&&u.call(r)}finally{if(a)throw a.error}return[7];case 11:return[2]}})})},e.prototype._requestRemove=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o;return(0,i.k)(this,function(a){switch(a.label){case 0:return[4,this._blockManager.getFromBlock(e)];case 1:return(t=a.sent())?[4,this._blockManager.removeFromBlock(e)]:[3,10];case 2:a.sent(),a.label=3;case 3:a.trys.push([3,8,9,10]),r=(n=(0,i.z)(this._indexers)).next(),a.label=4;case 4:return r.done?[3,7]:[4,r.value.removeItem(t)];case 5:a.sent(),a.label=6;case 6:return r=n.next(),[3,4];case 7:return[3,10];case 8:return s={error:a.sent()},[3,10];case 9:try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(s)throw s.error}return[7];case 10:return[2]}})})},e.prototype._requestClear=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r;return(0,i.k)(this,function(s){switch(s.label){case 0:return[4,this._blockManager.clearAllBlocks()];case 1:s.sent(),s.label=2;case 2:s.trys.push([2,7,8,9]),t=(e=(0,i.z)(this._indexers)).next(),s.label=3;case 3:return t.done?[3,6]:[4,t.value.clear()];case 4:s.sent(),s.label=5;case 5:return t=e.next(),[3,3];case 6:return[3,9];case 7:return n={error:s.sent()},[3,9];case 8:try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(n)throw n.error}return[7];case 9:return[2]}})})},e.prototype.getByKey=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n;return(0,i.k)(this,function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,6];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this._blockManager.getFromBlock(e)];case 3:return t=r.sent(),this._mutex.unlock(),[2,tq(t)];case 4:throw n=r.sent(),this._mutex.unlock(),n;case 5:return[3,7];case 6:throw tP.collectionNotReady;case 7:return[2]}})})},e.prototype.query=function(e){return void 0===e&&(e={}),this.isReady?new t0({condition:e.where,mutex:this._mutex,blockManager:this._blockManager,indexer:this._getIndexerBy(e.index),backward:!!e.backward}):null},e.prototype.insertOne=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw tP.collectionKeyNotGiven;return[4,this._requestInsert(tq(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw tP.collectionNotReady;case 9:return[2]}})})},e.prototype.insertMany=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o,a,u=this;return(0,i.k)(this,function(c){switch(c.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:c.sent(),c.label=2;case 2:if(c.trys.push([2,12,,14]),e.some(function(e){return!u._hasPropertyOfKeyName(e)}))throw tP.collectionKeyNotGiven;c.label=3;case 3:c.trys.push([3,8,9,10]),n=(t=(0,i.z)(e)).next(),c.label=4;case 4:return n.done?[3,7]:(r=n.value,[4,this._requestInsert(tq(r))]);case 5:c.sent(),c.label=6;case 6:return n=t.next(),[3,4];case 7:return[3,10];case 8:return o={error:c.sent()},[3,10];case 9:try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(o)throw o.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return c.sent(),this._mutex.unlock(),[2,e];case 12:return s=c.sent(),[4,this._transaction.clear()];case 13:throw c.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw tP.collectionNotReady;case 16:return[2]}})})},e.prototype.upsertOne=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw tP.collectionKeyNotGiven;return[4,this._requestUpsert(tq(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw tP.collectionNotReady;case 9:return[2]}})})},e.prototype.upsertMany=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o,a,u=this;return(0,i.k)(this,function(c){switch(c.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:c.sent(),c.label=2;case 2:if(c.trys.push([2,12,,14]),e.some(function(e){return!u._hasPropertyOfKeyName(e)}))throw tP.collectionKeyNotGiven;c.label=3;case 3:c.trys.push([3,8,9,10]),n=(t=(0,i.z)(e)).next(),c.label=4;case 4:return n.done?[3,7]:(r=n.value,[4,this._requestUpsert(tq(r))]);case 5:c.sent(),c.label=6;case 6:return n=t.next(),[3,4];case 7:return[3,10];case 8:return o={error:c.sent()},[3,10];case 9:try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(o)throw o.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return c.sent(),this._mutex.unlock(),[2,e];case 12:return s=c.sent(),[4,this._transaction.clear()];case 13:throw c.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw tP.collectionNotReady;case 16:return[2]}})})},e.prototype.update=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw tP.collectionKeyNotGiven;return[4,this._requestUpdate(tq(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw tP.collectionNotReady;case 9:return[2]}})})},e.prototype.updateIf=function(e,t){return(0,i.j)(this,void 0,void 0,function(){var n,r,s,o,a,u,c,l,d,h,f,p,_,v=this;return(0,i.k)(this,function(m){switch(m.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,16];case 1:m.sent(),m.label=2;case 2:return m.trys.push([2,13,,15]),r=void 0===(n=e.where)?{}:n,o=void 0===(s=e.index)?null:s,u=void 0!==(a=e.backward)&&a,c=[],[4,new t$({condition:r,blockManager:this._blockManager,backward:u,indexer:this._getIndexerBy(o)}).each(function(e){return(0,i.j)(v,void 0,void 0,function(){var n,s;return(0,i.k)(this,function(i){if(e.error)throw e.stop(),e.error;if(e.hasNext){if(tB(r,n=e.nextValue)&&t.set){if("function"!=typeof t.set)for(s in t.set)n[s]=t.set[s];else t.set(n);c.push(n)}e.next()}else e.stop();return[2]})})})];case 3:m.sent(),m.label=4;case 4:m.trys.push([4,9,10,11]),d=(l=(0,i.z)(c)).next(),m.label=5;case 5:return d.done?[3,8]:(h=d.value,[4,this._requestUpdate(tq(h))]);case 6:m.sent(),m.label=7;case 7:return d=l.next(),[3,5];case 8:return[3,11];case 9:return p={error:m.sent()},[3,11];case 10:try{d&&!d.done&&(_=l.return)&&_.call(l)}finally{if(p)throw p.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return m.sent(),this._mutex.unlock(),[2,c];case 13:return f=m.sent(),[4,this._transaction.clear()];case 14:throw m.sent(),this._mutex.unlock(),f;case 15:return[3,17];case 16:throw this._transaction.clear(),tP.collectionNotReady;case 17:return[2]}})})},e.prototype.remove=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,5,,7]),[4,this._requestRemove(e)];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[3,7];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw tP.collectionNotReady;case 9:return[2]}})})},e.prototype.removeIf=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o,a,u,c,l,d,h,f,p,_=this;return(0,i.k)(this,function(v){switch(v.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:v.sent(),v.label=2;case 2:return v.trys.push([2,13,,14]),n=void 0===(t=e.where)?{}:t,s=void 0===(r=e.index)?null:r,a=void 0!==(o=e.backward)&&o,u=[],[4,new t$({condition:n,blockManager:this._blockManager,backward:a,indexer:this._getIndexerBy(s)}).each(function(e){return(0,i.j)(_,void 0,void 0,function(){var t,r;return(0,i.k)(this,function(i){if(e.error)throw e.stop(),e.error;return e.hasNext?(tB(n,t=e.nextValue)&&(r=t[this.keyName],u.push(r)),e.next()):e.stop(),[2]})})})];case 3:v.sent(),v.label=4;case 4:v.trys.push([4,9,10,11]),l=(c=(0,i.z)(u)).next(),v.label=5;case 5:return l.done?[3,8]:(d=l.value,[4,this._requestRemove(d)]);case 6:v.sent(),v.label=7;case 7:return l=c.next(),[3,5];case 8:return[3,11];case 9:return f={error:v.sent()},[3,11];case 10:try{l&&!l.done&&(p=c.return)&&p.call(c)}finally{if(f)throw f.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return v.sent(),this._mutex.unlock(),[2,u];case 13:throw h=v.sent(),this._mutex.unlock(),h;case 14:return[3,16];case 15:throw this._transaction.clear(),tP.collectionNotReady;case 16:return[2]}})})},e.prototype.clear=function(){return(0,i.j)(this,void 0,void 0,function(){var e;return(0,i.k)(this,function(t){switch(t.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this._requestClear()];case 3:return t.sent(),[4,this._transaction.commit()];case 4:return t.sent(),this._mutex.unlock(),[3,7];case 5:return e=t.sent(),[4,this._transaction.clear()];case 6:throw t.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw tP.collectionNotReady;case 9:return[2]}})})},e.prototype.getBlob=function(e){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(t){switch(t.label){case 0:return[4,this._blobContainer.get(e)];case 1:return[2,t.sent()]}})})},e.prototype.saveBlob=function(e,t){return void 0===t&&(t=null),(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(n){switch(n.label){case 0:return[4,this._blobContainer.save(e,t)];case 1:return[2,n.sent()]}})})},e.prototype.removeBlob=function(e){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(t){switch(t.label){case 0:return[4,this._blobContainer.remove(e)];case 1:return t.sent(),[2]}})})},e.prototype.removeAllBlobs=function(){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(e){switch(e.label){case 0:return[4,this._blobContainer.clear()];case 1:return e.sent(),[2]}})})},e}(),nb={},nE=function(){function e(e){void 0===e&&(e={});var t=e.itemSizeLimit,n=e.delay,r=e.encryption,s=void 0===r?i.$:r;this._encryption=s,this.itemSizeLimit=void 0===t?4194304:t,this.delay=void 0===n?1:n,this.observer={}}return Object.defineProperty(e.prototype,"rawData",{get:function(){return nb[this.dbname]},set:function(e){nb[this.dbname]=e},enumerable:!1,configurable:!0}),e.prototype.observe=function(e,t,n){var r=this;this.observer[e]={},t.forEach(function(t){return r.observer[e][t]=n})},e.prototype.init=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:this.dbname=e,nb[this.dbname]={},n.label=1;case 1:return n.trys.push([1,,3,5]),[4,this.get(i.a0.key)];case 2:if((t=n.sent())&&JSON.stringify(t)!==JSON.stringify(i.a0.value))throw tP.storeEncryptionInvalid;return[3,5];case 3:return[4,this.set(i.a0)];case 4:return n.sent(),[7];case 5:return[2]}})})},e.prototype.getAllKeys=function(){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(e){return[2,Object.keys(nb[this.dbname]).filter(function(e){return e!==i.a0.key})]})})},e.prototype.get=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:return[4,this.getRaw(e)];case 1:return[2,(t=n.sent())?this._encryption.decrypt(t):null]}})})},e.prototype.getRaw=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n;return(0,i.k)(this,function(r){switch(r.label){case 0:return[4,tG(this.delay)];case 1:if(r.sent(),n=(t=this.observer[e])&&t.get?t.get(e):null)throw n;return[2,nb[this.dbname][e]]}})})},e.prototype.set=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o,a;return(0,i.k)(this,function(u){switch(u.label){case 0:return[4,tG(this.delay)];case 1:if(u.sent(),t=e.key,n=e.value,s=(r=this.observer[t])&&r.set?r.set(t):null)throw s;if(a=JSON.stringify(o=this._encryption.encrypt(n)),t===i.a0.key||a.length<this.itemSizeLimit)return nb[this.dbname][t]=o,[2,nb[this.dbname][t]];throw tP.storeItemSizeExceeded}})})},e.prototype.setMany=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n=this;return(0,i.k)(this,function(r){switch(r.label){case 0:return[4,tG(this.delay)];case 1:return r.sent(),t=[],e.forEach(function(e){var r=e.key,s=e.value,o=n.observer[r];if(o&&o.set?o.set(r):null)t.push(tP.collectionWriteFailed);else{var a=n._encryption.encrypt(s),u=JSON.stringify(a);r===i.a0.key||u.length<n.itemSizeLimit?(nb[n.dbname][r]=a,t.push(s)):t.push(tP.storeItemSizeExceeded)}}),[2,t]}})})},e.prototype.remove=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n;return(0,i.k)(this,function(r){switch(r.label){case 0:return[4,tG(this.delay)];case 1:if(r.sent(),n=(t=this.observer[e])&&t.remove?t.remove(e):null)throw n;return nb[this.dbname][e]&&delete nb[this.dbname][e],[2,e]}})})},e.prototype.removeMany=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o,a,u;return(0,i.k)(this,function(c){switch(c.label){case 0:return[4,tG(this.delay)];case 1:c.sent();try{for(n=(t=(0,i.z)(e)).next();!n.done;n=t.next()){if(r=n.value,o=(s=this.observer[r])&&s.remove?s.remove(r):null)throw o;nb[this.dbname][r]&&delete nb[this.dbname][r]}}catch(e){a={error:e}}finally{try{n&&!n.done&&(u=t.return)&&u.call(t)}finally{if(a)throw a.error}}return[2,e]}})})},e.prototype.clear=function(){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(e){switch(e.label){case 0:return[4,tG(this.delay)];case 1:return e.sent(),nb[this.dbname]={},[2]}})})},e}(),nI=function(){function e(e){void 0===e&&(e={}),this.itemSizeLimit=104857600;var t=e.encryption,n=void 0===t?i.$:t;this._window="undefined"!=typeof window?window:null,this._indexedDB=this._window?this._window.indexedDB||this._window.mozIndexedDB||this._window.webkitIndexedDB||this._window.msIndexedDB:null,this._encryption=n}return e.prototype.init=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r=this;return(0,i.k)(this,function(s){switch(s.label){case 0:return this.dbname=e,[4,new Promise(function(e,t){if(r._window&&ns){if(no){var n=r._indexedDB.open("_testMozilla");n.onerror=function(){return t(tP.storeNotAvailableInPrivateBrowsing)},n.onsuccess=function(){return e()}}else nh?!r._window.indexedDB&&(r._window.PointerEvent||r._window.MSPointerEvent)&&t(tP.storeNotAvailableInPrivateBrowsing):e()}else t(tP.storeNotAvailable)})];case 1:return s.sent(),t=this,[4,new Promise(function(t,n){var i=r._indexedDB.open(e);i.addEventListener("upgradeneeded",function(e){e.target.result.createObjectStore("NestDBStore",{keyPath:"key"})}),i.addEventListener("success",function(e){return t(e.target.result)}),i.addEventListener("error",function(e){return n(e.target.error)})})];case 2:t._database=s.sent(),s.label=3;case 3:return s.trys.push([3,,5,7]),[4,this.get(i.a0.key)];case 4:if((n=s.sent())&&JSON.stringify(n)!==JSON.stringify(i.a0.value))throw tP.storeEncryptionInvalid;return[3,7];case 5:return[4,this.set(i.a0)];case 6:return s.sent(),[7];case 7:return[2]}})})},e.prototype.getAllKeys=function(){return(0,i.j)(this,void 0,void 0,function(){var e=this;return(0,i.k)(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t,n){var r=e._database.transaction("NestDBStore","readonly").objectStore("NestDBStore").getAllKeys();r.addEventListener("success",function(e){t(e.target.result.filter(function(e){return e!==i.a0.key}))}),r.addEventListener("error",function(e){return n(e.target.error)})})];case 1:return[2,t.sent()]}})})},e.prototype.get=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:return[4,this.getRaw(e)];case 1:return[2,(t=n.sent())?this._encryption.decrypt(t):null]}})})},e.prototype.getRaw=function(e){return(0,i.j)(this,void 0,void 0,function(){var t=this;return(0,i.k)(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n,r){var i=t._database.transaction("NestDBStore","readonly").objectStore("NestDBStore").get(e);i.addEventListener("success",function(e){return n(e.target.result?e.target.result.value:null)}),i.addEventListener("error",function(e){return r(e.target.error)})})];case 1:return[2,n.sent()]}})})},e.prototype.set=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r=this;return(0,i.k)(this,function(i){switch(i.label){case 0:return t=e.key,n=e.value,[4,new Promise(function(e,i){var s=r._database.transaction("NestDBStore","readwrite").objectStore("NestDBStore").put({key:t,value:r._encryption.encrypt(n)});s.addEventListener("success",function(t){e(t.target.result)}),s.addEventListener("error",function(e){return i(e.target.error)})})];case 1:return i.sent(),[2,n]}})})},e.prototype.setMany=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r=this;return(0,i.k)(this,function(i){switch(i.label){case 0:return t=[],n=this._database.transaction("NestDBStore","readwrite").objectStore("NestDBStore"),e.forEach(function(e){var i=e.key,s=e.value;t.push(new Promise(function(e){var t=n.put({key:i,value:r._encryption.encrypt(s)});t.addEventListener("success",function(t){e(t.target.result)}),t.addEventListener("error",function(){e(tP.collectionWriteFailed)})}))}),[4,Promise.all(t)];case 1:return i.sent(),[2,e.map(function(e){return e.value})]}})})},e.prototype.remove=function(e){return(0,i.j)(this,void 0,void 0,function(){var t=this;return(0,i.k)(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n,r){var i=t._database.transaction("NestDBStore","readwrite").objectStore("NestDBStore").delete(e);i.addEventListener("success",function(){return n(e)}),i.addEventListener("error",function(e){return r(e.target.error)})})];case 1:return[2,n.sent()]}})})},e.prototype.removeMany=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:return t=this._database.transaction("NestDBStore","readwrite").objectStore("NestDBStore"),[4,Promise.all(e.map(function(e){return new Promise(function(n,r){var i=t.delete(e);i.addEventListener("success",function(){return n(e)}),i.addEventListener("error",function(e){return r(e.target.error)})})}))];case 1:return[2,n.sent()]}})})},e.prototype.clear=function(){return(0,i.j)(this,void 0,void 0,function(){var e=this;return(0,i.k)(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t,n){var r=e._database.transaction("NestDBStore","readwrite").objectStore("NestDBStore").clear();r.addEventListener("success",function(){return t()}),r.addEventListener("error",function(e){return n(e.target.error)})})];case 1:return[2,t.sent()]}})})},e}(),nT=function(){function e(e){var t=e.AsyncStorage,n=e.encryption,r=void 0===n?i.$:n;this.itemSizeLimit=6291456,this._asyncStorage=t,this._encryption=r}return e.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},e.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},e.prototype.init=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:this.dbname=e,n.label=1;case 1:return n.trys.push([1,,3,5]),[4,this.get(i.a0.key)];case 2:if((t=n.sent())&&JSON.stringify(t)!==JSON.stringify(i.a0.value))throw tP.storeEncryptionInvalid;return[3,5];case 3:return[4,this.set(i.a0)];case 4:return n.sent(),[7];case 5:return[2]}})})},e.prototype.getAllKeys=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t=this;return(0,i.k)(this,function(n){switch(n.label){case 0:return e=this._getActualKey(i.a0.key),[4,this._asyncStorage.getAllKeys()];case 1:return[2,n.sent().filter(function(n){return t._isBelonging(n)&&n!==e}).map(function(e){return e.substring("".concat(t.dbname,"/").length)})]}})})},e.prototype.get=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:return[4,this.getRaw(e)];case 1:return[2,(t=n.sent())?this._encryption.decrypt(t):null]}})})},e.prototype.getRaw=function(e){return(0,i.j)(this,void 0,void 0,function(){var t;return(0,i.k)(this,function(n){switch(n.label){case 0:return[4,this._asyncStorage.getItem(this._getActualKey(e))];case 1:return[2,(t=n.sent())?JSON.parse(t):null]}})})},e.prototype.set=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r;return(0,i.k)(this,function(s){switch(s.label){case 0:return t=e.key,n=e.value,r=JSON.stringify(this._encryption.encrypt(n)),t===i.a0.key||r.length<this.itemSizeLimit?[4,this._asyncStorage.setItem(this._getActualKey(t),r)]:[3,2];case 1:return s.sent(),[2,JSON.parse(r)];case 2:throw tP.storeItemSizeExceeded}})})},e.prototype.setMany=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o,a,u,c,l,d;return(0,i.k)(this,function(h){switch(h.label){case 0:t=[],n=[];try{for(s=(r=(0,i.z)(e)).next();!s.done;s=r.next()){o=s.value;try{a=o.key,u=o.value,c=JSON.stringify(this._encryption.encrypt(u)),a===i.a0.key||c.length<this.itemSizeLimit?(n.push([this._getActualKey(a),c]),t.push(u)):t.push(tP.storeItemSizeExceeded)}catch(e){t.push(tP.collectionWriteFailed)}}}catch(e){l={error:e}}finally{try{s&&!s.done&&(d=r.return)&&d.call(r)}finally{if(l)throw l.error}}h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this._asyncStorage.multiSet(n)];case 2:return h.sent(),[3,4];case 3:return h.sent(),[2,Array(t.length).fill(tP.collectionWriteFailed)];case 4:return[2,t]}})})},e.prototype.remove=function(e){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(t){switch(t.label){case 0:return[4,this._asyncStorage.removeItem(this._getActualKey(e))];case 1:return t.sent(),[2,e]}})})},e.prototype.removeMany=function(e){return(0,i.j)(this,void 0,void 0,function(){var t=this;return(0,i.k)(this,function(n){switch(n.label){case 0:return[4,this._asyncStorage.multiRemove(e.map(function(e){return t._getActualKey(e)}))];case 1:return n.sent(),[2,e]}})})},e.prototype.clear=function(){return(0,i.j)(this,void 0,void 0,function(){var e;return(0,i.k)(this,function(t){switch(t.label){case 0:return[4,this.getAllKeys()];case 1:return e=t.sent(),[4,this.removeMany(e)];case 2:return t.sent(),[4,this.remove(i.a0.key)];case 3:return t.sent(),[2]}})})},e}(),nS=!0,nw=function(){function e(){}return e.off=function(){nS=!1},e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];nS&&console.log.apply(console,(0,i.Z)(["".concat("[NESTDB]","[LOG]")],(0,i.Y)(e),!1))},e.warning=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];nS&&console.warn.apply(console,(0,i.Z)(["".concat("[NESTDB]","[WARNING]")],(0,i.Y)(e),!1))},e.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];nS&&console.error.apply(console,(0,i.Z)(["".concat("[NESTDB]","[ERROR]")],(0,i.Y)(e),!1))},e}();(r=nv||(nv={})).INIT="INIT",r.OPENING="OPENING",r.OPENED="OPENED",r.CLOSED="CLOSED";var nC=function(){function e(e){var t=e.name,n=e.version,r=e.store,i=e.config;this.name=t,this._version=n,this._state=nv.INIT,this._config=i||new tM({dbname:t}),this._store=r,this._event={success:tQ,error:tQ,upgrade:tK},this._collections=new Map,this._globalMutex=new ng("".concat(this.name,".lock")),this._config.disableLogger&&nw.off(),new ne({dbname:t,limit:this._config.cacheLimit})}return Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.estimateUsage=function(){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(e){var t;switch(e.label){case 0:return[4,(t=this._store,(0,i.j)(void 0,void 0,void 0,function(){var e,n,r,s,o,a,u,c;return(0,i.k)(this,function(l){switch(l.label){case 0:return e=0,[4,t.getAllKeys()];case 1:n=l.sent(),l.label=2;case 2:l.trys.push([2,7,8,9]),s=(r=(0,i.z)(n)).next(),l.label=3;case 3:return s.done?[3,6]:(o=s.value,[4,t.getRaw(o)]);case 4:a=l.sent(),e+=JSON.stringify(a).length,l.label=5;case 5:return s=r.next(),[3,3];case 6:return[3,9];case 7:return u={error:l.sent()},[3,9];case 8:try{s&&!s.done&&(c=r.return)&&c.call(r)}finally{if(u)throw u.error}return[7];case 9:return[2,e]}})}))];case 1:return[2,e.sent()]}})})},e.prototype.commitSchema=function(e){return(0,i.j)(this,void 0,void 0,function(){var t=this;return(0,i.k)(this,function(n){switch(n.label){case 0:return this._state!==nv.OPENING?[3,2]:[4,Promise.all(e.map(function(e){return(0,i.j)(t,void 0,void 0,function(){var t,n,r,s;return(0,i.k)(this,function(i){switch(i.label){case 0:return t=e.collectionName,n=e.keyName,s=void 0===(r=e.index)?[]:r,this._collections.has(t)||this._collections.set(t,new ny({dbname:this.name,collectionName:t,keyName:n,indexes:s,store:this._store})),[4,this._collections.get(t).init()];case 1:return i.sent(),[2]}})})}))];case 1:return n.sent(),[3,3];case 2:throw tP.databaseSchemaNotOnUpgrade;case 3:return[2]}})})},e.prototype.open=function(){var e;return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o=this;return(0,i.k)(this,function(a){var u;switch(a.label){case 0:return[4,this._globalMutex.lock()];case 1:if(a.sent(),this._state===nv.OPENED)return[3,15];this._state=nv.OPENING,a.label=2;case 2:return a.trys.push([2,5,,15]),[4,this._store.init(this.name)];case 3:return a.sent(),u=this.name,t="".concat(t1(u),".metadata"),n={version:0,collectionNames:[]},[4,this._store.get(t)];case 4:return r=null!==(e=a.sent())&&void 0!==e?e:n,[2,new Promise(function(e,n){var s=function(e){r.version<o._version?o._event.upgrade(r.version,function(n){return(0,i.j)(o,void 0,void 0,function(){return(0,i.k)(this,function(i){switch(i.label){case 0:if(n)return[3,5];r.version++,r.collectionNames=Array.from(this._collections.keys()),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._store.set({key:t,value:r,generation:this._version})];case 2:return i.sent(),e({continued:!0}),[3,4];case 3:return e({continued:!1,err:i.sent()}),[3,4];case 4:return[3,6];case 5:e({continued:!1,err:n}),i.label=6;case 6:return[2]}})})}):e({continued:!1})},a=function(t){var u=t.continued,c=t.err,l=void 0===c?null:c;if(void 0!==u&&u)setTimeout(function(){return s(a)},10);else if(l)nw.error(l.message),o._globalMutex.unlock(),o._event.error(l),n(l);else{var d=[];r.collectionNames.forEach(function(e){o._collections.has(e)||d.push((0,i.j)(o,void 0,void 0,function(){var t,n;return(0,i.k)(this,function(r){switch(r.label){case 0:return[4,ny.metadataOf(this.name,e,this._store)];case 1:return(t=r.sent())?(n=new ny({dbname:this.name,collectionName:e,keyName:t.keyName,indexes:t.indexes,store:this._store}),this._collections.set(e,n),[4,n.init()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})}))}),Promise.all(d).then(function(){o._state=nv.OPENED,o._globalMutex.unlock(),o._event.success(),e()}).catch(function(e){nw.error(e.message),o._globalMutex.unlock(),o._event.error(e),n(e)})}};s(a)})];case 5:switch((s=a.sent()).code){case tf.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:return[3,6];case tf.STORE_NOT_AVAILABLE:return[3,8];case tf.STORE_ENCRYPTION_INVALID:return[3,10]}return[3,13];case 6:return nw.warning("Access to the local storage is not allowed in private browsing. Switched to MemoryStore automatically."),this._store=new nE({}),this._globalMutex.unlock(),this._event.error(s),[4,this.open()];case 7:case 9:case 12:return a.sent(),[3,14];case 8:return nw.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."),this._store=new nE({}),this._globalMutex.unlock(),this._event.error(s),[4,this.open()];case 10:return nw.warning("Encryption algorithm has changed. Stored data would be cleared."),[4,this._store.clear()];case 11:return a.sent(),this._globalMutex.unlock(),this._event.error(s),[4,this.open()];case 13:throw nw.error(s.message),this._globalMutex.unlock(),this._event.error(s),s;case 14:return[3,15];case 15:return[2]}})})},e.prototype.close=function(){this._collections.forEach(function(e){return e.close()}),this._state=nv.CLOSED},e.prototype.clear=function(){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._collections.values()).map(function(e){return e.clear()}))];case 1:return e.sent(),[2]}})})},e.prototype.reset=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t=this;return(0,i.k)(this,function(n){switch(n.label){case 0:return this.close(),(e=ne.get(this.name))&&e.clearByCondition(function(e){return e.key.startsWith(t1(t.name))}),[4,this._store.clear()];case 1:return n.sent(),[2]}})})},e.prototype.on=function(e,t){this._event[e]=t},e.prototype.off=function(e){"function"==typeof this._event[e]&&("upgrade"===e?this._event[e]=tK:this._event[e]=tQ)},e.prototype.collection=function(e){return this._collections.get(e)||null},e}(),nN=null,nk=function(){function e(e,t,n){var r=this;this._fcmPushToken=null,this._apnsPushToken=null,this._iid=e,this.options=t;var s=i.V.of(e),o=s.sdkState,a=s.cacheContext,u=s.dispatcher,c=s.sessionManager,l=s.requestQueue,d=s.logger,h=s.userEventHandlers;this._onlineDetector=new e_({logger:d,connectionDelegate:{reconnect:function(){var t=i.V.of(e),n=t.sdkState,r=t.connectionManager;"foreground"===n.appState&&r.resetAndReconnect()},disconnect:function(){i.V.of(e).connectionManager.disconnect()}}}),new eg(e,{localCacheEnabled:a.localCacheEnabled,dispatcher:u,sdkState:o,logger:d}),n.forEach(function(t){t.init(e,{sdkState:o,cacheContext:a,dispatcher:u,sessionManager:c,requestQueue:l,logger:d,onlineDetector:r._onlineDetector}),r[t.name]=t}),this._appStateChangeDetector=new ep,this._appStateChangeDetector.on("resume",function(){d.debug("the page resumes from freeze"),r.setForegroundState()}).on("pause",function(){d.debug("the page freezes"),r.setBackgroundState()}),u.on(function(t){if(t instanceof i.W){if("USEV"===t.code){var n=t.as(eE).event;if(n.category===ei.FRIEND_DISCOVERED){var s=ey.getDataAsFriendDiscoveredEvent(e,n).friendDiscoveries;(0,i.a6)(function(){return(0,i.j)(r,void 0,void 0,function(){return(0,i.k)(this,function(e){return[2,h.forEach(function(e){e.onFriendsDiscovered(s)})]})})})}}}else if(t instanceof i.a7){var u=i.V.of(r._iid).subscribedUnreadMessageCount,c=!1,l=t.ts;if("number"==typeof l&&l>u.ts){if(u.all!==t.all&&(c=!0),u.all=t.all>=0?t.all:0,t.customTypes)for(var d in t.customTypes)u.customTypes[d]!==t.customTypes[d]&&(c=!0),u.customTypes[d]=t.customTypes[d];c=c&&u.ts>0,u.ts=l}c&&(0,i.a6)(function(){return(0,i.j)(r,void 0,void 0,function(){return(0,i.k)(this,function(e){return[2,h.forEach(function(e){e.onTotalUnreadMessageCountUpdated(u.all,u.customTypes)})]})})})}else t instanceof i.a8&&a.localCacheEnabled&&a.preference.set(r._getUserProfileCacheKey(o.userId),i.a9.payloadify(t.userProfile))})}return e.init=function(t){var n=t.appId,r=t.appVersion,s=t.modules,o=t.options,a=void 0===o?new i.aa:o,u=t.debugMode,c=void 0!==u&&u,l=t.customApiHost,d=t.customWebSocketHost,h=t.newInstance,f=t.logLevel,p=t.localCacheEnabled,_=t.localCacheEncryption,v=t.useAsyncStorageStore,m=void 0===v?null:v;if(!nN||void 0!==h&&h){var g="su-".concat((0,i.ab)()),y=null!=_?_:{encrypt:function(e){return e},decrypt:function(e){return e}},b=new nE({encryption:y});c||(b=m?new nT({AsyncStorage:m,encryption:y}):new nI({encryption:y})),new i.V(g,{appId:n,appVersion:void 0===r?null:r,options:a,apiHost:null!=l?l:"https://api-".concat(n,".sendbird.com"),websocketHost:null!=d?d:"wss://ws-".concat(n,".sendbird.com"),store:b,encryption:y,logLevel:f,localCacheEnabled:void 0!==p&&p,debugMode:c});var E=[new i.ac,new V],I=new e(g,a,(0,i.Z)((0,i.Z)([],(0,i.Y)(void 0===s?[]:s),!1),(0,i.Y)(E),!1));return nN||(nN=I),I}return nN},Object.defineProperty(e,"instance",{get:function(){return nN},enumerable:!1,configurable:!0}),Object.defineProperty(e,"version",{get:function(){return i.a1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appId",{get:function(){return i.V.of(this._iid).sdkState.appId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appInfo",{get:function(){return i.V.of(this._iid).appInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appVersion",{get:function(){var e;return null!==(e=i.V.of(this._iid).sdkState.appVersion)&&void 0!==e?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugMode",{get:function(){return i.V.of(this._iid).debugMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logLevel",{get:function(){return i.V.of(this._iid).logger.level},set:function(e){i.V.of(this._iid).logger.level=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCacheEnabled",{get:function(){return i.V.of(this._iid).cacheContext.localCacheEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ekey",{get:function(){return(0,i.a2)(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentUser",{get:function(){var e;return null!==(e=i.V.of(this._iid).sessionManager.currentUser)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connectionState",{get:function(){var e=i.V.of(this._iid).connectionManager;return e.isConnected?i.a3.OPEN:e.isConnecting?i.a3.CONNECTING:i.a3.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastConnectedAt",{get:function(){var e=i.V.of(this._iid),t=e.connectedAt;return e.connectionManager.isConnected?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fcmPushToken",{get:function(){return this._fcmPushToken},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apnsPushToken",{get:function(){return this._apnsPushToken},enumerable:!1,configurable:!0}),e.prototype._getPreferenceCacheKey=function(e){return"sendbird@".concat(this.appId,"/").concat(e,".pref")},e.prototype._getUserProfileCacheKey=function(e){return"sendbird@".concat(this.appId,"/").concat(e,".profile")},e.prototype.getMemoryStoreForDebugging=function(){var e=i.V.of(this._iid),t=e.debugMode,n=e.cacheContext;if(t)return n.store instanceof nE?n.store:null;throw i.S.debugModeRequired},e.prototype.addExtension=function(e,t){var n=i.V.of(this._iid).sdkState;["sb_uikit","sb_syncmanager","device-os-platform"].indexOf(e)>-1&&(n.extensions[e]=t)},e.prototype.setOnlineListener=function(e){this._onlineDetector.setOnlineListener(e)},e.prototype.setOfflineListener=function(e){this._onlineDetector.setOfflineListener(e)},e.prototype.initializeCache=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o,a,u,c;return(0,i.k)(this,function(l){switch(l.label){case 0:return n=(t=i.V.of(this._iid)).sdkState,r=t.cacheContext,s=t.connectionManager,o=t.dispatcher,n.userId&&n.userId===e?[3,6]:[4,s.logout()];case 1:return l.sent(),n.userId=e,r.localCacheEnabled?(a="sendbird@".concat(n.appId,"/").concat(e,".db"),r.nestdb&&r.nestdb.state!==nv.CLOSED&&r.nestdb.name===a?[3,3]:((u=r.nestdb=new nC({name:"sendbird@".concat(n.appId,"/").concat(e,".db"),version:1,store:r.store})).on("upgrade",function(e,t){0===e?u.commitSchema([{collectionName:"GroupChannel",keyName:"url",index:[et(p.LATEST_LAST_MESSAGE),et(p.CHRONOLOGICAL),et(p.CHANNEL_NAME_ALPHABETICAL)]},{collectionName:"Message",keyName:"messageId",index:[es(ee.CHANNEL_LATEST),es(ee.NEWEST_CHILD_MESSAGE)]},{collectionName:"UnsentMessage",keyName:"reqId",index:[es(ee.CHANNEL_LATEST),es(ee.NEWEST_CHILD_MESSAGE)]},{collectionName:"Poll",keyName:"pollId"}]).then(function(){return t()}).catch(function(e){return t(e)}):t()}),[4,u.open()])):[3,6];case 2:l.sent(),o.dispatch(new eb(this._iid,{userId:e})),l.label=3;case 3:return[4,r.preference.init(this._getPreferenceCacheKey(e))];case 4:return l.sent(),[4,r.preference.get(this._getUserProfileCacheKey(e))];case 5:(c=l.sent())&&new i.a9(this._iid,c).apply(),l.label=6;case 6:return[2]}})})},e.prototype.clearCachedData=function(){return(0,i.j)(this,void 0,void 0,function(){var e;return(0,i.k)(this,function(t){switch(t.label){case 0:return(e=i.V.of(this._iid).cacheContext).localCacheEnabled?(e.nestdb&&e.nestdb.clear(),[4,e.preference.clear()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.clearCachedMessages=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r=this;return(0,i.k)(this,function(s){switch(s.label){case 0:return(0,i.u)((0,i.T)("string",e)).throw(i.S.invalidParameters),t=ef.of(this._iid),n=ed.of(this._iid),t&&n?[4,Promise.all(e.map(function(e){return(0,i.j)(r,void 0,void 0,function(){return(0,i.k)(this,function(r){switch(r.label){case 0:return[4,t.removeMessagesOfChannel(e)];case 1:return r.sent(),[4,n.removeMessagesOfChannel(e)];case 2:return r.sent(),[2]}})})}))]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.connect=function(e,t){return void 0===t&&(t=null),(0,i.j)(this,void 0,void 0,function(){var n,r,s,o,a,u,c;return(0,i.k)(this,function(l){switch(l.label){case 0:(0,i.u)((0,i.i)("string",e)&&(0,i.i)("string",t,!0)).throw(i.S.invalidParameters),r=(n=i.V.of(this._iid)).sdkState,s=n.cacheContext,o=n.connectionManager,a=n.statLogCollector,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.initializeCache(e)];case 2:return l.sent(),[3,4];case 3:return l.sent(),u=i.V.of(this._iid).logger,s.localCacheEnabled=!1,u.warn("Cache initialization failed - cache is not available."),[3,4];case 4:return[4,a.init("sendbird@".concat(r.appId,"/").concat(e,".statlog"))];case 5:return l.sent(),[4,o.connect(t)];case 6:return l.sent(),this._appStateChangeDetector.start(),r.appState="foreground",[4,null==(c=eg.of(this._iid))?void 0:c.processNonAutoResendRegisteredPendingMessages()];case 7:return l.sent(),this._onlineDetector.start(),[2,this.currentUser]}})})},e.prototype.reconnect=function(){var e=i.V.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.sessionManager.auth.hasSession;return r&&t.resetAndReconnect().then(function(){n.appState="foreground"}).catch(function(){}),r},e.prototype.disconnect=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r;return(0,i.k)(this,function(s){switch(s.label){case 0:return t=(e=i.V.of(this._iid)).connectionManager,n=e.cacheContext,r=e.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),r.cancelAll(),[4,t.logout()];case 1:return s.sent(),n.localCacheEnabled?[4,this.clearCachedData()]:[3,3];case 2:s.sent(),s.label=3;case 3:return[2]}})})},e.prototype.setBackgroundState=function(){var e=i.V.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.logger;"foreground"===n.appState&&(n.appState="background",r.debug("going background state"),t.background())},e.prototype.setForegroundState=function(){var e=i.V.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.logger;"background"===n.appState&&(n.appState="foreground",r.debug("going foreground state"),t.resetAndReconnect())},e.prototype.setSessionHandler=function(e){(0,i.u)(e instanceof B).throw(i.S.invalidParameters),i.V.of(this._iid).sessionManager.handler=e},e.prototype.addUserEventHandler=function(e,t){(0,i.u)((0,i.i)("string",e)&&t instanceof H).throw(i.S.invalidParameters),i.V.of(this._iid).userEventHandlers.set(e,t)},e.prototype.removeUserEventHandler=function(e){i.V.of(this._iid).userEventHandlers.delete(e)},e.prototype.removeAllUserEventHandler=function(){i.V.of(this._iid).userEventHandlers.clear()},e.prototype.addConnectionHandler=function(e,t){(0,i.u)((0,i.i)("string",e)&&t instanceof Q).throw(i.S.invalidParameters),i.V.of(this._iid).connectionHandlers.set(e,t)},e.prototype.removeConnectionHandler=function(e){i.V.of(this._iid).connectionHandlers.delete(e)},e.prototype.removeAllConnectionHandler=function(){i.V.of(this._iid).connectionHandlers.clear()},e.prototype.createApplicationUserListQuery=function(e){return void 0===e&&(e={}),new tw(this._iid,e)},e.prototype.createBlockedUserListQuery=function(e){return void 0===e&&(e={}),new tk(this._iid,e)},e.prototype.createFriendListQuery=function(e){return void 0===e&&(e={}),new tL(this._iid,e)},e.prototype.createMessageSearchQuery=function(e){return new i.a4(this._iid,e)},e.prototype.createPollListQuery=function(e){return new x(this._iid,(0,i.l)({},e))},e.prototype.createPollVoterListQuery=function(e){return new F(this._iid,(0,i.l)({},e))},e.prototype.buildUserFromSerializedData=function(e){var t=(0,i.a5)(e);return new i.U(this._iid,i.U.payloadify(t))},e.prototype.updateCurrentUserInfo=function(e){return void 0===e&&(e={}),(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o,a;return(0,i.k)(this,function(u){switch(u.label){case 0:var c;return t=(0,i.l)((0,i.l)({},G),e),(0,i.u)((c=t,(0,i.q)(c.profileImage,!0)&&(0,i.i)("string",c.profileUrl,!0)&&(0,i.i)("string",c.nickname,!0))).throw(i.S.invalidParameters),this.currentUser?(r=(n=i.V.of(this._iid)).sdkState,s=n.requestQueue,o=new eI((0,i.l)({userId:r.userId},t)),[4,s.send(o)]):[3,2];case 1:return a=u.sent().as(eT).user,this.currentUser&&(t.nickname&&(this.currentUser.nickname=a.nickname),(t.profileUrl||t.profileImage)&&(this.currentUser.plainProfileUrl=a.profileUrl)),[2,a];case 2:throw i.S.connectionRequired}})})},e.prototype.updateCurrentUserInfoWithPreferredLanguages=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s,o;return(0,i.k)(this,function(a){switch(a.label){case 0:return(0,i.u)((0,i.T)("string",e)).throw(i.S.invalidParameters),this.currentUser?(n=(t=i.V.of(this._iid)).sdkState,r=t.requestQueue,s=new eI({userId:n.userId,preferredLanguages:e}),[4,r.send(s)]):[3,2];case 1:return o=a.sent().as(eT).user,this.currentUser&&(this.currentUser.preferredLanguages=o.preferredLanguages),[2,o];case 2:throw i.S.connectionRequired}})})},e.prototype.registerFCMPushTokenForCurrentUser=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:if((0,i.u)((0,i.i)("string",e)).throw(i.S.invalidParameters),!this.currentUser)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),n=(t=i.V.of(this._iid)).sdkState,r=t.requestQueue,s=new ew({userId:n.userId,token:e}),[4,r.send(s)];case 2:return o.sent(),this._fcmPushToken="",[2,l.SUCCESS];case 3:return o.sent(),[2,l.ERROR];case 4:return[3,6];case 5:return this._fcmPushToken=e,[2,l.PENDING];case 6:return[2]}})})},e.prototype.unregisterFCMPushTokenForCurrentUser=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:if((0,i.u)((0,i.i)("string",e)).throw(i.S.invalidParameters),!this.currentUser)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),n=(t=i.V.of(this._iid)).sdkState,r=t.requestQueue,s=new eN({userId:n.userId,token:e}),[4,r.send(s)];case 2:return o.sent(),this._fcmPushToken="",[2,l.SUCCESS];case 3:return o.sent(),[2,l.ERROR];case 4:return[3,6];case 5:return this._fcmPushToken=e,[2,l.PENDING];case 6:return[2]}})})},e.prototype.unregisterFCMPushTokenAllForCurrentUser=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r;return(0,i.k)(this,function(s){switch(s.label){case 0:return this.currentUser?(t=(e=i.V.of(this._iid)).sdkState,n=e.requestQueue,r=new eA({userId:t.userId}),[4,n.send(r)]):[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.registerAPNSPushTokenForCurrentUser=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:if((0,i.u)((0,i.i)("string",e)).throw(i.S.invalidParameters),!this.currentUser)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),n=(t=i.V.of(this._iid)).sdkState,r=t.requestQueue,s=new eS({userId:n.userId,token:e}),[4,r.send(s)];case 2:return o.sent(),this._fcmPushToken="",[2,l.SUCCESS];case 3:return o.sent(),[2,l.ERROR];case 4:return[3,6];case 5:return this._fcmPushToken=e,[2,l.PENDING];case 6:return[2]}})})},e.prototype.unregisterAPNSPushTokenForCurrentUser=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:if((0,i.u)((0,i.i)("string",e)).throw(i.S.invalidParameters),!this.currentUser)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),n=(t=i.V.of(this._iid)).sdkState,r=t.requestQueue,s=new eC({userId:n.userId,token:e}),[4,r.send(s)];case 2:return o.sent(),this._fcmPushToken="",[2,l.SUCCESS];case 3:return o.sent(),[2,l.ERROR];case 4:return[3,6];case 5:return this._fcmPushToken=e,[2,l.PENDING];case 6:return[2]}})})},e.prototype.unregisterAPNSPushTokenAllForCurrentUser=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r;return(0,i.k)(this,function(s){switch(s.label){case 0:return this.currentUser?(t=(e=i.V.of(this._iid)).sdkState,n=e.requestQueue,r=new ek({userId:t.userId}),[4,n.send(r)]):[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.getChannelInvitationPreference=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r;return(0,i.k)(this,function(s){switch(s.label){case 0:return t=(e=i.V.of(this._iid)).sdkState,n=e.requestQueue,r=new eR({userId:t.userId}),[4,n.send(r)];case 1:return[2,{autoAccept:s.sent().as(eM).autoAccept}]}})})},e.prototype.setChannelInvitationPreference=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:return(0,i.u)((0,i.i)("boolean",e)).throw(i.S.invalidParameters),n=(t=i.V.of(this._iid)).sdkState,r=t.requestQueue,s=new eU({userId:n.userId,willAutoAccept:e}),[4,r.send(s)];case 1:return[2,{autoAccept:o.sent().as(eD).autoAccept}]}})})},e.prototype.getDoNotDisturb=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r;return(0,i.k)(this,function(s){switch(s.label){case 0:return t=(e=i.V.of(this._iid)).sdkState,n=e.requestQueue,r=new eP({userId:t.userId}),[4,n.send(r)];case 1:return[2,s.sent().as(ex).preference]}})})},e.prototype.setDoNotDisturb=function(e,t,n,r,s,o){return void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===o&&(o=""),(0,i.j)(this,void 0,void 0,function(){var a,u,c,l;return(0,i.k)(this,function(d){switch(d.label){case 0:return(0,i.u)((0,i.i)("boolean",e)&&(0,i.i)("number",t)&&(0,i.i)("number",n)&&(0,i.i)("number",r)&&(0,i.i)("number",s)&&(0,i.i)("string",o)).throw(i.S.invalidParameters),u=(a=i.V.of(this._iid)).sdkState,c=a.requestQueue,l=new ej({userId:u.userId,doNotDisturbOn:e,startHour:t,startMin:n,endHour:r,endMin:s,timezone:o}),[4,c.send(l)];case 1:return[2,d.sent().as(eq).preference]}})})},e.prototype.getSnoozePeriod=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r;return(0,i.k)(this,function(s){switch(s.label){case 0:return t=(e=i.V.of(this._iid)).sdkState,n=e.requestQueue,r=new eF({userId:t.userId}),[4,n.send(r)];case 1:return[2,s.sent().as(eV).snoozePeriod]}})})},e.prototype.setSnoozePeriod=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),(0,i.j)(this,void 0,void 0,function(){var r,s,o,a;return(0,i.k)(this,function(u){switch(u.label){case 0:return(0,i.u)((0,i.i)("boolean",e)&&(0,i.i)("number",t)&&(0,i.i)("number",n)).throw(i.S.invalidParameters),s=(r=i.V.of(this._iid)).sdkState,o=r.requestQueue,a=new eG({userId:s.userId,snoozeOn:e,startTs:t,endTs:n}),[4,o.send(a)];case 1:return[2,u.sent().as(eB).snoozePeriod]}})})},e.prototype.getMyPushTokensByToken=function(e,t){return(0,i.j)(this,void 0,void 0,function(){var n,r,s,o;return(0,i.k)(this,function(a){switch(a.label){case 0:return(0,i.u)((0,i.i)("string",e)&&(0,i.h)(h,t)).throw(i.S.invalidParameters),r=(n=i.V.of(this._iid)).sdkState,s=n.requestQueue,o=new eO({userId:r.userId,type:t,token:e}),[4,s.send(o)];case 1:return[2,a.sent().as(eL).pushTokens]}})})},e.prototype.getPushTriggerOption=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r;return(0,i.k)(this,function(s){switch(s.label){case 0:return t=(e=i.V.of(this._iid)).sdkState,n=e.requestQueue,r=new ez({userId:t.userId}),[4,n.send(r)];case 1:return[2,s.sent().as(eK).pushTriggerOption]}})})},e.prototype.setPushTriggerOption=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:return(0,i.u)((0,i.h)(d,e)).throw(i.S.invalidParameters),n=(t=i.V.of(this._iid)).sdkState,r=t.requestQueue,s=new eW({userId:n.userId,pushTriggerOption:e}),[4,r.send(s)];case 1:return[2,o.sent().as(eZ).pushTriggerOption]}})})},e.prototype.getPushTemplate=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r;return(0,i.k)(this,function(s){switch(s.label){case 0:return t=(e=i.V.of(this._iid)).sdkState,n=e.requestQueue,r=new eY({userId:t.userId}),[4,n.send(r)];case 1:return[2,s.sent().as(eX).name]}})})},e.prototype.setPushTemplate=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:return(0,i.u)((0,i.h)(f,e)).throw(i.S.invalidParameters),n=(t=i.V.of(this._iid)).sdkState,r=t.requestQueue,s=new eJ({userId:n.userId,templateName:e}),[4,r.send(s)];case 1:return[2,o.sent().as(e$).name]}})})},e.prototype.blockUser=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:return(0,i.u)(e instanceof i.U||(0,i.i)("string",e)).throw(i.S.invalidParameters),n=(t=i.V.of(this._iid)).sdkState,r=t.requestQueue,s=new eQ({userId:n.userId,blockedUserId:e instanceof i.U?e.userId:e}),[4,r.send(s)];case 1:return o.sent(),[2]}})})},e.prototype.blockUserWithUserId=function(e){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(t){return[2,this.blockUser(e)]})})},e.prototype.unblockUser=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:return(0,i.u)(e instanceof i.U||(0,i.i)("string",e)).throw(i.S.invalidParameters),n=(t=i.V.of(this._iid)).sdkState,r=t.requestQueue,s=new eH({userId:n.userId,unblockedUserId:e instanceof i.U?e.userId:e}),[4,r.send(s)];case 1:return o.sent(),[2]}})})},e.prototype.unblockUserWithUserId=function(e){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(t){return[2,this.unblockUser(e)]})})},e.prototype.getFriendChangeLogsByToken=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:return(0,i.u)((0,i.i)("string",e)).throw(i.S.invalidParameters),n=(t=i.V.of(this._iid)).sdkState,r=t.requestQueue,s=new e0({userId:n.userId,token:e}),[4,r.send(s)];case 1:return[2,o.sent().as(e1).changelogs]}})})},e.prototype.getAllowFriendDiscovery=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t,n,r;return(0,i.k)(this,function(s){switch(s.label){case 0:return t=(e=i.V.of(this._iid)).sdkState,n=e.requestQueue,r=new e8({userId:t.userId}),[4,n.send(r)];case 1:return[2,s.sent().as(e9).allowFriendDiscovery]}})})},e.prototype.setAllowFriendDiscovery=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:return(0,i.u)((0,i.i)("boolean",e)).throw(i.S.invalidParameters),n=(t=i.V.of(this._iid)).sdkState,r=t.requestQueue,s=new te({userId:n.userId,allowFriendDiscovery:e}),[4,r.send(s)];case 1:return o.sent(),[2,e]}})})},e.prototype.uploadFriendDiscoveries=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:return n=(t=i.V.of(this._iid)).sdkState,r=t.requestQueue,s=new e2({userId:n.userId,discoveries:e}),[4,r.send(s)];case 1:return[2,o.sent().as(e4).friendDiscoveryRequestId]}})})},e.prototype.deleteFriendDiscovery=function(e){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(t){return[2,this.deleteFriendDiscoveries([e])]})})},e.prototype.deleteFriendDiscoveries=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:return(0,i.u)((0,i.T)("string",e)).throw(i.S.invalidParameters),n=(t=i.V.of(this._iid)).sdkState,r=t.requestQueue,s=new e3({userId:n.userId,discoveryKeys:e}),[4,r.send(s)];case 1:return o.sent(),[2]}})})},e.prototype.addFriends=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:return(0,i.u)((0,i.T)("string",e)).throw(i.S.invalidParameters),n=(t=i.V.of(this._iid)).sdkState,r=t.requestQueue,s=new e5({userId:n.userId,userIds:e}),[4,r.send(s)];case 1:return[2,o.sent().as(e7).users]}})})},e.prototype.deleteFriend=function(e){return(0,i.j)(this,void 0,void 0,function(){return(0,i.k)(this,function(t){return[2,this.deleteFriends([e])]})})},e.prototype.deleteFriends=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n,r,s;return(0,i.k)(this,function(o){switch(o.label){case 0:return(0,i.u)((0,i.T)("string",e)).throw(i.S.invalidParameters),n=(t=i.V.of(this._iid)).sdkState,r=t.requestQueue,s=new e6({userId:n.userId,userIds:e}),[4,r.send(s)];case 1:return o.sent(),[2]}})})},e.prototype.getAllEmoji=function(){return(0,i.j)(this,void 0,void 0,function(){var e,t;return(0,i.k)(this,function(n){switch(n.label){case 0:return e=i.V.of(this._iid).requestQueue,t=new tm,[4,e.send(t)];case 1:return[2,n.sent().as(tg).emojiContainer]}})})},e.prototype.getEmojiCategory=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n;return(0,i.k)(this,function(r){switch(r.label){case 0:return t=i.V.of(this._iid).requestQueue,n=new ty({categoryId:e}),[4,t.send(n)];case 1:return[2,r.sent().as(tb).emojiCategory]}})})},e.prototype.getEmoji=function(e){return(0,i.j)(this,void 0,void 0,function(){var t,n;return(0,i.k)(this,function(r){switch(r.label){case 0:return t=i.V.of(this._iid).requestQueue,n=new tE({key:e}),[4,t.send(n)];case 1:return[2,r.sent().as(tI).emoji]}})})},e}()},32985:function(e,t,n){"use strict";n.d(t,{ZP:function(){return r.u}}),n(18998);var r=n(3273);n(29276)}}]);